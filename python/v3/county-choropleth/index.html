<!DOCTYPE html>
<html>

<head>
      <meta charset="utf-8"/>

      <!-- Media query magic - http://stackoverflow.com/questions/19945658/my-iphone-thinks-its-980px-wide -->
      <meta name="viewport" content="width=device-width, initial-scale=1.0">


      
      <!-- code highlighting -->
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script>
      

      <!--
      //// Stylesheets
      -->

      <!-- Fonts -->
      <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic|Ubuntu+Mono:400,700|Asap" rel="stylesheet" type="text/css"/>

      <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

      <!-- Main Stylesheets -->
      <link rel="stylesheet" type="text/css" href="/all_static/css/main.css?version=ff7246c21c">

      <!-- LOCAL DEV STYLESHEET -->
      <!--<link rel="stylesheet" type="text/css" href="http://api.plotly.dev/all_static/css/main.css">-->

      <!-- Icon -->
      <link rel="shortcut icon" href="/all_static/images/plotly-ico.png" type="image/x-icon"/>

      <!-- Google Tags-->
      <!-- Google Tag Manager Tag -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N6T2RXG');</script>

      <script id="drift">
  !(function() {
    var t = (window.driftt = window.drift = window.driftt || []);
    if (!t.init) {
      if (t.invoked)
        return void (
          window.console &&
          console.error &&
          console.error("Drift snippet included twice.")
        );
      (t.invoked = !0),
        (t.methods = [
          "identify",
          "config",
          "track",
          "reset",
          "debug",
          "show",
          "ping",
          "page",
          "hide",
          "off",
          "on"
        ]),
        (t.factory = function(e) {
          return function() {
            var n = Array.prototype.slice.call(arguments);
            return n.unshift(e), t.push(n), t;
          };
        }),
        t.methods.forEach(function(e) {
          t[e] = t.factory(e);
        }),
        (t.load = function(t) {
          var e = 3e5,
            n = Math.ceil(new Date() / e) * e,
            o = document.createElement("script");
          (o.type = "text/javascript"),
            (o.async = !0),
            (o.crossorigin = "anonymous"),
            (o.src = "https://js.driftt.com/include/" + n + "/" + t + ".js");
          var i = document.getElementsByTagName("script")[0];
          i.parentNode.insertBefore(o, i);
        });
    }
  })();
  drift.SNIPPET_VERSION = "0.3.1";
  drift.load("4t5t45cv8ey2");
</script>



    <!-- META TAGS -->
    <!-- SEO Tags - title, meta_description -->
<title>USA County Choropleth Maps | Python/v3 | Plotly  </title>
<meta name="description" content="How to create colormaped representations of USA counties by FIPS values in Python.">

<!-- Bing tags -->
    <meta name="msvalidate.01" content="D319859A832F9F1D15A7646E2A42150A" />
<!-- Facebook tags -->
    <meta property="og:title" content="USA County Choropleth Maps"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://images.plot.ly/plotly-documentation/thumbnail/county-choropleth-usa-greybkgd.jpg">
    <meta property="og:description" content="How to create colormaped representations of USA counties by FIPS values in Python."/>
    <meta property="og:url" />
    <meta property="fb:admins" content="1123751525"/>
    <meta property="fb:admins" content="22418"/>

<!-- twitter tags -->
    <meta name="twitter:card" content="photo" />
    <meta name="twitter:title" content="USA County Choropleth Maps"/>
    <meta name="twitter:url" content="https://plot.ly/python/v3/county-choropleth/"/>
    <meta name="twitter:description" content="How to create colormaped representations of USA counties by FIPS values in Python."/>
    <meta name="twitter:image" content="https://images.plot.ly/plotly-documentation/thumbnail/county-choropleth-usa-greybkgd.jpg">
    <meta name="twitter:site" content="@plotlygraphs"/>

<!-- Favicon -->
    <link rel="shortcut icon" href="/all_static/images/plotly-ico.png?v=2" />


    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
            integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
            crossorigin="anonymous"></script>


</head>


<body data-spy="scroll" data-target=".watch" style="position:relative;">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N6T2RXG"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->


<!--[if lt IE 10]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
	your browser</a> to improve your experience.</p>
<![endif]-->

<div style="margin-top: 80px"></div>


<header data-spy="affix" data-offset-top="80" class="header-main --default">
    <div class="--wrap">
        <div class="--wrap-left"><a href="https://plot.ly/" target="_blank" class="-identity">
            <div class="-identity">
                <img src="/all_static/images/plotly_graphing_libraries.png" style="height: 66px;"/>
            </div></a>

        </div>
        <div class="--wrap-right">
            <nav class="--nav-meta" role="navigation">
                <ul>
                    <li><a href="https://go.plot.ly/demo_live" data-mode="1" target="_blank" class="typeform-share button --enterprise-quaternary">DEMO DASH</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>


<section class="--breadcrumb-container"  data-spy="affix" >
    <div class="--wrap">
        <!--
            Show this if page is too thin (hides breadcrumb list)
            Toggles sidebar slide in/out (see main.js)
        -->
        <a class="toggle-sidebar">
            <div class="icon">
                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                    <path fill="#000000" d="M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z" />
                </svg>
            </div>
            <span class="show">Show Sidebar</span>
            <span class="hide">Hide Sidebar</span>
        </a>

        <!--
            Breadcrumb List
        -->
        <ul class="--breadcrumb-list">
            <li class="--breadcrumb-item">
                <div class="icon">
                    <svg style="width:24px;height:24px" viewbox="0 0 24 24">
                        <path fill="#000000" d="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"></path>
                    </svg>
                </div>
                <a href="https://help.plot.ly/"><span>Help</span></a>
            </li>
            <li class="--breadcrumb-item"><a href="/graphing-libraries/"><span>Open Source Graphing Libraries</span></a></li>
            
            <li class="--breadcrumb-item">
                <a href="/python/v3"  ><span>Python/v3</span></a>
            </li>
            

            
                
                
                
                <li class="--breadcrumb-item">
                <a href="/python/v3/#maps">
                        <span>Maps</span>
                </a>
                    </li>

            

            
            
                <li class="--breadcrumb-item">
                    <span>USA County Choropleth Maps</span>
                </li>
            
            

            
        </ul>

        <!--
            Fork on GitHub :)
        -->

     <div class="--fork">
        
        
        <a id="forklink" href= "https://github.com/plotly/documentation/tree/source-design-merge/_posts/python-v3/maps/county-choropleth/" >
        
                <div class="icon">
                    <svg style="width:24px;height:24px" viewbox="0 0 24 24">
                        <path fill="#000000" d="M2.6,10.59L8.38,4.8L10.07,6.5C9.83,7.35 10.22,8.28 11,8.73V14.27C10.4,14.61 10,15.26 10,16A2,2 0 0,0 12,18A2,2 0 0,0 14,16C14,15.26 13.6,14.61 13,14.27V9.41L15.07,11.5C15,11.65 15,11.82 15,12A2,2 0 0,0 17,14A2,2 0 0,0 19,12A2,2 0 0,0 17,10C16.82,10 16.65,10 16.5,10.07L13.93,7.5C14.19,6.57 13.71,5.55 12.78,5.16C12.35,5 11.9,4.96 11.5,5.07L9.8,3.38L10.59,2.6C11.37,1.81 12.63,1.81 13.41,2.6L21.4,10.59C22.19,11.37 22.19,12.63 21.4,13.41L13.41,21.4C12.63,22.19 11.37,22.19 10.59,21.4L2.6,13.41C1.81,12.63 1.81,11.37 2.6,10.59Z"></path>
                    </svg>
                </div>
                <span>Edit this page on GitHub</span>
            </a>
    </div>
</section>


<main class="--page page--single --index">

	<div class="--wrap">
		<!-- aside - Main Sidebar-->
		<aside class="--sidebar-container">
			<div class="--sidebar-fixed reference" data-spy="affix" id="where">
				<header class="--sidebar-header">Navigation</header>
				<nav class="--sidebar-body watch"   id="where">
          <ul class="--sidebar-list"></ul>
          
					<button class="--btn back">
						<div>
							<img class="--icon-notebook" src="https://plot.ly/gh-pages/documentation/static/images/notebook@2x.png" alt="notebook">
						</div>
						<span><a href="/~notebook_demo/212/">Download <b>THIS</b> Notebook!</a></span>
					</button>
					
					
					<button class="--btn back">
						<div class="icon">
							<svg style="width:24px;height:24px" viewBox="0 0 24 24">
								<path fill="#000000"
									  d="M20,10V14H11L14.5,17.5L12.08,19.92L4.16,12L12.08,4.08L14.5,6.5L11,10H20Z"/>
							</svg>
						</div>
						<span><a href="/python/v3/">Back to Python/v3
						</a></span>
					</button>
				</nav>
			</div>
		</aside>
		<!-- Main-->
		<section class="--page-body --tutorial-index --base">
			<header class="--welcome">
				<div class="--welcome-body">
					<!--div.--wrap-inner-->
					<div class="--title">
						<div class="--category-img">




							
							
              
							<img src="https://images.plot.ly/language-icons/api-home/python-logo.png" alt="">
							
							
							
							
							
							
							
							





						</div>
						<div class="--body">

							
							<h1>
								USA County Choropleth Maps
								
								in Python/v3
								
							</h1>
							<p>How to create colormaped representations of USA counties by FIPS values in Python. </p>

							
              	<nav class="lang-nav">
		<ul class="lang-nav--list"><li class="lang-nav--item">
                <a class="lang_nav_button " href="/python/county-choropleth/">
                    <div><img src="https://plot.ly/gh-pages/documentation/static/images/python-small.png" alt="python" class="lang_nav_thum"></div>
                    Python
                </a>
            </li></ul>
		</nav>


						</div>
					</div>
				</div>
			</header>

			<!-- Start Plotly Basics Section -->
			<section class="tutorial-content">

				


<div style="margin: 20px auto; width: 75%; background: #f4f4f8; padding: 20px; font-weight: 400;
    line-height: 1.85; text-align: center; border: 5px dashed #ab63fa;">
	<strong>Note:</strong> this page is part of the documentation for version 3 of Plotly.py, which is <em>not the most recent version</em>.<br/>
  See our <a href="https://plot.ly/python/v4-migration/" style="color: #2391fe">Version 4 Migration Guide</a> for information about how to upgrade.<br />The version 4 version of this page is <a href="/python/county-choropleth/">here</a>.</div>









				
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="New-to-Plotly?">New to Plotly?<a class="anchor-link" href="#New-to-Plotly?">&#182;</a></h4><p>Plotly's Python library is free and open source! <a href="https://plot.ly/python/getting-started/">Get started</a> by downloading the client and <a href="https://plot.ly/python/getting-started/">reading the primer</a>.
<br>You can set up Plotly to work in <a href="https://plot.ly/python/getting-started/#initialization-for-online-plotting">online</a> or <a href="https://plot.ly/python/getting-started/#initialization-for-offline-plotting">offline</a> mode, or in <a href="https://plot.ly/python/getting-started/#start-plotting-online">jupyter notebooks</a>.
<br>We also have a quick-reference <a href="https://images.plot.ly/plotly-documentation/images/python_cheat_sheet.pdf">cheatsheet</a> (new!) to help you get started!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Version-Check">Version Check<a class="anchor-link" href="#Version-Check">&#182;</a></h4><p>Note: <code>United States County Choropleths</code> are available in version <b>2.5.1+</b><br>
Run  <code>pip install plotly --upgrade</code> to update your Plotly version</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">plotly</span>
<span class="n">plotly</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[1]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;2.7.0&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Required-Packages">Required Packages<a class="anchor-link" href="#Required-Packages">&#182;</a></h4><p><code>geopandas</code>, <code>pyshp</code> and <code>shapely</code> must be installed for this figure factory.</p>
<p>Run the following commands to install the correct versions of the following modules:</p>

<pre><code>pip install geopandas==0.3.0
pip install pyshp==1.2.10
pip install shapely==1.6.3</code></pre>
<p>If you are using Windows, follow this post to properly install geopandas and dependencies: <a href="http://geoffboeing.com/2014/09/using-geopandas-windows/">http://geoffboeing.com/2014/09/using-geopandas-windows/</a>. If you are using Anaconda, do not use PIP to install the packages above. Instead use conda to install them:</p>

<pre><code>conda install plotly
conda install geopandas</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="FIPS-and-Values">FIPS and Values<a class="anchor-link" href="#FIPS-and-Values">&#182;</a></h4><p>Every US state and county has an assined ID regulated by the US Federal Government under the term FIPS (Federal Information Processing Standards) codes. There are state codes and county codes: the 2016 state and county FIPS codes can be found at the <a href="https://www.census.gov/geographies/reference-files/2016/demo/popest/2016-fips.html">US Census Website</a>.</p>
<p>Combine a state FIPS code (eg. <code>06</code> for California) with a county FIPS code of the state (eg. <code>059</code> for Orange county) and this new state-county FIPS code (<code>06059</code>) uniquely refers to the specified state and county.</p>
<p><code>ff.create_choropleth</code> only needs a list of FIPS codes and a list of values. Each FIPS code points to one county and each corresponding value in <code>values</code> determines the color of the county.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Simple-Example">Simple Example<a class="anchor-link" href="#Simple-Example">&#182;</a></h4><p>A simple example of this is a choropleth a few counties in California:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">plotly.figure_factory</span> <span class="kn">as</span> <span class="nn">ff</span>

<span class="n">fips</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;06021&#39;</span><span class="p">,</span> <span class="s1">&#39;06023&#39;</span><span class="p">,</span> <span class="s1">&#39;06027&#39;</span><span class="p">,</span>
        <span class="s1">&#39;06029&#39;</span><span class="p">,</span> <span class="s1">&#39;06033&#39;</span><span class="p">,</span> <span class="s1">&#39;06059&#39;</span><span class="p">,</span>
        <span class="s1">&#39;06047&#39;</span><span class="p">,</span> <span class="s1">&#39;06049&#39;</span><span class="p">,</span> <span class="s1">&#39;06051&#39;</span><span class="p">,</span>
        <span class="s1">&#39;06055&#39;</span><span class="p">,</span> <span class="s1">&#39;06061&#39;</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fips</span><span class="p">))</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">create_choropleth</span><span class="p">(</span><span class="n">fips</span><span class="o">=</span><span class="n">fips</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">)</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;choropleth of some cali counties - full usa scope&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>/home/michael/.virtualenvs/plot2py2/local/lib/python2.7/site-packages/pandas/core/frame.py:6211: FutureWarning:

Sorting because non-concatenation axis is not aligned. A future version
of pandas will change to not sort by default.

To accept the future behavior, pass &#39;sort=False&#39;.

To retain the current behavior and silence the warning, pass &#39;sort=True&#39;.


</pre>
</div>
</div>

<div class="output_area">

<div class="prompt output_prompt">Out[2]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plot.ly/~michaelbabyn/97.embed" height="450px" width="900px"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Change-the-Scope">Change the Scope<a class="anchor-link" href="#Change-the-Scope">&#182;</a></h4><p>Even if your FIPS values belong to a single state, the scope defaults to the entire United States as displayed in the example above. Changing the scope of the choropleth shifts the zoom and position of the USA map. You can define the scope with a list of state names and the zoom will automatically adjust to include the state outlines of the selected states.</p>
<p>By default <code>scope</code> is set to <code>['USA']</code> which the API treats as identical to passing a list of all 50 state names:<br></p>
<p><code>['AK', 'AL', 'CA', ...]</code></p>
<p>State abbreviations (eg. <code>CA</code>) or the proper names (eg. <code>California</code>) as strings are accepted. If the state name is not recognized, the API will throw a Warning and indicate which FIPS values were ignored.</p>
<p>Another param used in the example below is <code>binning_endpoints</code>. If your <code>values</code> is a list of numbers, you can bin your values into half-open intervals on the real line.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">plotly.figure_factory</span> <span class="kn">as</span> <span class="nn">ff</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="n">df_sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/plotly/datasets/master/minoritymajority.csv&#39;</span><span class="p">)</span>
<span class="n">df_sample_r</span> <span class="o">=</span> <span class="n">df_sample</span><span class="p">[</span><span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;STNAME&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;California&#39;</span><span class="p">]</span>

<span class="n">values</span> <span class="o">=</span> <span class="n">df_sample_r</span><span class="p">[</span><span class="s1">&#39;TOT_POP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">fips</span> <span class="o">=</span> <span class="n">df_sample_r</span><span class="p">[</span><span class="s1">&#39;FIPS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">colorscale</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;rgb(193, 193, 193)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rgb(239,239,239)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rgb(195, 196, 222)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rgb(144,148,194)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rgb(101,104,168)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rgb(65, 53, 132)&#39;</span>
<span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">create_choropleth</span><span class="p">(</span>
    <span class="n">fips</span><span class="o">=</span><span class="n">fips</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;CA&#39;</span><span class="p">,</span> <span class="s1">&#39;AZ&#39;</span><span class="p">,</span> <span class="s1">&#39;Nevada&#39;</span><span class="p">,</span> <span class="s1">&#39;Oregon&#39;</span><span class="p">,</span> <span class="s1">&#39; Idaho&#39;</span><span class="p">],</span>
    <span class="n">binning_endpoints</span><span class="o">=</span><span class="p">[</span><span class="mi">14348</span><span class="p">,</span> <span class="mi">63983</span><span class="p">,</span> <span class="mi">134827</span><span class="p">,</span> <span class="mi">426762</span><span class="p">,</span> <span class="mi">2081313</span><span class="p">],</span> <span class="n">colorscale</span><span class="o">=</span><span class="n">colorscale</span><span class="p">,</span>
    <span class="n">county_outline</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;rgb(255,255,255)&#39;</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span> <span class="n">round_legend_values</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">legend_title</span><span class="o">=</span><span class="s1">&#39;Population by County&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;California and Nearby States&#39;</span>
<span class="p">)</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;choropleth_california_and_surr_states_outlines&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[3]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plot.ly/~michaelbabyn/99.embed" height="450px" width="900px"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Single-State">Single State<a class="anchor-link" href="#Single-State">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">plotly.figure_factory</span> <span class="kn">as</span> <span class="nn">ff</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="n">df_sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/plotly/datasets/master/minoritymajority.csv&#39;</span><span class="p">)</span>
<span class="n">df_sample_r</span> <span class="o">=</span> <span class="n">df_sample</span><span class="p">[</span><span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;STNAME&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Florida&#39;</span><span class="p">]</span>

<span class="n">values</span> <span class="o">=</span> <span class="n">df_sample_r</span><span class="p">[</span><span class="s1">&#39;TOT_POP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">fips</span> <span class="o">=</span> <span class="n">df_sample_r</span><span class="p">[</span><span class="s1">&#39;FIPS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">endpts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">values</span><span class="p">):</span><span class="nb">max</span><span class="p">(</span><span class="n">values</span><span class="p">):</span><span class="mi">4j</span><span class="p">])</span>
<span class="n">colorscale</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#030512&quot;</span><span class="p">,</span><span class="s2">&quot;#1d1d3b&quot;</span><span class="p">,</span><span class="s2">&quot;#323268&quot;</span><span class="p">,</span><span class="s2">&quot;#3d4b94&quot;</span><span class="p">,</span><span class="s2">&quot;#3e6ab0&quot;</span><span class="p">,</span>
              <span class="s2">&quot;#4989bc&quot;</span><span class="p">,</span><span class="s2">&quot;#60a7c7&quot;</span><span class="p">,</span><span class="s2">&quot;#85c5d3&quot;</span><span class="p">,</span><span class="s2">&quot;#b7e0e4&quot;</span><span class="p">,</span><span class="s2">&quot;#eafcfd&quot;</span><span class="p">]</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">create_choropleth</span><span class="p">(</span>
    <span class="n">fips</span><span class="o">=</span><span class="n">fips</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Florida&#39;</span><span class="p">],</span> <span class="n">show_state_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">colorscale</span><span class="o">=</span><span class="n">colorscale</span><span class="p">,</span> <span class="n">binning_endpoints</span><span class="o">=</span><span class="n">endpts</span><span class="p">,</span> <span class="n">round_legend_values</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">plot_bgcolor</span><span class="o">=</span><span class="s1">&#39;rgb(229,229,229)&#39;</span><span class="p">,</span>
    <span class="n">paper_bgcolor</span><span class="o">=</span><span class="s1">&#39;rgb(229,229,229)&#39;</span><span class="p">,</span>
    <span class="n">legend_title</span><span class="o">=</span><span class="s1">&#39;Population by County&#39;</span><span class="p">,</span>
    <span class="n">county_outline</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;rgb(255,255,255)&#39;</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span>
    <span class="n">exponent_format</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;choropleth_florida&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[4]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plot.ly/~michaelbabyn/101.embed" height="450px" width="900px"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Multiple-States">Multiple States<a class="anchor-link" href="#Multiple-States">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">plotly.figure_factory</span> <span class="kn">as</span> <span class="nn">ff</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="n">NE_states</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Connecticut&#39;</span><span class="p">,</span> <span class="s1">&#39;Maine&#39;</span><span class="p">,</span> <span class="s1">&#39;Massachusetts&#39;</span><span class="p">,</span> <span class="s1">&#39;New Hampshire&#39;</span><span class="p">,</span> <span class="s1">&#39;Rhode Island&#39;</span><span class="p">,</span> <span class="s1">&#39;Vermont&#39;</span><span class="p">]</span>
<span class="n">df_sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/plotly/datasets/master/minoritymajority.csv&#39;</span><span class="p">)</span>
<span class="n">df_sample_r</span> <span class="o">=</span> <span class="n">df_sample</span><span class="p">[</span><span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;STNAME&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">NE_states</span><span class="p">)]</span>

<span class="n">values</span> <span class="o">=</span> <span class="n">df_sample_r</span><span class="p">[</span><span class="s1">&#39;TOT_POP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">fips</span> <span class="o">=</span> <span class="n">df_sample_r</span><span class="p">[</span><span class="s1">&#39;FIPS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">colorscale</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;rgb(68.0, 1.0, 84.0)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rgb(66.0, 64.0, 134.0)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rgb(38.0, 130.0, 142.0)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rgb(63.0, 188.0, 115.0)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rgb(216.0, 226.0, 25.0)&#39;</span>
<span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">create_choropleth</span><span class="p">(</span>
    <span class="n">fips</span><span class="o">=</span><span class="n">fips</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
    <span class="n">scope</span><span class="o">=</span><span class="n">NE_states</span><span class="p">,</span> <span class="n">county_outline</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;rgb(255,255,255)&#39;</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span>
    <span class="n">legend_title</span><span class="o">=</span><span class="s1">&#39;Population per county&#39;</span>

<span class="p">)</span>
<span class="n">fig</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;legend&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
<span class="n">fig</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;annotations&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.12</span><span class="p">,</span> <span class="s1">&#39;xanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;left&#39;</span><span class="p">})</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;choropleth_new_england&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[5]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plot.ly/~michaelbabyn/103.embed" height="450px" width="900px"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Simplify-County,-State-Lines">Simplify County, State Lines<a class="anchor-link" href="#Simplify-County,-State-Lines">&#182;</a></h4><p>Below is a choropleth that uses several other parameters. For a full list of all available params call <code>help(ff.create_choropleth)</code></p>
<ul>
<li><code>simplify_county</code> determines the simplification factor for the counties. The larger the number, the fewer vertices and edges each polygon has. See <a href="http://toblerity.org/shapely/manual.html#object.simplify">http://toblerity.org/shapely/manual.html#object.simplify</a> for more information.</li>
<li><code>simplify_state</code> simplifies the state outline polygon. See the <a href="http://toblerity.org/shapely/manual.html#object.simplify">documentation</a> for more information.
Default for both <code>simplify_county</code> and <code>simplif_state</code> is 0.02</li>
</ul>
<p>Note: This choropleth uses a divergent categorical colorscale. See <a href="http://react-colorscales.getforge.io/">http://react-colorscales.getforge.io/</a> for other cool colorscales.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.figure_factory</span> <span class="kn">as</span> <span class="nn">ff</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="n">scope</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Oregon&#39;</span><span class="p">]</span>
<span class="n">df_sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="s1">&#39;https://raw.githubusercontent.com/plotly/datasets/master/minoritymajority.csv&#39;</span>
<span class="p">)</span>
<span class="n">df_sample_r</span> <span class="o">=</span> <span class="n">df_sample</span><span class="p">[</span><span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;STNAME&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">scope</span><span class="p">)]</span>

<span class="n">values</span> <span class="o">=</span> <span class="n">df_sample_r</span><span class="p">[</span><span class="s1">&#39;TOT_POP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">fips</span> <span class="o">=</span> <span class="n">df_sample_r</span><span class="p">[</span><span class="s1">&#39;FIPS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">colorscale</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span> <span class="s2">&quot;#ffffb3&quot;</span><span class="p">,</span> <span class="s2">&quot;#bebada&quot;</span><span class="p">,</span> <span class="s2">&quot;#fb8072&quot;</span><span class="p">,</span>
              <span class="s2">&quot;#80b1d3&quot;</span><span class="p">,</span> <span class="s2">&quot;#fdb462&quot;</span><span class="p">,</span> <span class="s2">&quot;#b3de69&quot;</span><span class="p">,</span> <span class="s2">&quot;#fccde5&quot;</span><span class="p">,</span>
              <span class="s2">&quot;#d9d9d9&quot;</span><span class="p">,</span> <span class="s2">&quot;#bc80bd&quot;</span><span class="p">,</span> <span class="s2">&quot;#ccebc5&quot;</span><span class="p">,</span> <span class="s2">&quot;#ffed6f&quot;</span><span class="p">,</span>
              <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span> <span class="s2">&quot;#ffffb3&quot;</span><span class="p">,</span> <span class="s2">&quot;#bebada&quot;</span><span class="p">,</span> <span class="s2">&quot;#fb8072&quot;</span><span class="p">,</span>
              <span class="s2">&quot;#80b1d3&quot;</span><span class="p">,</span> <span class="s2">&quot;#fdb462&quot;</span><span class="p">,</span> <span class="s2">&quot;#b3de69&quot;</span><span class="p">,</span> <span class="s2">&quot;#fccde5&quot;</span><span class="p">,</span>
              <span class="s2">&quot;#d9d9d9&quot;</span><span class="p">,</span> <span class="s2">&quot;#bc80bd&quot;</span><span class="p">,</span> <span class="s2">&quot;#ccebc5&quot;</span><span class="p">,</span> <span class="s2">&quot;#ffed6f&quot;</span><span class="p">,</span>
              <span class="s2">&quot;#8dd3c7&quot;</span><span class="p">,</span> <span class="s2">&quot;#ffffb3&quot;</span><span class="p">,</span> <span class="s2">&quot;#bebada&quot;</span><span class="p">,</span> <span class="s2">&quot;#fb8072&quot;</span><span class="p">,</span>
              <span class="s2">&quot;#80b1d3&quot;</span><span class="p">,</span> <span class="s2">&quot;#fdb462&quot;</span><span class="p">,</span> <span class="s2">&quot;#b3de69&quot;</span><span class="p">,</span> <span class="s2">&quot;#fccde5&quot;</span><span class="p">,</span>
              <span class="s2">&quot;#d9d9d9&quot;</span><span class="p">,</span> <span class="s2">&quot;#bc80bd&quot;</span><span class="p">,</span> <span class="s2">&quot;#ccebc5&quot;</span><span class="p">,</span> <span class="s2">&quot;#ffed6f&quot;</span><span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">create_choropleth</span><span class="p">(</span>
    <span class="n">fips</span><span class="o">=</span><span class="n">fips</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="n">scope</span><span class="p">,</span>
    <span class="n">colorscale</span><span class="o">=</span><span class="n">colorscale</span><span class="p">,</span> <span class="n">round_legend_values</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">simplify_county</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">simplify_state</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">county_outline</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;rgb(15, 15, 55)&#39;</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span>
    <span class="n">state_outline</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
    <span class="n">legend_title</span><span class="o">=</span><span class="s1">&#39;pop. per county&#39;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Oregon&#39;</span>
<span class="p">)</span>

<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;choropleth_oregon_ono_simplification_factor&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[6]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plot.ly/~michaelbabyn/105.embed" height="450px" width="900px"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="The-Entire-USA">The Entire USA<a class="anchor-link" href="#The-Entire-USA">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">plotly.figure_factory</span> <span class="kn">as</span> <span class="nn">ff</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="n">df_sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/plotly/datasets/master/laucnty16.csv&#39;</span><span class="p">)</span>
<span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;State FIPS Code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;State FIPS Code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;County FIPS Code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;County FIPS Code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;FIPS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;State FIPS Code&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;County FIPS Code&#39;</span><span class="p">]</span>

<span class="n">colorscale</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#f7fbff&quot;</span><span class="p">,</span><span class="s2">&quot;#ebf3fb&quot;</span><span class="p">,</span><span class="s2">&quot;#deebf7&quot;</span><span class="p">,</span><span class="s2">&quot;#d2e3f3&quot;</span><span class="p">,</span><span class="s2">&quot;#c6dbef&quot;</span><span class="p">,</span><span class="s2">&quot;#b3d2e9&quot;</span><span class="p">,</span><span class="s2">&quot;#9ecae1&quot;</span><span class="p">,</span>
              <span class="s2">&quot;#85bcdb&quot;</span><span class="p">,</span><span class="s2">&quot;#6baed6&quot;</span><span class="p">,</span><span class="s2">&quot;#57a0ce&quot;</span><span class="p">,</span><span class="s2">&quot;#4292c6&quot;</span><span class="p">,</span><span class="s2">&quot;#3082be&quot;</span><span class="p">,</span><span class="s2">&quot;#2171b5&quot;</span><span class="p">,</span><span class="s2">&quot;#1361a9&quot;</span><span class="p">,</span>
              <span class="s2">&quot;#08519c&quot;</span><span class="p">,</span><span class="s2">&quot;#0b4083&quot;</span><span class="p">,</span><span class="s2">&quot;#08306b&quot;</span><span class="p">]</span>
<span class="n">endpts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">colorscale</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">fips</span> <span class="o">=</span> <span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;FIPS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">df_sample</span><span class="p">[</span><span class="s1">&#39;Unemployment Rate (%)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">create_choropleth</span><span class="p">(</span>
    <span class="n">fips</span><span class="o">=</span><span class="n">fips</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
    <span class="n">binning_endpoints</span><span class="o">=</span><span class="n">endpts</span><span class="p">,</span>
    <span class="n">colorscale</span><span class="o">=</span><span class="n">colorscale</span><span class="p">,</span>
    <span class="n">show_state_data</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">show_hover</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">centroid_marker</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;opacity&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
    <span class="n">asp</span><span class="o">=</span><span class="mf">2.9</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;USA by Unemployment %&#39;</span><span class="p">,</span>
    <span class="n">legend_title</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">% u</span><span class="s1">nemployed&#39;</span>
<span class="p">)</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;choropleth_full_usa&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>The draw time for this plot will be slow for clients without much RAM.
</pre>
</div>
</div>

<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>/home/michael/.virtualenvs/plot2py2/local/lib/python2.7/site-packages/plotly/api/v1/clientresp.py:40: UserWarning:

Estimated Draw Time Slow

</pre>
</div>
</div>

<div class="output_area">

<div class="prompt output_prompt">Out[7]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plot.ly/~michaelbabyn/107.embed" height="450px" width="900px"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Also see Mapbox county choropleths made in Python: <a href="https://plot.ly/python/mapbox-county-choropleth/">https://plot.ly/python/mapbox-county-choropleth/</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Reference">Reference<a class="anchor-link" href="#Reference">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">ff</span><span class="o">.</span><span class="n">create_choropleth</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on function create_choropleth in module plotly.figure_factory._county_choropleth:

create_choropleth(fips, values, scope=[&#39;usa&#39;], binning_endpoints=None, colorscale=None, order=None, simplify_county=0.02, simplify_state=0.02, asp=None, show_hover=True, show_state_data=True, state_outline=None, county_outline=None, centroid_marker=None, round_legend_values=False, exponent_format=False, legend_title=&#39;&#39;, **layout_options)
    Returns figure for county choropleth. Uses data from package_data.

    :param (list) fips: list of FIPS values which correspond to the con
        catination of state and county ids. An example is &#39;01001&#39;.
    :param (list) values: list of numbers/strings which correspond to the
        fips list. These are the values that will determine how the counties
        are colored.
    :param (list) scope: list of states and/or states abbreviations. Fits
        all states in the camera tightly. Selecting [&#39;usa&#39;] is the equivalent
        of appending all 50 states into your scope list. Selecting only &#39;usa&#39;
        does not include &#39;Alaska&#39;, &#39;Puerto Rico&#39;, &#39;American Samoa&#39;,
        &#39;Commonwealth of the Northern Mariana Islands&#39;, &#39;Guam&#39;,
        &#39;United States Virgin Islands&#39;. These must be added manually to the
        list.
        Default = [&#39;usa&#39;]
    :param (list) binning_endpoints: ascending numbers which implicitly define
        real number intervals which are used as bins. The colorscale used must
        have the same number of colors as the number of bins and this will
        result in a categorical colormap.
    :param (list) colorscale: a list of colors with length equal to the
        number of categories of colors. The length must match either all
        unique numbers in the &#39;values&#39; list or if endpoints is being used, the
        number of categories created by the endpoints.

        For example, if binning_endpoints = [4, 6, 8], then there are 4 bins:
        [-inf, 4), [4, 6), [6, 8), [8, inf)
    :param (list) order: a list of the unique categories (numbers/bins) in any
        desired order. This is helpful if you want to order string values to
        a chosen colorscale.
    :param (float) simplify_county: determines the simplification factor
        for the counties. The larger the number, the fewer vertices and edges
        each polygon has. See
        http://toblerity.org/shapely/manual.html#object.simplify for more
        information.
        Default = 0.02
    :param (float) simplify_state: simplifies the state outline polygon.
        See http://toblerity.org/shapely/manual.html#object.simplify for more
        information.
        Default = 0.02
    :param (float) asp: the width-to-height aspect ratio for the camera.
        Default = 2.5
    :param (bool) show_hover: show county hover and centroid info
    :param (bool) show_state_data: reveals state boundary lines
    :param (dict) state_outline: dict of attributes of the state outline
        including width and color. See
        https://plot.ly/python/reference/#scatter-marker-line for all valid
        params
    :param (dict) county_outline: dict of attributes of the county outline
        including width and color. See
        https://plot.ly/python/reference/#scatter-marker-line for all valid
        params
    :param (dict) centroid_marker: dict of attributes of the centroid marker.
        The centroid markers are invisible by default and appear visible on
        selection. See https://plot.ly/python/reference/#scatter-marker for
        all valid params
    :param (bool) round_legend_values: automatically round the numbers that
        appear in the legend to the nearest integer.
        Default = False
    :param (bool) exponent_format: if set to True, puts numbers in the K, M,
        B number format. For example 4000.0 becomes 4.0K
        Default = False
    :param (str) legend_title: title that appears above the legend
    :param **layout_options: a **kwargs argument for all layout parameters


    Example 1: Florida
    ```
    import plotly.plotly as py
    import plotly.figure_factory as ff

    import numpy as np
    import pandas as pd

    df_sample = pd.read_csv(
        &#39;https://raw.githubusercontent.com/plotly/datasets/master/minoritymajority.csv&#39;
    )
    df_sample_r = df_sample[df_sample[&#39;STNAME&#39;] == &#39;Florida&#39;]

    values = df_sample_r[&#39;TOT_POP&#39;].tolist()
    fips = df_sample_r[&#39;FIPS&#39;].tolist()

    binning_endpoints = list(np.mgrid[min(values):max(values):4j])
    colorscale = [&#34;#030512&#34;,&#34;#1d1d3b&#34;,&#34;#323268&#34;,&#34;#3d4b94&#34;,&#34;#3e6ab0&#34;,
                  &#34;#4989bc&#34;,&#34;#60a7c7&#34;,&#34;#85c5d3&#34;,&#34;#b7e0e4&#34;,&#34;#eafcfd&#34;]
    fig = ff.create_choropleth(
        fips=fips, values=values, scope=[&#39;Florida&#39;], show_state_data=True,
        colorscale=colorscale, binning_endpoints=binning_endpoints,
        round_legend_values=True, plot_bgcolor=&#39;rgb(229,229,229)&#39;,
        paper_bgcolor=&#39;rgb(229,229,229)&#39;, legend_title=&#39;Florida Population&#39;,
        county_outline={&#39;color&#39;: &#39;rgb(255,255,255)&#39;, &#39;width&#39;: 0.5},
        exponent_format=True,
    )
    py.iplot(fig, filename=&#39;choropleth_florida&#39;)
    ```

    Example 2: New England
    ```
    import plotly.plotly as py
    import plotly.figure_factory as ff

    import pandas as pd

    NE_states = [&#39;Connecticut&#39;, &#39;Maine&#39;, &#39;Massachusetts&#39;,
                 &#39;New Hampshire&#39;, &#39;Rhode Island&#39;]
    df_sample = pd.read_csv(
        &#39;https://raw.githubusercontent.com/plotly/datasets/master/minoritymajority.csv&#39;
    )
    df_sample_r = df_sample[df_sample[&#39;STNAME&#39;].isin(NE_states)]
    colorscale = [&#39;rgb(68.0, 1.0, 84.0)&#39;,
     &#39;rgb(66.0, 64.0, 134.0)&#39;,
     &#39;rgb(38.0, 130.0, 142.0)&#39;,
     &#39;rgb(63.0, 188.0, 115.0)&#39;,
     &#39;rgb(216.0, 226.0, 25.0)&#39;]

    values = df_sample_r[&#39;TOT_POP&#39;].tolist()
    fips = df_sample_r[&#39;FIPS&#39;].tolist()
    fig = ff.create_choropleth(
        fips=fips, values=values, scope=NE_states, show_state_data=True
    )
    py.iplot(fig, filename=&#39;choropleth_new_england&#39;)
    ```

    Example 3: California and Surrounding States
    ```
    import plotly.plotly as py
    import plotly.figure_factory as ff

    import pandas as pd

    df_sample = pd.read_csv(
        &#39;https://raw.githubusercontent.com/plotly/datasets/master/minoritymajority.csv&#39;
    )
    df_sample_r = df_sample[df_sample[&#39;STNAME&#39;] == &#39;California&#39;]

    values = df_sample_r[&#39;TOT_POP&#39;].tolist()
    fips = df_sample_r[&#39;FIPS&#39;].tolist()

    colorscale = [
        &#39;rgb(193, 193, 193)&#39;,
        &#39;rgb(239,239,239)&#39;,
        &#39;rgb(195, 196, 222)&#39;,
        &#39;rgb(144,148,194)&#39;,
        &#39;rgb(101,104,168)&#39;,
        &#39;rgb(65, 53, 132)&#39;
    ]

    fig = ff.create_choropleth(
        fips=fips, values=values, colorscale=colorscale,
        scope=[&#39;CA&#39;, &#39;AZ&#39;, &#39;Nevada&#39;, &#39;Oregon&#39;, &#39; Idaho&#39;],
        binning_endpoints=[14348, 63983, 134827, 426762, 2081313],
        county_outline={&#39;color&#39;: &#39;rgb(255,255,255)&#39;, &#39;width&#39;: 0.5},
        legend_title=&#39;California Counties&#39;,
        title=&#39;California and Nearby States&#39;
    )
    py.iplot(fig, filename=&#39;choropleth_california_and_surr_states_outlines&#39;)
    ```

    Example 4: USA
    ```
    import plotly.plotly as py
    import plotly.figure_factory as ff

    import numpy as np
    import pandas as pd

    df_sample = pd.read_csv(
        &#39;https://raw.githubusercontent.com/plotly/datasets/master/laucnty16.csv&#39;
    )
    df_sample[&#39;State FIPS Code&#39;] = df_sample[&#39;State FIPS Code&#39;].apply(
        lambda x: str(x).zfill(2)
    )
    df_sample[&#39;County FIPS Code&#39;] = df_sample[&#39;County FIPS Code&#39;].apply(
        lambda x: str(x).zfill(3)
    )
    df_sample[&#39;FIPS&#39;] = (
        df_sample[&#39;State FIPS Code&#39;] + df_sample[&#39;County FIPS Code&#39;]
    )

    binning_endpoints = list(np.linspace(1, 12, len(colorscale) - 1))
    colorscale = [&#34;#f7fbff&#34;, &#34;#ebf3fb&#34;, &#34;#deebf7&#34;, &#34;#d2e3f3&#34;, &#34;#c6dbef&#34;,
                  &#34;#b3d2e9&#34;, &#34;#9ecae1&#34;, &#34;#85bcdb&#34;, &#34;#6baed6&#34;, &#34;#57a0ce&#34;,
                  &#34;#4292c6&#34;, &#34;#3082be&#34;, &#34;#2171b5&#34;, &#34;#1361a9&#34;, &#34;#08519c&#34;,
                  &#34;#0b4083&#34;,&#34;#08306b&#34;]
    fips = df_sample[&#39;FIPS&#39;]
    values = df_sample[&#39;Unemployment Rate (%)&#39;]
    fig = ff.create_choropleth(
        fips=fips, values=values, scope=[&#39;usa&#39;],
        binning_endpoints=binning_endpoints, colorscale=colorscale,
        show_hover=True, centroid_marker={&#39;opacity&#39;: 0},
        asp=2.9, title=&#39;USA by Unemployment %&#39;,
        legend_title=&#39;Unemployment %&#39;
    )

    py.iplot(fig, filename=&#39;choropleth_full_usa&#39;)
    ```

</pre>
</div>
</div>

</div>
</div>

</div>




				
			</section>
			<!--End Plotly Basics Section-->
			
		</section>
	</div>
</main>

<section class="--help-box">
  <a
    href="https://dash.plot.ly/getting-started
  "
    ><div class="--wrap">
      <div class="--body">
        <img
          height="50%"
          width="50%"
          src="https://s3-us-west-1.amazonaws.com/plotly-tutorials/assets/dash-ad.png"
        />
      </div>
    </div>
  </a>
</section>



<script>

    var array = [];

    $('.tutorial-content :header:not(h6)').each(function (i, e) {
        var item = $(e);
        var itemText = item.text();
        var hash = itemText.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-').replace(/^-+|-+$/g, '').toLowerCase();
        item.attr("id", hash);
        array.push({text: itemText, tag: item.prop("tagName"), hash: hash});
    });

    $(".--sidebar-list").html(array.map(function(entry) {
        var text = entry.text.replace(/[^a-z0-9\s\.:\-\?\!\(\))]/gi, '');
        if(entry.tag.toLowerCase() < "h4"){
            return('<li class="--sidebar-item"><a href="#' + entry.hash + '">' + text + '</a></li>');
        }
        else {
            return('<li class="--sidebar-item"><a href="#' + entry.hash + '">' + text + '</a></li>');
        }
    }).join(""));


    //$(".tutorial-content :header:not(h6)").append( "\<div class=\"icon copy\" data-tooltip=\"Click to copy direct link\"><svg style=\"width:24px;height:24px\" viewBox=\"0 0 24 24\"><path fill=\"#000000\" d=\"M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z\"/> </svg> </div>");

</script>


<footer class="--footer-main">
        <section class="--footer-top">
            <div class="--wrap">
                <ul class="--footer-body">
                    <li class="--footer-column">
                        <h6 style="color:#e763fa" class="--footer-heading">Products</h6>&#x9;&#x9;&#x9;
                        <ul>
                            <li><a href="https://plot.ly/dash/" target="_self">Dash</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                            <li><a href="https://plot.ly/online-chart-maker/" target="_self">Chart Studio</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                            <li><a href="https://plot.ly/products/oem/" target="_self">Plotly OEM</a></li>
                        </ul>
                    </li>
                    &#x9;&#x9;
                    <li class="--footer-column">
                        <h6 style="color:#636efa" class="--footer-heading">Pricing</h6>&#x9;&#x9;&#x9;
                        <ul>
                            <li><a href="https://go.plot.ly/get-pricing" target="_self">Enterprise Pricing</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                        </ul>
                    </li>
                    &#x9;&#x9;
                    <li class="--footer-column">
                        <h6 style="color:#00cc96" class="--footer-heading">About Us</h6>&#x9;&#x9;&#x9;
                        <ul>
                            <li><a href="https://plot.ly/company/careers" target="_self">Careers</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                            <li><a href="https://plot.ly/resources/" target="_self">Resources</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                            <li><a href="https://medium.com/@plotlygraphs" target="_self">Blog</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                        </ul>
                    </li>
                    &#x9;&#x9;
                    <li class="--footer-column">
                        <h6 style="color:#EF553B" class="--footer-heading">Support</h6>&#x9;&#x9;&#x9;
                        <ul>
                            <li><a href="https://community.plot.ly/" target="_self">Community Support</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                            <li><a href="https://plot.ly/graphing-libraries" target="_self">Documentation</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                        </ul>
                    </li>
                    &#x9;&#x9;
                    <li class="--footer-column">
                        <h6 style="color:#119dff" class="--footer-heading">JOIN OUR MAILING LIST</h6>&#x9;&#x9;&#x9;
                        <ul>
                            &#x9;&#x9;&#x9;&#x9;
                            <li>
                              <p class="subscribe-text"> Sign up to stay in the loop with all things Plotly  from Dash Club to product updates, webinars, and more!</p>
                              <a 
                                href="https://go.plot.ly/subscription" 
                                class="subscribe-button" 
                                target="_blank">
                                Subscribe
                              </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>
        <section class="--footer-meta">
            <div class="--wrap">
                <div class="left">
                    <article class="--copyright">Copyright &copy; 2019 Plotly. All rights reserved.</article>
                </div>
                <div class="right">
                    <article class="--tos"><a href="https://plot.ly/terms-of-service/" target="_blank">Terms of Service</a>
                    </article>
                    <article class="--privacy"><a href="https://plot.ly/privacy/" target="_blank">Privacy Policy</a>
                    </article>
                </div>
            </div>
        </section>
    </footer>


<!-- Mathjax -->
<script type='text/x-mathjax-config'>MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true}});</script>
<script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML%2CSafe.js&#038;ver=4.1'></script>

 
 <!-- Hash offset Script -->
<script src="/all_static//javascripts/hash_offset.js"></script>
 <!-- Image Hover Script -->
<script src="/all_static/javascripts/imghover.js"></script>
 
<!-- code highlighting -->
<script src="/all_static/javascripts/codehighlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>





</body>

</html>
