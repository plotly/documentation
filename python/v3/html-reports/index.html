<!DOCTYPE html>
<html>

<head>
      <meta charset="utf-8"/>

      <!-- Media query magic - http://stackoverflow.com/questions/19945658/my-iphone-thinks-its-980px-wide -->
      <meta name="viewport" content="width=device-width, initial-scale=1.0">


      
      <!-- code highlighting -->
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script>
      

      <!--
      //// Stylesheets
      -->

      <!-- Fonts -->
      <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic|Ubuntu+Mono:400,700|Asap" rel="stylesheet" type="text/css"/>

      <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

      <!-- Main Stylesheets -->
      <link rel="stylesheet" type="text/css" href="/all_static/css/main.css?version=ff7246c21c">

      <!-- LOCAL DEV STYLESHEET -->
      <!--<link rel="stylesheet" type="text/css" href="http://api.plotly.dev/all_static/css/main.css">-->

      <!-- Icon -->
      <link rel="shortcut icon" href="/all_static/images/plotly-ico.png" type="image/x-icon"/>

      <!-- Google Tags-->
      <!-- Google Tag Manager Tag -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N6T2RXG');</script>

      <script id="drift">
  !(function() {
    var t = (window.driftt = window.drift = window.driftt || []);
    if (!t.init) {
      if (t.invoked)
        return void (
          window.console &&
          console.error &&
          console.error("Drift snippet included twice.")
        );
      (t.invoked = !0),
        (t.methods = [
          "identify",
          "config",
          "track",
          "reset",
          "debug",
          "show",
          "ping",
          "page",
          "hide",
          "off",
          "on"
        ]),
        (t.factory = function(e) {
          return function() {
            var n = Array.prototype.slice.call(arguments);
            return n.unshift(e), t.push(n), t;
          };
        }),
        t.methods.forEach(function(e) {
          t[e] = t.factory(e);
        }),
        (t.load = function(t) {
          var e = 3e5,
            n = Math.ceil(new Date() / e) * e,
            o = document.createElement("script");
          (o.type = "text/javascript"),
            (o.async = !0),
            (o.crossorigin = "anonymous"),
            (o.src = "https://js.driftt.com/include/" + n + "/" + t + ".js");
          var i = document.getElementsByTagName("script")[0];
          i.parentNode.insertBefore(o, i);
        });
    }
  })();
  drift.SNIPPET_VERSION = "0.3.1";
  drift.load("4t5t45cv8ey2");
</script>



    <!-- META TAGS -->
    <!-- SEO Tags - title, meta_description -->
<title>Python HTML Reports | Python/v3 | Plotly  </title>
<meta name="description" content="How to make HTML reports with Python, Pandas, and Plotly Graphs.">

<!-- Bing tags -->
    <meta name="msvalidate.01" content="D319859A832F9F1D15A7646E2A42150A" />
<!-- Facebook tags -->
    <meta property="og:title" content="Python HTML Reports"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://images.plot.ly/plotly-documentation/thumbnail/ipython_10_html_report.jpg">
    <meta property="og:description" content="How to make HTML reports with Python, Pandas, and Plotly Graphs."/>
    <meta property="og:url" />
    <meta property="fb:admins" content="1123751525"/>
    <meta property="fb:admins" content="22418"/>

<!-- twitter tags -->
    <meta name="twitter:card" content="photo" />
    <meta name="twitter:title" content="Python HTML Reports"/>
    <meta name="twitter:url" content="https://plot.ly/python/v3/html-reports/"/>
    <meta name="twitter:description" content="How to make HTML reports with Python, Pandas, and Plotly Graphs."/>
    <meta name="twitter:image" content="https://images.plot.ly/plotly-documentation/thumbnail/ipython_10_html_report.jpg">
    <meta name="twitter:site" content="@plotlygraphs"/>

<!-- Favicon -->
    <link rel="shortcut icon" href="/all_static/images/plotly-ico.png?v=2" />


    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
            integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
            crossorigin="anonymous"></script>


</head>


<body data-spy="scroll" data-target=".watch" style="position:relative;">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N6T2RXG"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->


<!--[if lt IE 10]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
	your browser</a> to improve your experience.</p>
<![endif]-->

<div style="margin-top: 80px"></div>


<header data-spy="affix" data-offset-top="80" class="header-main --default">
    <div class="--wrap">
        <div class="--wrap-left"><a href="https://plot.ly/" target="_blank" class="-identity">
            <div class="-identity">
                <img src="/all_static/images/plotly_graphing_libraries.png" style="height: 66px;"/>
            </div></a>

        </div>
        <div class="--wrap-right">
            <nav class="--nav-meta" role="navigation">
                <ul>
                    <li><a href="https://go.plot.ly/demo_live" data-mode="1" target="_blank" class="typeform-share button --enterprise-quaternary">DEMO DASH</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>


<section class="--breadcrumb-container"  data-spy="affix" >
    <div class="--wrap">
        <!--
            Show this if page is too thin (hides breadcrumb list)
            Toggles sidebar slide in/out (see main.js)
        -->
        <a class="toggle-sidebar">
            <div class="icon">
                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                    <path fill="#000000" d="M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z" />
                </svg>
            </div>
            <span class="show">Show Sidebar</span>
            <span class="hide">Hide Sidebar</span>
        </a>

        <!--
            Breadcrumb List
        -->
        <ul class="--breadcrumb-list">
            <li class="--breadcrumb-item">
                <div class="icon">
                    <svg style="width:24px;height:24px" viewbox="0 0 24 24">
                        <path fill="#000000" d="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"></path>
                    </svg>
                </div>
                <a href="https://help.plot.ly/"><span>Help</span></a>
            </li>
            <li class="--breadcrumb-item"><a href="/graphing-libraries/"><span>Open Source Graphing Libraries</span></a></li>
            
            <li class="--breadcrumb-item">
                <a href="/python/v3"  ><span>Python/v3</span></a>
            </li>
            

            
                
                
                
                <li class="--breadcrumb-item">
                <a href="/python/v3/#report-generation">
                        <span>Report Generation</span>
                </a>
                    </li>

            

            
            
                <li class="--breadcrumb-item">
                    <span>Python HTML Reports</span>
                </li>
            
            

            
        </ul>

        <!--
            Fork on GitHub :)
        -->

     <div class="--fork">
        
        
        <a id="forklink" href= "https://github.com/plotly/documentation/tree/source-design-merge/_posts/python-v3/report-generation/" >
        
                <div class="icon">
                    <svg style="width:24px;height:24px" viewbox="0 0 24 24">
                        <path fill="#000000" d="M2.6,10.59L8.38,4.8L10.07,6.5C9.83,7.35 10.22,8.28 11,8.73V14.27C10.4,14.61 10,15.26 10,16A2,2 0 0,0 12,18A2,2 0 0,0 14,16C14,15.26 13.6,14.61 13,14.27V9.41L15.07,11.5C15,11.65 15,11.82 15,12A2,2 0 0,0 17,14A2,2 0 0,0 19,12A2,2 0 0,0 17,10C16.82,10 16.65,10 16.5,10.07L13.93,7.5C14.19,6.57 13.71,5.55 12.78,5.16C12.35,5 11.9,4.96 11.5,5.07L9.8,3.38L10.59,2.6C11.37,1.81 12.63,1.81 13.41,2.6L21.4,10.59C22.19,11.37 22.19,12.63 21.4,13.41L13.41,21.4C12.63,22.19 11.37,22.19 10.59,21.4L2.6,13.41C1.81,12.63 1.81,11.37 2.6,10.59Z"></path>
                    </svg>
                </div>
                <span>Edit this page on GitHub</span>
            </a>
    </div>
</section>


<main class="--page page--single --index">

	<div class="--wrap">
		<!-- aside - Main Sidebar-->
		<aside class="--sidebar-container">
			<div class="--sidebar-fixed reference" data-spy="affix" id="where">
				<header class="--sidebar-header">Navigation</header>
				<nav class="--sidebar-body watch"   id="where">
          <ul class="--sidebar-list"></ul>
          
					<button class="--btn back">
						<div>
							<img class="--icon-notebook" src="https://plot.ly/gh-pages/documentation/static/images/notebook@2x.png" alt="notebook">
						</div>
						<span><a href="//">Download <b>THIS</b> Notebook!</a></span>
					</button>
					
					
					<button class="--btn back">
						<div class="icon">
							<svg style="width:24px;height:24px" viewBox="0 0 24 24">
								<path fill="#000000"
									  d="M20,10V14H11L14.5,17.5L12.08,19.92L4.16,12L12.08,4.08L14.5,6.5L11,10H20Z"/>
							</svg>
						</div>
						<span><a href="/python/v3/">Back to Python/v3
						</a></span>
					</button>
				</nav>
			</div>
		</aside>
		<!-- Main-->
		<section class="--page-body --tutorial-index --base">
			<header class="--welcome">
				<div class="--welcome-body">
					<!--div.--wrap-inner-->
					<div class="--title">
						<div class="--category-img">




							
							
              
							<img src="https://images.plot.ly/language-icons/api-home/python-logo.png" alt="">
							
							
							
							
							
							
							
							





						</div>
						<div class="--body">

							
							<h1>
								Python HTML Reports
								
								in Python/v3
								
							</h1>
							<p>How to make HTML reports with Python, Pandas, and Plotly Graphs. </p>

							
              	<nav class="lang-nav">
		<ul class="lang-nav--list"></ul>
		</nav>


						</div>
					</div>
				</div>
			</header>

			<!-- Start Plotly Basics Section -->
			<section class="tutorial-content">

				


<div style="margin: 20px auto; width: 75%; background: #f4f4f8; padding: 20px; font-weight: 400;
    line-height: 1.85; text-align: center; border: 5px dashed #ab63fa;">
	<strong>Note:</strong> this page is part of the documentation for version 3 of Plotly.py, which is <em>not the most recent version</em>.<br/>
  See our <a href="https://plot.ly/python/v4-migration/" style="color: #2391fe">Version 4 Migration Guide</a> for information about how to upgrade.</div>









				
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Generate HTML reports with D3 graphs<br>using Python, Plotly, and Pandas</h2>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://www.dropbox.com/s/egoxoekkq5r2avh/report.html?dl=1">Download the example report generated by this script</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="d3.js">d3.js</a> is an amazing JavaScript library for creating interactive, online graphics and charts. Plotly lets you create d3.js charts using Python, R, or MATLAB. This IPython notebook shows you how to embed these charts in an HTML report that you can then share by email or host on a website.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Once you've created your report generation script, you can automate it with a task scheduler like <a href="http://moderndata.plot.ly/update-plotly-charts-with-cron-jobs-and-python/">cron</a> or Windows Task Manager, and  <a href="https://plot.ly/python/email-reports/">email it to yourself and your team</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[153]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">time</span> <span class="k">as</span> <span class="n">dt_tm</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span> <span class="k">as</span> <span class="n">dt_date</span>

<span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">plotly.tools</span> <span class="kn">as</span> <span class="nn">plotly_tools</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="kn">as</span> <span class="nn">go</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MPLCONFIGDIR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
<span class="kn">from</span> <span class="nn">matplotlib.finance</span> <span class="kn">import</span> <span class="n">quotes_historical_yahoo</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">gaussian_kde</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-1:-Generate-2-graphs-and-2-tables">Step 1: Generate 2 graphs and 2 tables<a class="anchor-link" href="#Step-1:-Generate-2-graphs-and-2-tables">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="First-graph:-2014-Apple-stock-data-with-moving-average">First graph: 2014 Apple stock data with moving average<a class="anchor-link" href="#First-graph:-2014-Apple-stock-data-with-moving-average">&#182;</a></h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's grab Apple stock data using the <a href="http://matplotlib.org/api/finance_api.html">matplotlib finance</a> model from 2014, then take a moving average with a <a href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.convolve.html">numpy convolution</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[154]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">ma</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">def</span> <span class="nf">moving_average</span><span class="p">(</span><span class="n">interval</span><span class="p">,</span> <span class="n">window_size</span><span class="p">):</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">window_size</span><span class="p">))</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">window_size</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">interval</span><span class="p">,</span> <span class="n">window</span><span class="p">,</span> <span class="s1">&#39;same&#39;</span><span class="p">)</span>

<span class="n">date1</span> <span class="o">=</span> <span class="n">dt_date</span><span class="p">(</span> <span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">)</span>
<span class="n">date2</span> <span class="o">=</span> <span class="n">dt_date</span><span class="p">(</span> <span class="mi">2014</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span> <span class="p">)</span>
<span class="n">quotes</span> <span class="o">=</span> <span class="n">quotes_historical_yahoo</span><span class="p">(</span><span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="n">date1</span><span class="p">,</span> <span class="n">date2</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">quotes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span> <span class="s2">&quot;Couldn&#39;t connect to yahoo trading database&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">quotes</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">quotes</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">dates</span><span class="p">:</span>
        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">date</span><span class="p">))</span>\
                <span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">))</span> <span class="c1"># Plotly timestamp format</span>
    <span class="n">ma</span> <span class="o">=</span> <span class="n">moving_average</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now graph the data with Plotly. See here for Plotly's <a href="https://plot.ly/python/line-and-scatter/">line plot syntax</a> and here for <a href="https://plot.ly/python/getting-started/">getting started</a> with the Plotly Python client.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[155]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">xy_data</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;AAPL&#39;</span> <span class="p">)</span>
<span class="c1"># vvv clip first and last points of convolution</span>
<span class="n">mov_avg</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">ma</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">],</span> \
                  <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span><span class="n">opacity</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Moving average&#39;</span> <span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">xy_data</span><span class="p">,</span> <span class="n">mov_avg</span><span class="p">]</span>

<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;apple stock moving average&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[155]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;"seamless="seamless" src="https://plot.ly/~jackp/1841.embed" height="525" width="100%"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Save the plot URL - we'll use it when generating the report later.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[157]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">first_plot_url</span> <span class="o">=</span> <span class="n">py</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;apple stock moving average&#39;</span><span class="p">,</span> <span class="n">auto_open</span><span class="o">=</span><span class="bp">False</span><span class="p">,)</span>
<span class="k">print</span> <span class="n">first_plot_url</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>https://plot.ly/~jackp/1841
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="Second-graph:-Scatter-matrix-of-2014-technology-and-CPG-stocks">Second graph: Scatter matrix of 2014 technology and CPG stocks<a class="anchor-link" href="#Second-graph:-Scatter-matrix-of-2014-technology-and-CPG-stocks">&#182;</a></h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's use the Pandas package and Plotly subplots to compare different tech. and CPG stocks in 2014.<br>
This graph was inspired by <a href="http://nbviewer.ipython.org/github/twiecki/financial-analysis-python-tutorial/blob/master/1.%20Pandas%20Basics.ipynb">this IPython notebook</a> and GitHub user <a href="https://github.com/twiecki">twiecki</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">tickers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="s1">&#39;GE&#39;</span><span class="p">,</span> <span class="s1">&#39;IBM&#39;</span><span class="p">,</span> <span class="s1">&#39;KO&#39;</span><span class="p">,</span> <span class="s1">&#39;MSFT&#39;</span><span class="p">,</span> <span class="s1">&#39;PEP&#39;</span><span class="p">]</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">ticker</span> <span class="ow">in</span> <span class="n">tickers</span><span class="p">:</span>
    <span class="n">quotes</span> <span class="o">=</span> <span class="n">quotes_historical_yahoo</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">date1</span><span class="p">,</span> <span class="n">date2</span><span class="p">)</span>
    <span class="n">prices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span><span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">quotes</span><span class="p">]</span> <span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We have all the stock prices in a list of lists - use the code snippet below to convert this into a Pandas dataframe.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span> <span class="n">prices</span> <span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">tickers</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[6]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AAPL</th>
      <th>GE</th>
      <th>IBM</th>
      <th>KO</th>
      <th>MSFT</th>
      <th>PEP</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td> 77.746778</td>
      <td> 26.907695</td>
      <td> 182.770157</td>
      <td> 39.926650</td>
      <td> 36.354938</td>
      <td> 80.626950</td>
    </tr>
    <tr>
      <th>1</th>
      <td> 77.352163</td>
      <td> 26.578632</td>
      <td> 181.429182</td>
      <td> 39.493584</td>
      <td> 36.212300</td>
      <td> 79.843327</td>
    </tr>
    <tr>
      <th>2</th>
      <td> 75.193398</td>
      <td> 26.716354</td>
      <td> 182.712734</td>
      <td> 39.303899</td>
      <td> 35.870869</td>
      <td> 79.922217</td>
    </tr>
    <tr>
      <th>3</th>
      <td> 76.158839</td>
      <td> 26.543525</td>
      <td> 181.968752</td>
      <td> 39.297371</td>
      <td> 35.362131</td>
      <td> 80.323900</td>
    </tr>
    <tr>
      <th>4</th>
      <td> 75.389380</td>
      <td> 26.415215</td>
      <td> 184.837731</td>
      <td> 39.265478</td>
      <td> 35.043624</td>
      <td> 81.017502</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Use Plotly's <a href="https://plot.ly/python/overview/">get_subplots()</a> routine to generate an empty matrix of 6x6 subplots. We'll fill these in by plotting all stock ticker combinations against each other (ie, General Electric stock versus Apple stock)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[122]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plotly_tools</span><span class="o">.</span><span class="n">get_subplots</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">print_grid</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">horizontal_spacing</span><span class="o">=</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">vertical_spacing</span><span class="o">=</span> <span class="mf">0.05</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>This is the format of your plot grid!
[31]	[32]	[33]	[34]	[35]	[36]
[25]	[26]	[27]	[28]	[29]	[30]
[19]	[20]	[21]	[22]	[23]	[24]
[13]	[14]	[15]	[16]	[17]	[18]
[7]	[8]	[9]	[10]	[11]	[12]
[1]	[2]	[3]	[4]	[5]	[6]

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[143]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">def</span> <span class="nf">kde_scipy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x_grid</span><span class="p">,</span> <span class="n">bandwidth</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Kernel Density Estimation with Scipy&quot;&quot;&quot;</span>
    <span class="c1"># From https://jakevdp.github.io/blog/2013/12/01/kernel-density-estimation/</span>
    <span class="c1"># Note that scipy weights its bandwidth by the covariance of the</span>
    <span class="c1"># input data.  To make the results comparable to the other methods,</span>
    <span class="c1"># we divide the bandwidth by the sample standard deviation here.</span>
    <span class="n">kde</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bw_method</span><span class="o">=</span><span class="n">bandwidth</span> <span class="o">/</span> <span class="n">x</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">kde</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">x_grid</span><span class="p">)</span>

<span class="n">subplots</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">37</span><span class="p">)</span>
<span class="n">sp_index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">):</span>
    <span class="n">x_ticker</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">):</span>
        <span class="n">y_ticker</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="n">j</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">x_ticker</span><span class="p">]</span>
            <span class="n">x_grid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="mi">100</span><span class="p">)</span>
            <span class="n">sp</span> <span class="o">=</span> <span class="p">[</span> <span class="n">go</span><span class="o">.</span><span class="n">Histogram</span><span class="p">(</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">histnorm</span><span class="o">=</span><span class="s1">&#39;probability density&#39;</span> <span class="p">),</span> \
                  <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span> <span class="n">x</span><span class="o">=</span><span class="n">x_grid</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">kde_scipy</span><span class="p">(</span> <span class="n">x</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span> <span class="n">x_grid</span> <span class="p">),</span> \
                          <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span><span class="n">opacity</span><span class="o">=</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sp</span> <span class="o">=</span> <span class="p">[</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span> <span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">x_ticker</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">y_ticker</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="p">)</span> <span class="p">]</span>

        <span class="k">for</span> <span class="n">ea</span> <span class="ow">in</span> <span class="n">sp</span><span class="p">:</span>
            <span class="n">ea</span><span class="o">.</span><span class="n">update</span><span class="p">(</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;{0} vs {1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x_ticker</span><span class="p">,</span><span class="n">y_ticker</span><span class="p">),</span>\
                      <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;x{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">subplots</span><span class="p">[</span><span class="n">sp_index</span><span class="p">]),</span>\
                      <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;y{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">subplots</span><span class="p">[</span><span class="n">sp_index</span><span class="p">])</span>
            <span class="p">)</span>
        <span class="n">sp_index</span><span class="o">+=</span><span class="mi">1</span>
        <span class="n">data</span> <span class="o">+=</span> <span class="n">sp</span>

<span class="c1"># Add x and y labels</span>
<span class="n">left_index</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">bottom_index</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">tk</span> <span class="ow">in</span> <span class="n">tickers</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;xaxis{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">left_index</span><span class="p">)]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span> <span class="n">title</span><span class="o">=</span><span class="n">tk</span> <span class="p">)</span>
    <span class="n">fig</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;yaxis{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bottom_index</span><span class="p">)]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span> <span class="n">title</span><span class="o">=</span><span class="n">tk</span> <span class="p">)</span>
    <span class="n">left_index</span><span class="o">=</span><span class="n">left_index</span><span class="o">+</span><span class="mi">1</span>
    <span class="n">bottom_index</span><span class="o">=</span><span class="n">bottom_index</span><span class="o">+</span><span class="mi">6</span>

<span class="c1"># Remove legend by updating &#39;layout&#39; key</span>
<span class="n">fig</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">showlegend</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Major technology and CPG stock prices in 2014&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;Major technology and CPG stock prices in 2014 - scatter matrix&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[143]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;"seamless="seamless" src="https://plot.ly/~jackp/2019.embed?width=975&height=975" height="1000" width="1000"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Save the plot URL - we'll use it when generating the report later.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[145]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">second_plot_url</span> <span class="o">=</span> <span class="n">py</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">auto_open</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>\
                          <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;Major technology and CPG stock prices in 2014 - scatter matrix&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">second_plot_url</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>https://plot.ly/~jackp/2019
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="2-summary-tables:-One-using-Pandas-and-one-using-HTML">2 summary tables: One using Pandas and one using HTML<a class="anchor-link" href="#2-summary-tables:-One-using-Pandas-and-one-using-HTML">&#182;</a></h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First table: Use Pandas <a href="http://pandas.pydata.org/pandas-docs/version/0.15.1/generated/pandas.DataFrame.to_html.html">to_html()</a> routine to convert Pandas data frame to HTML table. Replace default table styling with <a href="http://getbootstrap.com/css">Bootstrap</a> table styling.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[175]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">summary_table_1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="n">summary_table_1</span> <span class="o">=</span> <span class="n">summary_table_1</span>\
    <span class="o">.</span><span class="n">to_html</span><span class="p">()</span>\
    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;&lt;table class=&quot;table table-striped&quot;&gt;&#39;</span><span class="p">)</span> <span class="c1"># use bootstrap styling</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Second table: Build table as an HTML string. Use <a href="http://getbootstrap.com/css">Bootstrap</a> for table styling.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[135]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">summary_table_2</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;&lt;table class=&quot;table table-striped&quot;&gt;</span>
<span class="s1">&lt;th&gt;Ticker&lt;/th&gt;&lt;th&gt;Full name&lt;/th&gt;</span>
<span class="s1">&lt;tr&gt;</span>
<span class="s1">    &lt;td&gt;AAPL&lt;/td&gt;</span>
<span class="s1">    &lt;td&gt;&lt;a href=&quot;http://finance.yahoo.com/q?s=AAPL&quot;&gt;Apple Inc&lt;/a&gt;&lt;/td&gt;</span>
<span class="s1">&lt;/tr&gt;</span>
<span class="s1">&lt;tr&gt;</span>
<span class="s1">    &lt;td&gt;GE&lt;/td&gt;</span>
<span class="s1">    &lt;td&gt;&lt;a href=&quot;http://finance.yahoo.com/q?s=GE&quot;&gt;General Electric Company&lt;/a&gt;&lt;/td&gt;</span>
<span class="s1">&lt;/tr&gt;</span>
<span class="s1">&lt;tr&gt;</span>
<span class="s1">    &lt;td&gt;IBM&lt;/td&gt;</span>
<span class="s1">    &lt;td&gt;&lt;a href=&quot;http://finance.yahoo.com/q?s=IBM&quot;&gt;International Business Machines Corp.&lt;/a&gt;&lt;/td&gt;</span>
<span class="s1">&lt;/tr&gt;</span>
<span class="s1">&lt;tr&gt;</span>
<span class="s1">    &lt;td&gt;KO&lt;/td&gt;</span>
<span class="s1">    &lt;td&gt;&lt;a href=&quot;http://finance.yahoo.com/q?s=KO&quot;&gt;The Coca-Cola Company&lt;/a&gt;&lt;/td&gt;</span>
<span class="s1">&lt;/tr&gt;</span>
<span class="s1">&lt;tr&gt;</span>
<span class="s1">    &lt;td&gt;MSFT&lt;/td&gt;</span>
<span class="s1">    &lt;td&gt;&lt;a href=&quot;http://finance.yahoo.com/q?s=MSFT&quot;&gt;Microsoft Corporation&lt;/a&gt;&lt;/td&gt;</span>
<span class="s1">&lt;/tr&gt;</span>
<span class="s1">&lt;tr&gt;</span>
<span class="s1">    &lt;td&gt;PEP&lt;/td&gt;</span>
<span class="s1">    &lt;td&gt;&lt;a href=&quot;http://finance.yahoo.com/q?s=PEP&quot;&gt;Pepsico, Inc.&lt;/a&gt;&lt;/td&gt;</span>
<span class="s1">&lt;/tr&gt;</span>
<span class="s1">&lt;/table&gt;</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="n">summary_table_2</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[135]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table class="table table-striped">
<th>Ticker</th><th>Full name</th>
<tr>
    <td>AAPL</td>
    <td><a href="http://finance.yahoo.com/q?s=AAPL">Apple Inc</a></td>
</tr>
<tr>
    <td>GE</td>
    <td><a href="http://finance.yahoo.com/q?s=GE">General Electric Company</a></td>
</tr>
<tr>
    <td>IBM</td>
    <td><a href="http://finance.yahoo.com/q?s=IBM">International Business Machines Corp.</a></td>
</tr>
<tr>
    <td>KO</td>
    <td><a href="http://finance.yahoo.com/q?s=KO">The Coca-Cola Company</a></td>
</tr>
<tr>
    <td>MSFT</td>
    <td><a href="http://finance.yahoo.com/q?s=MSFT">Microsoft Corporation</a></td>
</tr>
<tr>
    <td>PEP</td>
    <td><a href="http://finance.yahoo.com/q?s=PEP">Pepsico, Inc.</a></td>
</tr>
</table>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>Step 2: Generate HTML report<br>as a string and write to file</h3>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is the last step. We have all of the plots and tables that we want to include in the report - now we build an HTML string with the plots and tables embedded.<br>Notice that the <a href="http://getbootstrap.com/css">Bootstrap</a> css library is included in the &lt;head&gt; for styling.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[184]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">html_string</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">&lt;html&gt;</span>
<span class="s1">    &lt;head&gt;</span>
<span class="s1">        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css&quot;&gt;</span>
<span class="s1">        &lt;style&gt;body{ margin:0 100; background:whitesmoke; }&lt;/style&gt;</span>
<span class="s1">    &lt;/head&gt;</span>
<span class="s1">    &lt;body&gt;</span>
<span class="s1">        &lt;h1&gt;2014 technology and CPG stock prices&lt;/h1&gt;</span>

<span class="s1">        &lt;!-- *** Section 1 *** ---&gt;</span>
<span class="s1">        &lt;h2&gt;Section 1: Apple Inc. (AAPL) stock in 2014&lt;/h2&gt;</span>
<span class="s1">        &lt;iframe width=&quot;1000&quot; height=&quot;550&quot; frameborder=&quot;0&quot; seamless=&quot;seamless&quot; scrolling=&quot;no&quot; </span><span class="se">\</span>
<span class="s1">src=&quot;&#39;&#39;&#39;</span> <span class="o">+</span> <span class="n">first_plot_url</span> <span class="o">+</span> <span class="s1">&#39;&#39;&#39;.embed?width=800&amp;height=550&quot;&gt;&lt;/iframe&gt;</span>
<span class="s1">        &lt;p&gt;Apple stock price rose steadily through 2014.&lt;/p&gt;</span>
<span class="s1">        </span>
<span class="s1">        &lt;!-- *** Section 2 *** ---&gt;</span>
<span class="s1">        &lt;h2&gt;Section 2: AAPL compared to other 2014 stocks&lt;/h2&gt;</span>
<span class="s1">        &lt;iframe width=&quot;1000&quot; height=&quot;1000&quot; frameborder=&quot;0&quot; seamless=&quot;seamless&quot; scrolling=&quot;no&quot; </span><span class="se">\</span>
<span class="s1">src=&quot;&#39;&#39;&#39;</span> <span class="o">+</span> <span class="n">second_plot_url</span> <span class="o">+</span> <span class="s1">&#39;&#39;&#39;.embed?width=1000&amp;height=1000&quot;&gt;&lt;/iframe&gt;</span>
<span class="s1">        &lt;p&gt;GE had the most predictable stock price in 2014. IBM had the highest mean stock price. </span><span class="se">\</span>
<span class="s1">The red lines are kernel density estimations of each stock price - the peak of each red lines </span><span class="se">\</span>
<span class="s1">corresponds to its mean stock price for 2014 on the x axis.&lt;/p&gt;</span>
<span class="s1">        &lt;h3&gt;Reference table: stock tickers&lt;/h3&gt;</span>
<span class="s1">        &#39;&#39;&#39;</span> <span class="o">+</span> <span class="n">summary_table_2</span> <span class="o">+</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        &lt;h3&gt;Summary table: 2014 stock statistics&lt;/h3&gt;</span>
<span class="s1">        &#39;&#39;&#39;</span> <span class="o">+</span> <span class="n">summary_table_1</span> <span class="o">+</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    &lt;/body&gt;</span>
<span class="s1">&lt;/html&gt;&#39;&#39;&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, write the html string to a local file.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[185]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/home/jack/report.html&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html_string</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>




				
			</section>
			<!--End Plotly Basics Section-->
			
		</section>
	</div>
</main>

<section class="--help-box">
  <a
    href="https://dash.plot.ly/getting-started
  "
    ><div class="--wrap">
      <div class="--body">
        <img
          height="50%"
          width="50%"
          src="https://s3-us-west-1.amazonaws.com/plotly-tutorials/assets/dash-ad.png"
        />
      </div>
    </div>
  </a>
</section>



<script>

    var array = [];

    $('.tutorial-content :header:not(h6)').each(function (i, e) {
        var item = $(e);
        var itemText = item.text();
        var hash = itemText.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-').replace(/^-+|-+$/g, '').toLowerCase();
        item.attr("id", hash);
        array.push({text: itemText, tag: item.prop("tagName"), hash: hash});
    });

    $(".--sidebar-list").html(array.map(function(entry) {
        var text = entry.text.replace(/[^a-z0-9\s\.:\-\?\!\(\))]/gi, '');
        if(entry.tag.toLowerCase() < "h4"){
            return('<li class="--sidebar-item"><a href="#' + entry.hash + '">' + text + '</a></li>');
        }
        else {
            return('<li class="--sidebar-item"><a href="#' + entry.hash + '">' + text + '</a></li>');
        }
    }).join(""));


    //$(".tutorial-content :header:not(h6)").append( "\<div class=\"icon copy\" data-tooltip=\"Click to copy direct link\"><svg style=\"width:24px;height:24px\" viewBox=\"0 0 24 24\"><path fill=\"#000000\" d=\"M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z\"/> </svg> </div>");

</script>


<footer class="--footer-main">
        <section class="--footer-top">
            <div class="--wrap">
                <ul class="--footer-body">
                    <li class="--footer-column">
                        <h6 style="color:#e763fa" class="--footer-heading">Products</h6>&#x9;&#x9;&#x9;
                        <ul>
                            <li><a href="https://plot.ly/dash/" target="_self">Dash</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                            <li><a href="https://plot.ly/online-chart-maker/" target="_self">Chart Studio</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                            <li><a href="https://plot.ly/products/oem/" target="_self">Plotly OEM</a></li>
                        </ul>
                    </li>
                    &#x9;&#x9;
                    <li class="--footer-column">
                        <h6 style="color:#636efa" class="--footer-heading">Pricing</h6>&#x9;&#x9;&#x9;
                        <ul>
                            <li><a href="https://go.plot.ly/get-pricing" target="_self">Enterprise Pricing</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                        </ul>
                    </li>
                    &#x9;&#x9;
                    <li class="--footer-column">
                        <h6 style="color:#00cc96" class="--footer-heading">About Us</h6>&#x9;&#x9;&#x9;
                        <ul>
                            <li><a href="https://plot.ly/company/careers" target="_self">Careers</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                            <li><a href="https://plot.ly/resources/" target="_self">Resources</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                            <li><a href="https://medium.com/@plotlygraphs" target="_self">Blog</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                        </ul>
                    </li>
                    &#x9;&#x9;
                    <li class="--footer-column">
                        <h6 style="color:#EF553B" class="--footer-heading">Support</h6>&#x9;&#x9;&#x9;
                        <ul>
                            <li><a href="https://community.plot.ly/" target="_self">Community Support</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                            <li><a href="https://plot.ly/graphing-libraries" target="_self">Documentation</a></li>
                            &#x9;&#x9;&#x9;&#x9;
                        </ul>
                    </li>
                    &#x9;&#x9;
                    <li class="--footer-column">
                        <h6 style="color:#119dff" class="--footer-heading">JOIN OUR MAILING LIST</h6>&#x9;&#x9;&#x9;
                        <ul>
                            &#x9;&#x9;&#x9;&#x9;
                            <li>
                              <p class="subscribe-text"> Sign up to stay in the loop with all things Plotly  from Dash Club to product updates, webinars, and more!</p>
                              <a 
                                href="https://go.plot.ly/subscription" 
                                class="subscribe-button" 
                                target="_blank">
                                Subscribe
                              </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>
        <section class="--footer-meta">
            <div class="--wrap">
                <div class="left">
                    <article class="--copyright">Copyright &copy; 2019 Plotly. All rights reserved.</article>
                </div>
                <div class="right">
                    <article class="--tos"><a href="https://plot.ly/terms-of-service/" target="_blank">Terms of Service</a>
                    </article>
                    <article class="--privacy"><a href="https://plot.ly/privacy/" target="_blank">Privacy Policy</a>
                    </article>
                </div>
            </div>
        </section>
    </footer>


<!-- Mathjax -->
<script type='text/x-mathjax-config'>MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true}});</script>
<script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML%2CSafe.js&#038;ver=4.1'></script>

 
 <!-- Hash offset Script -->
<script src="/all_static//javascripts/hash_offset.js"></script>
 <!-- Image Hover Script -->
<script src="/all_static/javascripts/imghover.js"></script>
 
<!-- code highlighting -->
<script src="/all_static/javascripts/codehighlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>





</body>

</html>
