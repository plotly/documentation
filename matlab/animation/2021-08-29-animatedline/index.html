<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name=”description” content=”Learn how to make 6 animatedline charts in MATLAB, then publish them to the Web with Plotly.">
    <title>MATLAB animatedline</title>
    <link rel="stylesheet" 
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" 
          crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" 
          integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
          crossorigin="anonymous">
    </script>
    <style>
      .mcode { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; padding: 10px; }
    </style>
  </head>
  <body>                                                           
    <div class="container" style="position:relative;">
      <a href="https://github.com/plotly/graphing-library-docs/edit/master/_posts/matlab/1A-plot-types/animation/2021-08-29-animatedline.md"
         style="position:absolute; top:8px; right: 30px;">                              
        <button type="button" class="btn btn-outline-dark btn-sm">Improve this page</button>
      </a>                          
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/matlab">All MATLAB® Plot Types</a></li>
        <li class="breadcrumb-item active"><a href="/matlab/animation/2021-08-29-animatedline/"><code>animatedline</code></a></li>
      </ol>
      <h1>MATLAB - <code>animatedline</code></h1>
      <section>
        <h2>Display Line Animation</h2>

<blockquote>
<p>Create the initial animated line object. Then, use a loop to add 1,000 points to the line. After adding each new point, use <code>drawnow</code> to display the new point on the screen.</p>
</blockquote>

<pre class="mcode">
  h = animatedline;
axis([0,4*pi,-1,1])

x = linspace(0,4*pi,1000);
y = sin(x);
for k = 1:length(x)
    addpoints(h,x(k),y(k));
    drawnow
end

fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-4851435" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-4972121" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-4851435" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/977.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-4972121" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_0_0_display_line_animation_invalid_0.0017_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_0_0_display_line_animation_invalid_0.0017_montage.png">
  </div>
</div>

<blockquote>
<p>For faster rendering, add more than one point to the line each time through the loop or use <code>drawnow limitrate</code>.</p>

<p>Query the points of the line.</p>
</blockquote>

<pre class="mcode">
  [xdata,ydata] = getpoints(h);

fig2plotly()
</pre>

<blockquote>
<p>Clear the points from the line.</p>
</blockquote>

<pre class="mcode">
  clearpoints(h)
drawnow

fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-5278509" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-5334912" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-5278509" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/977.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-5334912" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_0_2_display_line_animation_invalid_0.0017_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_0_2_display_line_animation_invalid_0.0017_montage.png">
  </div>
</div>

<!--------------------- EXAMPLE BREAK ------------------------->

<h2>Specify Animated Line Color</h2>

<blockquote>
<p>Set the color of the animated line to red and set its line width to 3 points.</p>
</blockquote>

<pre>
  x = [1 2];
y = [1 2];
h = animatedline(x,y,<span style='color:#A020F0'>'Color'</span>,<span style='color:#A020F0'>'r'</span>,<span style='color:#A020F0'>'LineWidth'</span>,3);
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-5548881" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-5599843" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-5548881" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/977.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-5599843" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_1_0_specify_animated_line_color_invalid_0.0019_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_1_0_specify_animated_line_color_invalid_0.0019_montage.png">
  </div>
</div>

<!--------------------- EXAMPLE BREAK ------------------------->

<h2>Set Maximum Number of Points</h2>

<blockquote>
<p>Limit the number of points in the animated line to 100. Use a loop to add one point to the line at a time. When the line contains 100 points, adding a new point to the line deletes the oldest point.</p>
</blockquote>

<pre class="mcode">
  h = animatedline(<span style='color:#A020F0'>'MaximumNumPoints'</span>,100);
axis([0,4*pi,-1,1])

x = linspace(0,4*pi,1000);
y = sin(x);
for k = 1:length(x)
    addpoints(h,x(k),y(k));
    drawnow
end

fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-5816810" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-5870623" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-5816810" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/977.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-5870623" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_2_0_set_maximum_number_of_points_invalid_0.0017_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_2_0_set_maximum_number_of_points_invalid_0.0017_montage.png">
  </div>
</div>

<!--------------------- EXAMPLE BREAK ------------------------->

<h2>Add Points in Sets for Fast Animation</h2>

<blockquote>
<p>Use a loop to add 100,000 points to an animated line. Since the number of points is large, adding one point to the line each time through the loop might be slow. Instead, add 100 points to the line each time through the loop for a faster animation.</p>
</blockquote>

<pre class="mcode">
  h = animatedline;
axis([0,4*pi,-1,1])

numpoints = 100000;
x = linspace(0,4*pi,numpoints);
y = sin(x);
for k = 1:100:numpoints-99
    xvec = x(k:k+99);
    yvec = y(k:k+99);
    addpoints(h,xvec,yvec)
    drawnow
end

fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-6072717" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-6124841" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-6072717" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/977.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-6124841" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_3_0_add_points_in_sets_for_fast_animation_invalid_0.0017_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_3_0_add_points_in_sets_for_fast_animation_invalid_0.0017_montage.png">
  </div>
</div>

<blockquote>
<p>Another technique for creating faster animations is to use <code>drawnow limitrate</code> instead of <code>drawnow</code>.</p>
</blockquote>

<!--------------------- EXAMPLE BREAK ------------------------->

<h2>Use drawnow limitrate for Fast Animation</h2>

<blockquote>
<p>Use a loop to add 100,000 points to an animated line. Since the number of points is large, using <code>drawnow</code> to display the changes might be slow. Instead, use <code>drawnow limitrate</code> for a faster animation.</p>
</blockquote>

<pre class="mcode">
  h = animatedline;
axis([0,4*pi,-1,1])

numpoints = 100000;
x = linspace(0,4*pi,numpoints);
y = sin(x);
for k = 1:numpoints
    addpoints(h,x(k),y(k))
    drawnow limitrate
end

fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-6352045" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-6426850" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-6352045" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/977.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-6426850" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_4_0_use_drawnow_limitrate_for_fast_animation_invalid_0.0017_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_4_0_use_drawnow_limitrate_for_fast_animation_invalid_0.0017_montage.png">
  </div>
</div>

<!--------------------- EXAMPLE BREAK ------------------------->

<h2>Control Animation Speed</h2>

<blockquote>
<p>Control the animation speed by running through several iterations of the animation loop before drawing the updates on the screen. Use this technique when <code>drawnow</code> is too slow and <code>drawnow limitrate</code> is too fast.</p>

<p>For example, update the screen every 1/30 seconds. Use the <code>tic</code> and <code>toc</code> commands to keep track of how much time passes between screen updates.</p>
</blockquote>

<pre class="mcode">
  h = animatedline;
axis([0,4*pi,-1,1])
numpoints = 10000;
x = linspace(0,4*pi,numpoints);
y = sin(x);
a = tic; % start timer
for k = 1:numpoints
    addpoints(h,x(k),y(k))
    b = toc(a); % check timer
    if b > (1/30)
        drawnow % update screen every 1/30 seconds
        a = tic; % reset timer after updating
    end
end
drawnow % draw final frame

fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-6667502" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-6720954" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-6667502" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/977.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-6720954" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_5_0_control_animation_speed_invalid_0.0017_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/code-examples/animation/animatedline/plot_5_0_control_animation_speed_invalid_0.0017_montage.png">
  </div>
</div>

<blockquote>
<p>A smaller interval updates the screen more often and results in a slower animation. For example, use <code>b &gt; (1/1000)</code> to slow down the animation.</p>
</blockquote>

<!--------------------- EXAMPLE BREAK ------------------------->

      </section>
      <footer>
        MATLAB® is a registered trademark of The MathWorks, Inc. Source material for this webpage is periodically updated from https://mathworks.com/help/matlab/ref/animatedline.html.
      </footer>
    </div>  
  </body>
</html>
