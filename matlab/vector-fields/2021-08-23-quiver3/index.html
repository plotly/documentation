<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name=”description” content=”Learn how to make 6 quiver3 charts in MATLAB, then publish them to the Web with Plotly.">
    <title>MATLAB quiver3</title>
    <link rel="stylesheet" 
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" 
          crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" 
          integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
          crossorigin="anonymous">
    </script>
    <style>
      .mcode { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; padding: 10px; }
    </style>
  </head>
  <body>                                                           
    <div class="container" style="position:relative;">
      <a href="https://github.com/plotly/graphing-library-docs/edit/master/_posts/matlab/1A-plot-types/vector-fields/quiver3.md"
         style="position:absolute; top:8px; right: 30px;">                              
        <button type="button" class="btn btn-outline-dark btn-sm">Improve this page</button>
      </a>                          
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/matlab">All MATLAB® Plot Types</a></li>
        <li class="breadcrumb-item active"><a href="/matlab/vector-fields/2021-08-23-quiver3/"><code>quiver3</code></a></li>
      </ol>
      <h1>MATLAB - <code>quiver3</code></h1>
      <section>
        <h2>Create 3-D Quiver Plot</h2>

<blockquote>
<p>Load sample data that represents air currents over North America. For this example, select a subset of the data.</p>
</blockquote>

<pre class="mcode">
  load wind
X = x(5:10,20:25,6:10);
Y = y(5:10,20:25,6:10);
Z = z(5:10,20:25,6:10);
U = u(5:10,20:25,6:10);
V = v(5:10,20:25,6:10);
W = w(5:10,20:25,6:10);
</pre>

<blockquote>
<p>Create a 3-D quiver plot of the subset you selected. The vectors <code>X</code>, <code>Y</code>, and <code>Z</code> represent the location of the base of each arrow, and <code>U</code>, <code>V</code>, and <code>W</code> represent the directional components of each arrow. By default, the <code>quiver3</code> function shortens the arrows so they do not overlap. Call <code>axis equal</code> to use equal data unit lengths along each axis. This makes the arrows point in the correct direction.</p>
</blockquote>

<pre class="mcode">
  quiver3(X,Y,Z,U,V,W)
axis equal
fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-6743726" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-6800035" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-6743726" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/918.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-6800035" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_0_0_create_3_d_quiver_plot_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_0_0_create_3_d_quiver_plot_montage.png">
  </div>
</div>

<!--------------------- EXAMPLE BREAK ------------------------->

<h2>Disable Automatic Scaling</h2>

<blockquote>
<p>By default, the <code>quiver3</code> function shortens arrows so they do not overlap. To disable automatic scaling so that arrow lengths are determined entirely by <code>U</code>, <code>V</code>, and <code>W</code>, set the <code>scale</code> argument to <code>0</code>.</p>

<p>For example, first return the <em>x</em>-,  <em>y</em>-, and <em>z</em>-coordinates of a unit sphere with 10-by-10 faces. Calculate the directional components of its surface normals using the <code>surfnorm</code> function. Then, create a 3-D quiver plot with no automatic scaling.</p>
</blockquote>

<pre class="mcode">
  [X,Y,Z] = sphere(10);
[U,V,W] = surfnorm(X,Y,Z);
quiver3(X,Y,Z,U,V,W,0)
axis equal
fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-6949675" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-6978892" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-6949675" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/920.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-6978892" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_1_0_disable_automatic_scaling_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_1_0_disable_automatic_scaling_montage.png">
  </div>
</div>

<blockquote>
<p>For comparison, create the plot with automatic scaling. Note that the arrows are shorter and do not overlap.</p>
</blockquote>

<pre class="mcode">
  figure
quiver3(X,Y,Z,U,V,W)
axis equal
fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-7086432" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-7149396" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-7086432" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/922.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-7149396" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_1_1_disable_automatic_scaling_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_1_1_disable_automatic_scaling_montage.png">
  </div>
</div>

<!--------------------- EXAMPLE BREAK ------------------------->

<h2>Plot Vectors Normal to Surface</h2>

<blockquote>
<p>Plot vectors that are normal to the surface defined by the function z=xe-x2-y2. Use the <code>quiver3</code> function to plot the vectors and the <code>surf</code> function to plot the surface.</p>

<p>First, create a grid of <em>x-</em> and <em>y-</em>values that are equally spaced. Use them to calculate <em>z</em>. Then, find the normal vectors.</p>
</blockquote>

<pre class="mcode">
  [X,Y] = meshgrid(-2:0.25:2,-1:0.2:1);
Z = X.*exp(-X.^2 - Y.^2);
[U,V,W] = surfnorm(X,Y,Z);
fig2plotly()
</pre>

<blockquote>
<p>Display the vectors as a 3-D quiver plot. Then, display the surface in the same axes. Adjust the display so that the vectors appear normal to the surface by calling <code>axis equal</code>.</p>
</blockquote>

<pre class="mcode">
  quiver3(X,Y,Z,U,V,W)
hold on
surf(X,Y,Z)
axis equal
fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-7275423" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-7304475" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-7275423" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/926.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-7304475" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_2_1_plot_vectors_normal_to_surface_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_2_1_plot_vectors_normal_to_surface_montage.png">
  </div>
</div>

<!--------------------- EXAMPLE BREAK ------------------------->

<h2>Specify Arrow Color</h2>

<blockquote>
<p>Create a 3-D quiver plot and specify a color for the arrows.</p>

<p>For example, first return the <em>x</em>-, <em>y</em>-, and <em>z</em>- coordinates of a surface. Calculate the directional components of its surface normals using the <code>surfnorm</code> function. </p>
</blockquote>

<pre class="mcode">
  [X,Y] = meshgrid(-pi/2:pi/8:pi/2,-pi/2:pi/8:pi/2);
Z = sin(X) + cos(Y);
[U,V,W] = surfnorm(Z);
</pre>

<blockquote>
<p>Then, create a 3-D quiver plot with red arrows.</p>
</blockquote>

<pre class="mcode">
  quiver3(X,Y,Z,U,V,W,'r')
axis equal
fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-7407863" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-7474975" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-7407863" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/928.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-7474975" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_3_0_specify_arrow_color_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_3_0_specify_arrow_color_montage.png">
  </div>
</div>

<!--------------------- EXAMPLE BREAK ------------------------->

<h2>Specify Axes for 3-D Quiver Plot</h2>

<blockquote>
<p>Starting in R2019b, you can display a tiling of plots using the <code>tiledlayout</code> and <code>nexttile</code> functions. Call the <code>tiledlayout</code> function to create a 1-by-2 tiled chart layout. Call the <code>nexttile</code> function to create an axes object and return the object as <code>ax1</code>. Create the left plot by passing <code>ax1</code> to the <code>quiver3</code> function. Add a title to the plot by passing the axes to the <code>title</code> function. Repeat the process to create the right plot.</p>
</blockquote>

<pre class="mcode">
  [X,Y] = meshgrid(-2:0.25:0,-2:0.25:0);
Z1 = -0.5*(X.^2 + Y.^2);
[U1,V1,W1] = surfnorm(Z1);
Z2 = -X.*Y;
[U2,V2,W2] = surfnorm(Z2);

tiledlayout(1,2)

% Left plot
ax1 = nexttile;
quiver3(ax1,X,Y,Z1,U1,V1,W1)
axis equal
title(ax1,'Left Plot')

% Right plot
ax2 = nexttile;
quiver3(ax2,X,Y,Z2,U2,V2,W2)
axis equal
title(ax2,'Right Plot')
fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-7622232" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-7651980" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-7622232" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/930.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-7651980" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_4_0_specify_axes_for_3_d_quiver_plot_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_4_0_specify_axes_for_3_d_quiver_plot_montage.png">
  </div>
</div>

<!--------------------- EXAMPLE BREAK ------------------------->

<h2>Modify 3-D Quiver Plot After Creation</h2>

<blockquote>
<p>Create a 3-D quiver plot and return the quiver object. Then, remove the arrowheads and add dot markers at the base of each arrow.</p>
</blockquote>

<pre class="mcode">
  [X,Y] = meshgrid(-3:0.5:3,-3:0.5:3);
Z = 0.2*(Y.^2 - X.^2);
[U,V,W] = surfnorm(Z);

q = quiver3(X,Y,Z,U,V,W);
axis equal
q.ShowArrowHead = 'off';
q.Marker = '.';
fig2plotly()
</pre>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="plot-tab" data-bs-toggle="tab" data-bs-target="#plot-7761322" type="button" role="tab" aria-controls="plot" aria-selected="true">Plot</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="ssim-tab" data-bs-toggle="tab" data-bs-target="#ssim-7788718" type="button" role="tab" aria-controls="ssim" aria-selected="false">SSIM</button>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="plot-7761322" role="tabpanel" aria-labelledby="plot-tab">
    <iframe 
      scrolling="no" 
      margin="none" 
      padding="none" 
      seamless=seamless 
      height="650" 
      frameBorder="0"
      style="border:0"
      src="https://chart-studio.plotly.com/~danton267/932.embed" 
      width="800">
    </iframe>    
  </div>
  <div class="tab-pane fade" id="ssim-7788718" role="tabpanel" aria-labelledby="ssim-tab">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_5_0_modify_3_d_quiver_plot_after_creation_ssim_map.png">
    <img src="https://raw.githubusercontent.com/plotly/ssim_baselines/main/out_matlab/matlab/vector-fields/quiver3/plot_5_0_modify_3_d_quiver_plot_after_creation_montage.png">
  </div>
</div>

<!--------------------- EXAMPLE BREAK ------------------------->

      </section>
      <footer>
        MATLAB® is a registered trademark of The MathWorks, Inc. Source material for this webpage is periodically updated from https://mathworks.com/help/matlab/ref/quiver3.html.
      </footer>
    </div>  
  </body>
</html>
