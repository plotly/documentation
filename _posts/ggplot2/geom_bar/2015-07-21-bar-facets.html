---
name: <code>geom_bar</code> with <code>facet_grid</code>
plot_url: https://plot.ly/~MattSundquist/17714/_1-1-2-2-3-3-4-4-5-5-6-6/
language: ggplot2
suite: bar
description: Inspired by <a href="http://stackoverflow.com/questions/12236160/ggplot-sum-percentages-for-each-facet-respect-fill">Stack Overflow</a>.
order: 13
sitemap: false
---
# Learn about API authentication here: https://plot.ly/ggplot2/getting-started
# Find your api_key here: https://plot.ly/settings/api

library(plotly)

test <- data.frame(
     test1 = sample(letters[1:2], 100, replace = TRUE),
     test2 = sample(letters[3:8], 100, replace = TRUE)
 )

ggplot(test, aes(x= test2, group = test1)) +
  geom_bar(aes(y = ..density.., fill = factor(..x..))) +
  facet_grid(~test1) +
  scale_fill_brewer(name = 'test2', breaks = 1:6, labels = levels(test$test2), palette = 'Set3')

ggplotly()
