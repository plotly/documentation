---
name: <code>stat_smooth</code> with <code>facet_grid</code>
plot_url: https://plot.ly/~MattSundquist/17156
language: ggplot2
suite: stat
description: Write feedback@plot.ly with questions or  <a href="https://github.com/ropensci/plotly/issues">submit an issue</a>. See the <a href="http://ropensci.github.io/plotly-test-table/tables/0e3d5ca144d27d8416318824c1b6ec1421a51045/index.html">ggplot2 â†’ plotly test tables</a> for ggplot2 conversion coverage. This example was inspired by <a href="http://stackoverflow.com/questions/12572035/adding-a-regression-line-to-a-facet-grid-with-qplot-in-r">Stack Overflow</a>.
order: 1
sitemap: false
---
# Learn about API authentication here: https://plot.ly/ggplot2/getting-started
# Find your api_key here: https://plot.ly/settings/api

library(plotly)

x <- rnorm(100)
y <-  + .7*x + rnorm(100)
f1 <- as.factor(c(rep("A",50),rep("B",50)))
f2 <- as.factor(rep(c(rep("C",25),rep("D",25)),2))
df <- data.frame(cbind(x,y))
df$f1 <- f1
df$f2 <- f2

ggplot(df,aes(x=x,y=y)) +
    geom_point() +
    facet_grid(f1~f2) +
    stat_smooth(method="lm")

ggplotly()
