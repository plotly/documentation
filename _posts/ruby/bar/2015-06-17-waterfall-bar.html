---
name: Waterfall Bar Chart
plot_url: https://plot.ly/~neda/2991/annual-profit-2015/
language: ruby
suite: bar
order: 16
sitemap: false
---

# Learn about API authentication here: https://plot.ly/ruby/getting-started
# Find your api_key here: https://plot.ly/settings/api

data = [{   marker: {   color: 'rgba(1,1,1, 0.0)'}, name: 'trace0', type: 'bar', x: ['Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'], y: [0, 430, 0, 570, 370, 370, 0]}, {   marker: {   color: 'rgba(55, 128, 191, 0.7)', line: {   color: 'rgba(55, 128, 191, 1.0)', width: 2}}, name: 'trace1', type: 'bar', x: ['Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'], y: [430, 260, 690, 0, 0, 0, 0]}, {   marker: {   color: 'rgba(219, 64, 82, 0.7)', line: {   color: 'rgba(219, 64, 82, 1.0)', width: 2}}, name: 'trace2', type: 'bar', x: ['Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'], y: [0, 0, 0, 120, 200, 320, 0]}, {   marker: {   color: 'rgba(50, 171, 96, 0.7)', line: {   color: 'rgba(50, 171, 96, 1.0)', width: 2}}, name: 'trace3', type: 'bar', x: ['Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'], y: [0, 0, 0, 0, 0, 0, 370]}]

args = {   filename: '2015-06-17-waterfall-bar.html',
    fileopt: 'overwrite',
    layout: {   annotations: [   {   font: {   color: 'rgba(245, 246, 249, 1)',
                                                        family: 'Arial',
                                                        size: 14},
                                           showarrow: false,
                                           text: '$430K',
                                           x: 'Product</br>Revenue',
                                           y: 400},
                                       {   font: {   color: 'rgba(245, 246, 249, 1)',
                                                        family: 'Arial',
                                                        size: 14},
                                           showarrow: false,
                                           text: '$260K',
                                           x: 'Services</br>Revenue',
                                           y: 660},
                                       {   font: {   color: 'rgba(245, 246, 249, 1)',
                                                        family: 'Arial',
                                                        size: 14},
                                           showarrow: false,
                                           text: '$690K',
                                           x: 'Total</br>Revenue',
                                           y: 660},
                                       {   font: {   color: 'rgba(245, 246, 249, 1)',
                                                        family: 'Arial',
                                                        size: 14},
                                           showarrow: false,
                                           text: '$-120K',
                                           x: 'Fixed</br>Costs',
                                           y: 590},
                                       {   font: {   color: 'rgba(245, 246, 249, 1)',
                                                        family: 'Arial',
                                                        size: 14},
                                           showarrow: false,
                                           text: '$-200K',
                                           x: 'Variable</br>Costs',
                                           y: 400},
                                       {   font: {   color: 'rgba(245, 246, 249, 1)',
                                                        family: 'Arial',
                                                        size: 14},
                                           showarrow: false,
                                           text: '$-320K',
                                           x: 'Total</br>Costs',
                                           y: 400},
                                       {   font: {   color: 'rgba(245, 246, 249, 1)',
                                                        family: 'Arial',
                                                        size: 14},
                                           showarrow: false,
                                           text: '$370K',
                                           x: 'Total',
                                           y: 340}],
                   barmode: 'stack',
                   height: 600,
                   paper_bgcolor: 'rgba(245, 246, 249, 1)',
                   plot_bgcolor: 'rgba(245, 246, 249, 1)',
                   showlegend: false,
                   title: 'Annual Profit- 2015',
                   width: 600},
    world_readable: true}


plotly.plot(data, args) do |response|
   puts response['url']
end
