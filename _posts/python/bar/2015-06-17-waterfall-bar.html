---
name: Waterfall Bar Chart
plot_url: https://plot.ly/~neda/2991/annual-profit-2015/
language: python
suite: bar
order: 16
---

# Learn about API authentication here: https://plot.ly/python/getting-started
# Find your api_key here: https://plot.ly/settings/api

import plotly.plotly as py
from plotly.graph_objs import *

x_data = ['Product&lt; br &gt;Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total']
y_data = [400, 660, 660, 590, 400, 400, 340]  
text = ['$430K', '$260K', '$690K', '$-120K', '$-200K', '$-320K', '$370K']

#Base 
trace0 = Bar(
    x = ['Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'],
    y = [0, 430, 0, 570, 370, 370, 0],
    marker = Marker(
        color = 'rgba(1,1,1, 0.0)',
    )
)

#Revenue
trace1 = Bar(
    x = ['Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'],
    y = [430, 260, 690, 0, 0, 0, 0],
    marker = Marker(
        color = 'rgba(55, 128, 191, 0.7)',
        line = Line(
            color = 'rgba(55, 128, 191, 1.0)',
            width = 2,
        )
    )
)

#Costs
trace2 = Bar(
    x = ['Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'],
    y = [0, 0, 0, 120, 200, 320, 0],
    marker = Marker(
        color = 'rgba(219, 64, 82, 0.7)',
        line = Line(
            color = 'rgba(219, 64, 82, 1.0)',
            width = 2,
        )  
    )
)

#Profit
trace3 = Bar(
    x = ['Product</br>Revenue', 'Services</br>Revenue', 'Total</br>Revenue', 'Fixed</br>Costs', 'Variable</br>Costs', 'Total</br>Costs', 'Total'],
    y = [0, 0, 0, 0, 0, 0, 370],
    marker = Marker(
        color = 'rgba(50, 171, 96, 0.7)',
        line = Line(
            color = 'rgba(50, 171, 96, 1.0)',
            width = 2,
        )
    )
)

data = Data([trace0, trace1, trace2, trace3]) 

layout = Layout(
    title = 'Annual Profit- 2015',
    barmode ='stack',
    paper_bgcolor = 'rgba(245, 246, 249, 1)', 
    plot_bgcolor = 'rgba(245, 246, 249, 1)',
    width = 600,
    height = 600,
    showlegend = False,
)

annotations = []

for i in range(0, 7):
    annotations.append(Annotation( x = x_data[i], y = y_data[i], text = text[i], font = Font(family = 'Arial', 
        size = 14, color = 'rgba(245, 246, 249, 1)'), showarrow = False,))
    
layout['annotations'] = annotations    

fig = Figure(data = data, layout = layout)
plot_url = py.plot(fig, filename = 'waterfall-bar-profit')
