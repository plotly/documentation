---
permalink: python/candlestick-charts
description: How to make interactive candlestick charts in Python with Plotly. Six examples of candlestick charts with Pandas, time series, and yahoo finance data.
name: Candlestick Charts
has_thumbnail: true
thumbnail: /images/candlestick.png
layout: user-guide
language: python
title: Python Candlestick Charts | plotly
display_as: chart_type
has_thumbnail: true
page_type: example_index
order: 26
---
{% raw %}
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Candlestick-Charts-in-Python">Candlestick Charts in Python<a class="anchor-link" href="#Candlestick-Charts-in-Python">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="kn">import</span> <span class="nn">plotly</span>
<span class="n">plotly</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[1]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&apos;1.8.3&apos;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="Simple-Example-with-Pandas">Simple Example with Pandas<a class="anchor-link" href="#Simple-Example-with-Pandas">&#182;</a></h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">from</span> <span class="nn">plotly.tools</span> <span class="kn">import</span> <span class="n">FigureFactory</span> <span class="k">as</span> <span class="n">FF</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">import</span> <span class="nn">pandas.io.data</span> <span class="kn">as</span> <span class="nn">web</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="s">&quot;aapl&quot;</span><span class="p">,</span> <span class="s">&#39;yahoo&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">FF</span><span class="o">.</span><span class="n">create_candlestick</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Open</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">High</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Low</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Close</span><span class="p">,</span> <span class="n">dates</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;finance/aapl-candlestick&#39;</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[2]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;"seamless="seamless" src="https://plot.ly/~chelsea_lyn/5576.embed" height="525px" width="100%"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="Customizing-the-Figure-with-Text-and-Annotations">Customizing the Figure with Text and Annotations<a class="anchor-link" href="#Customizing-the-Figure-with-Text-and-Annotations">&#182;</a></h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">from</span> <span class="nn">plotly.tools</span> <span class="kn">import</span> <span class="n">FigureFactory</span> <span class="k">as</span> <span class="n">FF</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">import</span> <span class="nn">pandas.io.data</span> <span class="kn">as</span> <span class="nn">web</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">FF</span><span class="o">.</span><span class="n">create_candlestick</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Open</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">High</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Low</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Close</span><span class="p">,</span> <span class="n">dates</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="c"># Update the fig - all options here: https://plot.ly/python/reference/#Layout</span>
<span class="n">fig</span><span class="p">[</span><span class="s">&#39;layout&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="s">&#39;The Great Recession&#39;</span><span class="p">,</span>
    <span class="s">&#39;yaxis&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="s">&#39;AAPL Stock&#39;</span><span class="p">},</span>
    <span class="s">&#39;shapes&#39;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s">&#39;x0&#39;</span><span class="p">:</span> <span class="s">&#39;2007-12-01&#39;</span><span class="p">,</span> <span class="s">&#39;x1&#39;</span><span class="p">:</span> <span class="s">&#39;2007-12-01&#39;</span><span class="p">,</span>
        <span class="s">&#39;y0&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;y1&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;xref&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;yref&#39;</span><span class="p">:</span> <span class="s">&#39;paper&#39;</span><span class="p">,</span>
        <span class="s">&#39;line&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;color&#39;</span><span class="p">:</span> <span class="s">&#39;rgb(30,30,30)&#39;</span><span class="p">,</span> <span class="s">&#39;width&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
    <span class="p">}],</span>
    <span class="s">&#39;annotations&#39;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">&#39;2007-12-01&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span> <span class="s">&#39;xref&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;yref&#39;</span><span class="p">:</span> <span class="s">&#39;paper&#39;</span><span class="p">,</span>
        <span class="s">&#39;showarrow&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">&#39;xanchor&#39;</span><span class="p">:</span> <span class="s">&#39;left&#39;</span><span class="p">,</span>
        <span class="s">&#39;text&#39;</span><span class="p">:</span> <span class="s">&#39;Official start of the recession&#39;</span>
    <span class="p">}]</span>
<span class="p">})</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;finance/aapl-recession-candlestick&#39;</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[3]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;"seamless="seamless" src="https://plot.ly/~chelsea_lyn/5634.embed" height="525px" width="100%"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="Custom-Candlestick-Colors">Custom Candlestick Colors<a class="anchor-link" href="#Custom-Candlestick-Colors">&#182;</a></h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">from</span> <span class="nn">plotly.tools</span> <span class="kn">import</span> <span class="n">FigureFactory</span> <span class="k">as</span> <span class="n">FF</span>
<span class="kn">from</span> <span class="nn">plotly.graph_objs</span> <span class="kn">import</span> <span class="n">Line</span><span class="p">,</span> <span class="n">Marker</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">import</span> <span class="nn">pandas.io.data</span> <span class="kn">as</span> <span class="nn">web</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="s">&quot;aapl&quot;</span><span class="p">,</span> <span class="s">&#39;yahoo&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">FF</span><span class="o">.</span><span class="n">create_candlestick</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Open</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">High</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Low</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Close</span><span class="p">,</span> <span class="n">dates</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="c"># Make increasing ohlc sticks and customize their color and name</span>
<span class="n">fig_increasing</span> <span class="o">=</span> <span class="n">FF</span><span class="o">.</span><span class="n">create_candlestick</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Open</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">High</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Low</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Close</span><span class="p">,</span> <span class="n">dates</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="s">&#39;increasing&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;AAPL&#39;</span><span class="p">,</span>
    <span class="n">marker</span><span class="o">=</span><span class="n">Marker</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;rgb(150, 200, 250)&#39;</span><span class="p">),</span>                                       
    <span class="n">line</span><span class="o">=</span><span class="n">Line</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;rgb(150, 200, 250)&#39;</span><span class="p">))</span>

<span class="c"># Make decreasing ohlc sticks and customize their color and name</span>
<span class="n">fig_decreasing</span> <span class="o">=</span> <span class="n">FF</span><span class="o">.</span><span class="n">create_candlestick</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Open</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">High</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Low</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Close</span><span class="p">,</span> <span class="n">dates</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="s">&#39;decreasing&#39;</span><span class="p">,</span>
    <span class="n">marker</span><span class="o">=</span><span class="n">Marker</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;rgb(128, 128, 128)&#39;</span><span class="p">),</span>
    <span class="n">line</span><span class="o">=</span><span class="n">Line</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;rgb(128, 128, 128)&#39;</span><span class="p">))</span>

<span class="c"># Initialize the figure</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">fig_increasing</span>

<span class="c"># Add decreasing data with .extend()</span>
<span class="n">fig</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">fig_decreasing</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">])</span>

<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;finance/aapl-candlestick-custom&#39;</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[4]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;"seamless="seamless" src="https://plot.ly/~chelsea_lyn/5578.embed" height="525px" width="100%"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="Simple-Example-with-datetime-Objects">Simple Example with <code>datetime</code> Objects<a class="anchor-link" href="#Simple-Example-with-datetime-Objects">&#182;</a></h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">from</span> <span class="nn">plotly.tools</span> <span class="kn">import</span> <span class="n">FigureFactory</span> <span class="k">as</span> <span class="n">FF</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c"># Add data</span>
<span class="n">open_data</span> <span class="o">=</span> <span class="p">[</span><span class="mf">33.0</span><span class="p">,</span> <span class="mf">33.3</span><span class="p">,</span> <span class="mf">33.5</span><span class="p">,</span> <span class="mf">33.0</span><span class="p">,</span> <span class="mf">34.1</span><span class="p">]</span>
<span class="n">high_data</span> <span class="o">=</span> <span class="p">[</span><span class="mf">33.1</span><span class="p">,</span> <span class="mf">33.3</span><span class="p">,</span> <span class="mf">33.6</span><span class="p">,</span> <span class="mf">33.2</span><span class="p">,</span> <span class="mf">34.8</span><span class="p">]</span>
<span class="n">low_data</span> <span class="o">=</span> <span class="p">[</span><span class="mf">32.7</span><span class="p">,</span> <span class="mf">32.7</span><span class="p">,</span> <span class="mf">32.8</span><span class="p">,</span> <span class="mf">32.6</span><span class="p">,</span> <span class="mf">32.8</span><span class="p">]</span>
<span class="n">close_data</span> <span class="o">=</span> <span class="p">[</span><span class="mf">33.0</span><span class="p">,</span> <span class="mf">32.9</span><span class="p">,</span> <span class="mf">33.3</span><span class="p">,</span> <span class="mf">33.1</span><span class="p">,</span> <span class="mf">33.1</span><span class="p">]</span>
<span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2013</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
         <span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2013</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
         <span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2013</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
         <span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2014</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
         <span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2014</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">10</span><span class="p">)]</span>

<span class="c"># Create ohlc</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">FF</span><span class="o">.</span><span class="n">create_candlestick</span><span class="p">(</span><span class="n">open_data</span><span class="p">,</span> <span class="n">high_data</span><span class="p">,</span>
    <span class="n">low_data</span><span class="p">,</span> <span class="n">close_data</span><span class="p">,</span> <span class="n">dates</span><span class="o">=</span><span class="n">dates</span><span class="p">)</span>

<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;finance/simple-candlestick&#39;</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[5]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;"seamless="seamless" src="https://plot.ly/~chelsea_lyn/5642.embed" height="525px" width="100%"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="Simple-Example-Adding-a-Trace-to-a-Candlestick-Chart">Simple Example Adding a Trace to a Candlestick Chart<a class="anchor-link" href="#Simple-Example-Adding-a-Trace-to-a-Candlestick-Chart">&#182;</a></h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">from</span> <span class="nn">plotly.tools</span> <span class="kn">import</span> <span class="n">FigureFactory</span> <span class="k">as</span> <span class="n">FF</span>
<span class="kn">from</span> <span class="nn">plotly.graph_objs</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">import</span> <span class="nn">pandas.io.data</span> <span class="kn">as</span> <span class="nn">web</span>

<span class="c"># Create Candlestick</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="s">&quot;aapl&quot;</span><span class="p">,</span> <span class="s">&#39;yahoo&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">FF</span><span class="o">.</span><span class="n">create_candlestick</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Open</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">High</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Low</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Close</span><span class="p">,</span> <span class="n">dates</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="c"># Create Line of open values</span>
<span class="n">add_line</span> <span class="o">=</span> <span class="n">Scatter</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> 
    <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">Open</span><span class="p">,</span> 
    <span class="n">name</span><span class="o">=</span> <span class="s">&#39;Open Vals&#39;</span><span class="p">,</span> 
    <span class="n">line</span><span class="o">=</span><span class="n">Line</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;black&#39;</span><span class="p">)</span>
    <span class="p">)</span>

<span class="n">fig</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">add_line</span><span class="p">])</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;candlestick_and_trace&#39;</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[7]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;"seamless="seamless" src="https://plot.ly/~chelsea_lyn/6204.embed" height="525px" width="100%"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Reference">Reference<a class="anchor-link" href="#Reference">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">help</span><span class="p">(</span><span class="n">FF</span><span class="o">.</span><span class="n">create_candlestick</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on function create_candlestick in module plotly.tools:

create_candlestick(open, high, low, close, dates=None, direction=&apos;both&apos;, **kwargs)
    BETA function that creates a candlestick chart
    
    :param (list) open: opening values
    :param (list) high: high values
    :param (list) low: low values
    :param (list) close: closing values
    :param (list) dates: list of datetime objects. Default: None
    :param (string) direction: direction can be &apos;increasing&apos;, &apos;decreasing&apos;,
        or &apos;both&apos;. When the direction is &apos;increasing&apos;, the returned figure
        consists of all candlesticks where the close value is greater than
        the corresponding open value, and when the direction is
        &apos;decreasing&apos;, the returned figure consists of all candlesticks
        where the close value is less than or equal to the corresponding
        open value. When the direction is &apos;both&apos;, both increasing and
        decreasing candlesticks are returned. Default: &apos;both&apos;
    :param kwargs: kwargs passed through plotly.graph_objs.Scatter.
        These kwargs describe other attributes about the ohlc Scatter trace
        such as the color or the legend name. For more information on valid
        kwargs call help(plotly.graph_objs.Scatter)
    
    :rtype (dict): returns a representation of candlestick chart figure.
    
    Example 1: Simple candlestick chart from a Pandas DataFrame
    &#96;&#96;&#96;
    import plotly.plotly as py
    from plotly.tools import FigureFactory as FF
    from datetime import datetime
    
    import pandas.io.data as web
    
    df = web.DataReader(&quot;aapl&quot;, &apos;yahoo&apos;, datetime(2007, 10, 1), datetime(2009, 4, 1))
    fig = FF.create_candlestick(df.Open, df.High, df.Low, df.Close, dates=df.index)
    py.plot(fig, filename=&apos;finance/aapl-candlestick&apos;, validate=False)
    &#96;&#96;&#96;
    
    Example 2: Add text and annotations to the candlestick chart
    &#96;&#96;&#96;
    fig = FF.create_candlestick(df.Open, df.High, df.Low, df.Close, dates=df.index)
    # Update the fig - all options here: https://plot.ly/python/reference/#Layout
    fig[&apos;layout&apos;].update({
        &apos;title&apos;: &apos;The Great Recession&apos;,
        &apos;yaxis&apos;: {&apos;title&apos;: &apos;AAPL Stock&apos;},
        &apos;shapes&apos;: [{
            &apos;x0&apos;: &apos;2007-12-01&apos;, &apos;x1&apos;: &apos;2007-12-01&apos;,
            &apos;y0&apos;: 0, &apos;y1&apos;: 1, &apos;xref&apos;: &apos;x&apos;, &apos;yref&apos;: &apos;paper&apos;,
            &apos;line&apos;: {&apos;color&apos;: &apos;rgb(30,30,30)&apos;, &apos;width&apos;: 1}
        }],
        &apos;annotations&apos;: [{
            &apos;x&apos;: &apos;2007-12-01&apos;, &apos;y&apos;: 0.05, &apos;xref&apos;: &apos;x&apos;, &apos;yref&apos;: &apos;paper&apos;,
            &apos;showarrow&apos;: False, &apos;xanchor&apos;: &apos;left&apos;,
            &apos;text&apos;: &apos;Official start of the recession&apos;
        }]
    })
    py.plot(fig, filename=&apos;finance/aapl-recession-candlestick&apos;, validate=False)
    &#96;&#96;&#96;
    
    Example 3: Customize the candlestick colors
    &#96;&#96;&#96;
    import plotly.plotly as py
    from plotly.tools import FigureFactory as FF
    from plotly.graph_objs import Line, Marker
    from datetime import datetime
    
    import pandas.io.data as web
    
    df = web.DataReader(&quot;aapl&quot;, &apos;yahoo&apos;, datetime(2008, 1, 1), datetime(2009, 4, 1))
    
    # Make increasing candlesticks and customize their color and name
    fig_increasing = FF.create_candlestick(df.Open, df.High, df.Low, df.Close, dates=df.index,
        direction=&apos;increasing&apos;, name=&apos;AAPL&apos;,
        marker=Marker(color=&apos;rgb(150, 200, 250)&apos;),
        line=Line(color=&apos;rgb(150, 200, 250)&apos;))
    
    # Make decreasing candlesticks and customize their color and name
    fig_decreasing = FF.create_candlestick(df.Open, df.High, df.Low, df.Close, dates=df.index,
        direction=&apos;decreasing&apos;,
        marker=Marker(color=&apos;rgb(128, 128, 128)&apos;),
        line=Line(color=&apos;rgb(128, 128, 128)&apos;))
    
    # Initialize the figure
    fig = fig_increasing
    
    # Add decreasing data with .extend()
    fig[&apos;data&apos;].extend(fig_decreasing[&apos;data&apos;])
    
    py.iplot(fig, filename=&apos;finance/aapl-candlestick-custom&apos;, validate=False)
    &#96;&#96;&#96;
    
    Example 4: Candlestick chart with datetime objects
    &#96;&#96;&#96;
    import plotly.plotly as py
    from plotly.tools import FigureFactory as FF
    
    from datetime import datetime
    
    # Add data
    open_data = [33.0, 33.3, 33.5, 33.0, 34.1]
    high_data = [33.1, 33.3, 33.6, 33.2, 34.8]
    low_data = [32.7, 32.7, 32.8, 32.6, 32.8]
    close_data = [33.0, 32.9, 33.3, 33.1, 33.1]
    dates = [datetime(year=2013, month=10, day=10),
             datetime(year=2013, month=11, day=10),
             datetime(year=2013, month=12, day=10),
             datetime(year=2014, month=1, day=10),
             datetime(year=2014, month=2, day=10)]
    
    # Create ohlc
    fig = FF.create_candlestick(open_data, high_data,
        low_data, close_data, dates=dates)
    
    py.iplot(fig, filename=&apos;finance/simple-candlestick&apos;, validate=False)
    &#96;&#96;&#96;

</pre>
</div>
</div>

</div>
</div>

</div>{% endraw %}