---
permalink: python/gapminder-example/
description: How to make the classic Gapminder Animation in Python.
name: Gapminder Example | plotly
has_thumbnail: true
thumbnail: thumbnail/gapminder_animation.gif
layout: user-guide
name: Gapminder Example
language: python
title: Gapminder Example in Python | plotly
display_as: animations
has_thumbnail: true
page_type: example_index
order: 2
---
{% raw %}
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="New-to-Plotly?">New to Plotly?<a class="anchor-link" href="#New-to-Plotly?">&#182;</a></h4><p>Plotly's Python library is free and open source! <a href="https://plot.ly/python/getting-started/">Get started</a> by downloading the client and <a href="https://plot.ly/python/getting-started/">reading the primer</a>.
<br>You can set up Plotly to work in <a href="https://plot.ly/python/getting-started/#initialization-for-online-plotting">online</a> or <a href="https://plot.ly/python/getting-started/#initialization-for-offline-plotting">offline</a> mode, or in <a href="https://plot.ly/python/getting-started/#start-plotting-online">jupyter notebooks</a>.
<br>We also have a quick-reference <a href="https://images.plot.ly/plotly-documentation/images/python_cheat_sheet.pdf">cheatsheet</a> (new!) to help you get started!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Version-Check">Version Check<a class="anchor-link" href="#Version-Check">&#182;</a></h4><p>Note: Animations are available in version 1.12.10+
Run pip install plotly --upgrade to update your Plotly version. Please note that all of these examples are using <a href="https://plot.ly/python/offline/">Python Offline</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">plotly</span>
<span class="n">plotly</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[1]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&#39;1.12.12&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="What-is-Gapminder?">What is Gapminder?<a class="anchor-link" href="#What-is-Gapminder?">&#182;</a></h4><p>Often if one wants to show off the capabilities of their animation plotting tool, a <code>Gapminder</code> example is used to do that. The name derives from the <a href="https://www.gapminder.org/">non-profit organization</a> responsible for carrying out and presenting various statistical charts. The tutorial below walks you through how to make an example which presents the <code>GDP per Capita</code> vs <code>Life Expectancy</code> across the years 1952 to 2007 in an animated <a href="https://plot.ly/python/bubble-charts/">Bubble Chart</a>, in which the bubbles represent countries and their sizes representing the population.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Import-Data">Import Data<a class="anchor-link" href="#Import-Data">&#182;</a></h4><p>First, import the Gapminder data that we will be using for the example and store in a dataframe:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">from</span> <span class="nn">plotly.grid_objs</span> <span class="kn">import</span> <span class="n">Grid</span><span class="p">,</span> <span class="n">Column</span>
<span class="kn">from</span> <span class="nn">plotly.tools</span> <span class="kn">import</span> <span class="n">FigureFactory</span> <span class="k">as</span> <span class="n">FF</span> 

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/plotly/datasets/master/gapminderDataFiveYear.csv&#39;</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">FF</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;animations-gapminder-data-preview&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[2]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plot.ly/~AdamKulidjian/2157.embed" height="380px" width="100%"></iframe>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Make-the-Grid">Make the Grid<a class="anchor-link" href="#Make-the-Grid">&#182;</a></h4><p>Since we are using the v2 api for animations in Plotly, we need to first make a <code>grid</code>. You can learn more in the <a href="https://plot.ly/python/animations/">introduction to animation doc</a>.</p>
<p>We will first define a list of <em>string</em> years which will represent the values that our <code>slider</code> will take on. Going through the dataset, we will take out all the unique continents from the column <code>continent</code> and store them as well. Finally, we make a grid with each column representing a slice of the dataframe by <em>year</em>, <em>continent</em> and <em>column name</em>, making sure to name each column uniquly by these variables:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">years</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1952&#39;</span><span class="p">,</span> <span class="s1">&#39;1962&#39;</span><span class="p">,</span> <span class="s1">&#39;1967&#39;</span><span class="p">,</span> <span class="s1">&#39;1972&#39;</span><span class="p">,</span> <span class="s1">&#39;1977&#39;</span><span class="p">,</span> <span class="s1">&#39;1982&#39;</span><span class="p">,</span> <span class="s1">&#39;1987&#39;</span><span class="p">,</span> <span class="s1">&#39;1992&#39;</span><span class="p">,</span> <span class="s1">&#39;1997&#39;</span><span class="p">,</span> <span class="s1">&#39;2002&#39;</span><span class="p">,</span> <span class="s1">&#39;2007&#39;</span><span class="p">]</span>
<span class="c1"># make list of continents</span>
<span class="n">continents</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">continent</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">[</span><span class="s1">&#39;continent&#39;</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">continent</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">continents</span><span class="p">:</span>
        <span class="n">continents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">continent</span><span class="p">)</span>

<span class="n">columns</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># make grid</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">continent</span> <span class="ow">in</span> <span class="n">continents</span><span class="p">:</span>
        <span class="n">dataset_by_year</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="n">dataset</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">)]</span>
        <span class="n">dataset_by_year_and_cont</span> <span class="o">=</span> <span class="n">dataset_by_year</span><span class="p">[</span><span class="n">dataset_by_year</span><span class="p">[</span><span class="s1">&#39;continent&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">continent</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">col_name</span> <span class="ow">in</span> <span class="n">dataset_by_year_and_cont</span><span class="p">:</span>
            <span class="c1"># each column name is unique</span>
            <span class="n">column_name</span> <span class="o">=</span> <span class="s1">&#39;{year}_{continent}_{header}_gapminder_grid&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">continent</span><span class="o">=</span><span class="n">continent</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">col_name</span>
            <span class="p">)</span>
            <span class="n">a_column</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">dataset_by_year_and_cont</span><span class="p">[</span><span class="n">col_name</span><span class="p">]),</span> <span class="n">column_name</span><span class="p">)</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a_column</span><span class="p">)</span>

<span class="c1"># upload grid</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">py</span><span class="o">.</span><span class="n">grid_ops</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="s1">&#39;gapminder_grid&#39;</span><span class="p">,</span> <span class="n">auto_open</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">url</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[3]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>u&#39;https://plot.ly/~AdamKulidjian/2161/&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Make-the-Figure">Make the Figure<a class="anchor-link" href="#Make-the-Figure">&#182;</a></h4><p>Now we can construct the <code>figure</code>, which takes the arguments <code>data</code>, <code>layout</code>, <code>frames</code>, and <code>config</code>. For the <em>slider</em> to appear, we need to add <code>slider</code> and <code>sliders</code> to <code>layout</code>. The <code>slider</code> dictionary is set in the following way:</p>

<pre><code>figure['layout']['slider'] = {
    'args': [
        'slider.value', {
            'duration': 400,
            'ease': 'cubic-in-out'
        }
    ],
    'initialValue': 'first-value-for-slider',
    'plotlycommand': 'animate',
    'values': your-list,
    'visible': True
}</code></pre>
<ul>
<li><code>duration</code> represents the length of time for the slider to move from value to value (ms)</li>
<li><code>ease</code> is the algorithm that is used to move from one value to another</li>
<li><code>initialValue</code> is the first value of the list being used for the values that slider moves between</li>
<li><code>values</code> <em>is</em> that list of values. (For our example, it's the list <code>years</code>)</li>
<li><code>plotlycommand</code> is the javascript name of the function that is being called in the background</li>
</ul>
<p>For more information and/or clarification of the available options in <code>sliders</code>, check out the <a href="https://plot.ly/python/reference/#layout-sliders">reference page</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># make figure</span>
<span class="n">figure</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s1">&#39;layout&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s1">&#39;frames&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s1">&#39;config&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;scrollzoom&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># fill in most of layout</span>
<span class="n">figure</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;xaxis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;range&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">85</span><span class="p">],</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Life Expectancy&#39;</span><span class="p">,</span> <span class="s1">&#39;gridcolor&#39;</span><span class="p">:</span> <span class="s1">&#39;#FFFFFF&#39;</span><span class="p">}</span>
<span class="n">figure</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;yaxis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;GDP per Capita&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="s1">&#39;gridcolor&#39;</span><span class="p">:</span> <span class="s1">&#39;#FFFFFF&#39;</span><span class="p">}</span>
<span class="n">figure</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;hovermode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;closest&#39;</span>
<span class="n">figure</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;plot_bgcolor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;rgb(223, 232, 243)&#39;</span>
<span class="n">figure</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;slider&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;args&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;slider.value&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
            <span class="s1">&#39;ease&#39;</span><span class="p">:</span> <span class="s1">&#39;cubic-in-out&#39;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s1">&#39;initialValue&#39;</span><span class="p">:</span> <span class="s1">&#39;1952&#39;</span><span class="p">,</span>
    <span class="s1">&#39;plotlycommand&#39;</span><span class="p">:</span> <span class="s1">&#39;animate&#39;</span><span class="p">,</span>
    <span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="n">years</span><span class="p">,</span>
    <span class="s1">&#39;visible&#39;</span><span class="p">:</span> <span class="bp">True</span>
<span class="p">}</span>
<span class="n">figure</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;updatemenus&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;buttons&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s1">&#39;args&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;frame&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span> <span class="s1">&#39;redraw&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">},</span>
                         <span class="s1">&#39;fromcurrent&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s1">&#39;transition&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="s1">&#39;easing&#39;</span><span class="p">:</span> <span class="s1">&#39;quadratic-in-out&#39;</span><span class="p">}}],</span>
                <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Play&#39;</span><span class="p">,</span>
                <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;animate&#39;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s1">&#39;args&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="bp">None</span><span class="p">],</span> <span class="p">{</span><span class="s1">&#39;frame&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;redraw&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">},</span> <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;immediate&#39;</span><span class="p">,</span>
                <span class="s1">&#39;transition&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}}],</span>
                <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Pause&#39;</span><span class="p">,</span>
                <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;animate&#39;</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="s1">&#39;direction&#39;</span><span class="p">:</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pad&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="mi">87</span><span class="p">},</span>
        <span class="s1">&#39;showactive&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;buttons&#39;</span><span class="p">,</span>
        <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="s1">&#39;xanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span>
        <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;yanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;top&#39;</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In addition to <code>slider</code>, there is the <code>sliders</code> argument that has the following form:</p>

<pre><code>figure['layout']['slider] = {
    'active': 0,
    'yanchor': 'top',
    'xanchor': 'left',
    'currentvalue': {
        'font': {'size': 20},
        'prefix': 'text-before-value-on-display',
        'visible': True,
        'xanchor': 'right'
    },
    'transition': {'duration': 300, 'easing': 'cubic-in-out'},
    'pad': {'b': 10, 't': 50},
    'len': 0.9,
    'x': 0.1,
    'y': 0,
    'steps': [...]
}</code></pre>
<p>It is mostly used to determine where on the plot the slider will appear.</p>
<ul>
<li><code>yanchor</code> determines whether the slider is on the <em>top</em> or <em>bottom</em> of the chart page</li>
<li><code>xanchor</code> is similar, only with <em>left</em> and <em>right</em> as possible values</li>
<li><code>currentvalue</code> sets the display of the current value that the slider is hovering on. It contains args such as <code>prefix</code>, which sets the text that appears before the value.</li>
<li><code>steps</code> is a list of dictionaries each of which corresponds to a frame in the figure. They should be ordered in the sequence in which the frames occur in the animation.</li>
</ul>
<p>Each dictionary in <code>steps</code> has the following form:</p>

<pre><code>{
    'args': [
        [slider-value],
        {'frame': {'duration': 300, 'redraw': False},
         'mode': 'immediate',
         'transition': {'duration': 300}}
    ],
    'label': label-for-frame,
    'method': 'animate'
}</code></pre>
<ul>
<li>the first item in the list <code>args</code> is a list containing the slider-value on <em>that</em> frame</li>
<li><code>label</code> is the text that appears next to the <code>prefix</code> arg mentioned in the <code>slider</code> section (eg. <em>Year: 1952</em>)</li>
</ul>
<p>For more information, check out the <a href="https://plot.ly/python/reference/#layout-sliders-steps">documentation</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">sliders_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;active&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;yanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;top&#39;</span><span class="p">,</span>
    <span class="s1">&#39;xanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span>
    <span class="s1">&#39;currentvalue&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;font&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span>
        <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="s1">&#39;Year:&#39;</span><span class="p">,</span>
        <span class="s1">&#39;visible&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
        <span class="s1">&#39;xanchor&#39;</span><span class="p">:</span> <span class="s1">&#39;right&#39;</span>
    <span class="p">},</span>
    <span class="s1">&#39;transition&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="s1">&#39;easing&#39;</span><span class="p">:</span> <span class="s1">&#39;cubic-in-out&#39;</span><span class="p">},</span>
    <span class="s1">&#39;pad&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">},</span>
    <span class="s1">&#39;len&#39;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span>
    <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;steps&#39;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Fill-in-Figure-with-Data-and-Frames">Fill in Figure with Data and Frames<a class="anchor-link" href="#Fill-in-Figure-with-Data-and-Frames">&#182;</a></h4><p>Now we can put the data from our grid into the figure. Since we are using referenced data from the grid, we use the <code>.get_column_reference()</code> method on the grid and supply the name of the column we want via a looping through all the years and continents. First we</p>
<p>Note: If you are using referenced data for a particular parameter, you <code>MUST</code> change the parameter name from <code>name</code> to <code>namesrc</code> to indicate that you are using referenced data from a grid. For instance, <code>x</code> becomes <code>xsrc</code>, <code>text</code> becomes <code>textsrc</code>, etc.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">custom_colors</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Asia&#39;</span><span class="p">:</span> <span class="s1">&#39;rgb(171, 99, 250)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Europe&#39;</span><span class="p">:</span> <span class="s1">&#39;rgb(230, 99, 250)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Africa&#39;</span><span class="p">:</span> <span class="s1">&#39;rgb(99, 110, 250)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Americas&#39;</span><span class="p">:</span> <span class="s1">&#39;rgb(25, 211, 243)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Oceania&#39;</span><span class="p">:</span> <span class="s1">&#39;rgb(9, 255, 255)&#39;</span>   
<span class="p">}</span>

<span class="n">col_name_template</span> <span class="o">=</span> <span class="s1">&#39;{year}_{continent}_{header}_gapminder_grid&#39;</span>
<span class="n">year</span> <span class="o">=</span> <span class="mi">1952</span>
<span class="k">for</span> <span class="n">continent</span> <span class="ow">in</span> <span class="n">continents</span><span class="p">:</span>
    <span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;xsrc&#39;</span><span class="p">:</span> <span class="n">grid</span><span class="o">.</span><span class="n">get_column_reference</span><span class="p">(</span><span class="n">col_name_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">continent</span><span class="o">=</span><span class="n">continent</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;lifeExp&#39;</span>
        <span class="p">)),</span>
        <span class="s1">&#39;ysrc&#39;</span><span class="p">:</span> <span class="n">grid</span><span class="o">.</span><span class="n">get_column_reference</span><span class="p">(</span><span class="n">col_name_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">continent</span><span class="o">=</span><span class="n">continent</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;gdpPercap&#39;</span>
        <span class="p">)),</span>
        <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;markers&#39;</span><span class="p">,</span>
        <span class="s1">&#39;textsrc&#39;</span><span class="p">:</span> <span class="n">grid</span><span class="o">.</span><span class="n">get_column_reference</span><span class="p">(</span><span class="n">col_name_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">continent</span><span class="o">=</span><span class="n">continent</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;country&#39;</span>
        <span class="p">)),</span>
        <span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;sizemode&#39;</span><span class="p">:</span> <span class="s1">&#39;area&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sizeref&#39;</span><span class="p">:</span> <span class="mi">200000</span><span class="p">,</span>
            <span class="s1">&#39;sizesrc&#39;</span><span class="p">:</span> <span class="n">grid</span><span class="o">.</span><span class="n">get_column_reference</span><span class="p">(</span><span class="n">col_name_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                 <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">continent</span><span class="o">=</span><span class="n">continent</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;pop&#39;</span>
            <span class="p">)),</span>
            <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">custom_colors</span><span class="p">[</span><span class="n">continent</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">continent</span>
    <span class="p">}</span>
    <span class="n">figure</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally we make our <code>frames</code>. Here we are running again through the years and continents, but for each combination we instantiate a frame dictionary of the form:</p>

<pre><code>frame = {'data': [], 'name': value-name}</code></pre>
<p>We add a dictionary of data to this list and at the end of each loop, we ensure to add the <code>steps</code> dictionary to the steps list. At the end, we attatch the <code>sliders</code> dictionary to the figure via:</p>

<pre><code>figure['layout']['sliders'] = [sliders_dict]</code></pre>
<p>and then we plot! Enjoy the Gapminder example!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)}</span>
    <span class="k">for</span> <span class="n">continent</span> <span class="ow">in</span> <span class="n">continents</span><span class="p">:</span>
        <span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;xsrc&#39;</span><span class="p">:</span> <span class="n">grid</span><span class="o">.</span><span class="n">get_column_reference</span><span class="p">(</span><span class="n">col_name_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">continent</span><span class="o">=</span><span class="n">continent</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;lifeExp&#39;</span>
            <span class="p">)),</span>
            <span class="s1">&#39;ysrc&#39;</span><span class="p">:</span> <span class="n">grid</span><span class="o">.</span><span class="n">get_column_reference</span><span class="p">(</span><span class="n">col_name_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">continent</span><span class="o">=</span><span class="n">continent</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;gdpPercap&#39;</span>
            <span class="p">)),</span>
            <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;markers&#39;</span><span class="p">,</span>
            <span class="s1">&#39;textsrc&#39;</span><span class="p">:</span> <span class="n">grid</span><span class="o">.</span><span class="n">get_column_reference</span><span class="p">(</span><span class="n">col_name_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">continent</span><span class="o">=</span><span class="n">continent</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;country&#39;</span>
                <span class="p">)),</span>
            <span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;sizemode&#39;</span><span class="p">:</span> <span class="s1">&#39;area&#39;</span><span class="p">,</span>
                <span class="s1">&#39;sizeref&#39;</span><span class="p">:</span> <span class="mi">200000</span><span class="p">,</span>
                <span class="s1">&#39;sizesrc&#39;</span><span class="p">:</span> <span class="n">grid</span><span class="o">.</span><span class="n">get_column_reference</span><span class="p">(</span><span class="n">col_name_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">continent</span><span class="o">=</span><span class="n">continent</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;pop&#39;</span>
                <span class="p">)),</span>
                <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">custom_colors</span><span class="p">[</span><span class="n">continent</span><span class="p">]</span>
            <span class="p">},</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">continent</span>
        <span class="p">}</span>
        <span class="n">frame</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span>

    <span class="n">figure</span><span class="p">[</span><span class="s1">&#39;frames&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
    <span class="n">slider_step</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;args&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="n">year</span><span class="p">],</span>
        <span class="p">{</span><span class="s1">&#39;frame&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="s1">&#39;redraw&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">},</span>
         <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;immediate&#39;</span><span class="p">,</span>
       <span class="s1">&#39;transition&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">}}</span>
     <span class="p">],</span>
     <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">year</span><span class="p">,</span>
     <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;animate&#39;</span><span class="p">}</span>
    <span class="n">sliders_dict</span><span class="p">[</span><span class="s1">&#39;steps&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">slider_step</span><span class="p">)</span>

<span class="n">figure</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;sliders&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">sliders_dict</span><span class="p">]</span>

<span class="n">py</span><span class="o">.</span><span class="n">icreate_animations</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="s1">&#39;gapminder_example&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[7]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="https://plot.ly/~AdamKulidjian/2162.embed" height="525px" width="100%"></iframe>
</div>

</div>

</div>
</div>

</div>{% endraw %}