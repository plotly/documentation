---
permalink: python/heatmaps-contours-and-2dhistograms-tutorial/
description: A tutorial on how to make beautiful heatmaps, contours and 2D histograms with plotly and Python or IPython.
name: Heatmaps, contours and 2d histograms
layout: user-guide
thumbnail: /images/static-image.png
language: python
page_type: u-guide
has_thumbnail: false
---


   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <h2 id="Section-5:-Heatmaps,-Contours-and-2D-Histograms">
       Section 5: Heatmaps, Contours and 2D Histograms
       <a class="anchor-link" href="#Section-5:-Heatmaps,-Contours-and-2D-Histograms">
        ¶
       </a>
      </h2>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Welcome to Plotly's Python API User Guide.
      </p>
      <blockquote>
       <p>
        Links to the other sections are on the User Guide's
        <a href="/python/user-guide#Table-of-Contents:">
         homepage
        </a>
        <br/>
        The Github repository is available
        <a href="https://github.com/plotly/python-user-guide" target="_blank">
         here
        </a>
       </p>
      </blockquote>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Section 5 is divided as follows:
      </p>
      <ul>
       <li>
        <p>
         <a href="#5.1-Heatmaps-of-cyclist-traffic-for-each-day,-week,-month">
          5.1 Heatmaps of cyclist traffic for each day, week, month
         </a>
        </p>
       </li>
       <li>
        <p>
         <a href="#5.2-Correlation-heatmap-between-sites">
          5.2 Correlation heatmap between sites
         </a>
        </p>
       </li>
       <li>
        <p>
         <a href="#5.3-Contours-of-traffic-progression-from-most-to-least-trafficked-sites">
          5.3 Contours of traffic progression from most to least trafficked sites
         </a>
        </p>
       </li>
       <li>
        <p>
         <a href="#5.4-Joint-daily-traffic-probability-distribution-for-2-sites">
          5.4 Joint daily traffic probability distribution for 2 sites
         </a>
        </p>
       </li>
      </ul>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Quickstart (make a simple heatmap of 6 pts):
      </p>
      <pre><code>&gt;&gt;&gt; import plotly.plotly as py
&gt;&gt;&gt; from plotly.graph_objs import *
&gt;&gt;&gt; # auto sign-in with credentials or use py.sign_in()
&gt;&gt;&gt; trace1 = Heatmap(
        z=[[1, 2, 3], [4, 5, 6]]
    )
&gt;&gt;&gt; data = Data([trace1])
&gt;&gt;&gt; py.plot(data)
</code></pre>
      <hr/>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Check which version is installed on your machine and please upgrade if needed.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[1]">
      <a class="prompt input_prompt" href="#in-[1]">
       In [1]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># (*) Import plotly package</span>
<span class="kn">import</span> <span class="nn">plotly</span>

<span class="c"># Check plolty version (if not latest, please upgrade)</span>
<span class="n">plotly</span><span class="o">.</span><span class="n">__version__</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[1]">
        <a class="prompt output_prompt" href="#out[1]">
         Out[1]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
'1.6.6'
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       See the User Guide's
       <a href="/python/user-guide#Installation-guidelines" target="_blank">
        homepage
       </a>
       for more info on installation and upgrading.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <hr/>
      <p>
       In this section, we analyze bike counter data taken from the
       <a href="http://donnees.ville.montreal.qc.ca/" target="_blank">
        open data
       </a>
       website of the city of Montreal using heatmaps, contour maps and 2D histograms.
Along side learning about the
       <code>
        Heatmap
       </code>
       ,
       <code>
        Contour
       </code>
       ,
       <code>
        Histogram2d
       </code>
       and
       <code>
        Histogram2dContour
       </code>
       , we explore:
      </p>
      <ul>
       <li>
        <a href="#Plotly's-pre-defined-color-scales">
         Plotly's pre-defined color maps
        </a>
       </li>
       <li>
        <a href="#Seaborn-styling-in-Plotly">
         Seaborn heatmap styling
        </a>
       </li>
       <li>
        <a href="#Colorbrewer-color-scales-with-Plotly">
         Colorbrewer color scales with Plotly
        </a>
       </li>
      </ul>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       We first import a few modules and sign in to Plotly using our credentials file:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[2]">
      <a class="prompt input_prompt" href="#in-[2]">
       In [2]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># (*) To communicate with Plotly's server, sign in with credentials file</span>
<span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>

<span class="c"># (*) Useful Python/Plotly tools</span>
<span class="kn">import</span> <span class="nn">plotly.tools</span> <span class="kn">as</span> <span class="nn">tls</span>

<span class="c"># (*) Graph objects to piece together plots</span>
<span class="kn">from</span> <span class="nn">plotly.graph_objs</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>  <span class="c"># (*) numpy for math functions and arrays</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       If you are not familiar with credentials files, refer to the User Guide's
       <a href="/python/user-guide#Step-6" target="_blank">
        homepage
       </a>
       .
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       The data is stored in a file named
       <code>
        mtl-bike-2013.csv
       </code>
       . For readers looking to run this notebook, the data file is in this section's Github
       <a href="https://github.com/plotly/python-user-guide/blob/master/s5_heatmaps" target="_blank">
        folder
       </a>
       . Here is the original
       <a href="http://donnees.ville.montreal.qc.ca/storage/f/2014-01-20T20%3A48%3A50.296Z/2013.csv" target="_blank">
        download link
       </a>
       from the open data site of the city of Montreal.
      </p>
      <p>
       As in
       <a href="/python/bubble-charts-tutorial" target="_blank">
        section 3
       </a>
       on Bubble Charts, we use the pandas module in this section to help us manipulate the data.
You can download the module using pip. Simply run:
      </p>
      <pre><code>$ pip install pandas
</code></pre>
      <p>
       For more info on this module, we recommand Hernán Rojas'
       <a href="https://bitbucket.org/hrojas/learn-pandas" target="_blank">
        Pandas tutorial
       </a>
       .
      </p>
      <p>
       As a small heads up, this section features quite a bit of computations. That said, computations and plot styling commands are separated into different code cells; readers only looking for Plotly styling ideas are invited to skip the computation code cells.
      </p>
      <p>
       So, first read the data and copy it into a dataframe object:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[3]">
      <a class="prompt input_prompt" href="#in-[3]">
       In [3]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># (*) Pandas for data manipulation</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="c"># Read csv file and define dataframe object (df for dataframe)</span>
<span class="n">df_all</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'mtl-bike-2013.csv'</span><span class="p">)</span>

<span class="n">df_all</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>  <span class="c"># show dataframe header</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[3]">
        <a class="prompt output_prompt" href="#out[3]">
         Out[3]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
         <table border="1" class="dataframe">
          <thead>
           <tr style="text-align: right;">
            <th>
            </th>
            <th>
             Date
            </th>
            <th>
             Unnamed: 1
            </th>
            <th>
             Berri1
            </th>
            <th>
             CSC
            </th>
            <th>
             Mais1
            </th>
            <th>
             Mais2
            </th>
            <th>
             Parc
            </th>
            <th>
             PierDup
            </th>
            <th>
             Rachel1
            </th>
            <th>
             Totem_Laurier
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <th>
             0
            </th>
            <td>
             01/01/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             0
            </td>
            <td>
             0
            </td>
            <td>
             1
            </td>
            <td>
             0
            </td>
            <td>
             6
            </td>
            <td>
             0
            </td>
            <td>
             1
            </td>
            <td>
             0
            </td>
           </tr>
           <tr>
            <th>
             1
            </th>
            <td>
             02/01/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             69
            </td>
            <td>
             0
            </td>
            <td>
             13
            </td>
            <td>
             0
            </td>
            <td>
             18
            </td>
            <td>
             0
            </td>
            <td>
             2
            </td>
            <td>
             0
            </td>
           </tr>
           <tr>
            <th>
             2
            </th>
            <td>
             03/01/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             69
            </td>
            <td>
             2
            </td>
            <td>
             21
            </td>
            <td>
             6
            </td>
            <td>
             22
            </td>
            <td>
             1
            </td>
            <td>
             0
            </td>
            <td>
             0
            </td>
           </tr>
           <tr>
            <th>
             3
            </th>
            <td>
             04/01/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             80
            </td>
            <td>
             0
            </td>
            <td>
             22
            </td>
            <td>
             4
            </td>
            <td>
             16
            </td>
            <td>
             0
            </td>
            <td>
             125
            </td>
            <td>
             0
            </td>
           </tr>
           <tr>
            <th>
             4
            </th>
            <td>
             05/01/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             52
            </td>
            <td>
             4
            </td>
            <td>
             19
            </td>
            <td>
             3
            </td>
            <td>
             12
            </td>
            <td>
             0
            </td>
            <td>
             97
            </td>
            <td>
             0
            </td>
           </tr>
          </tbody>
         </table>
         <p>
          5 rows × 10 columns
         </p>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Unfortunately, this is not the cleanest looking data file in the world.
      </p>
      <p>
       The first column contains the dates, then we have an unnamed column and the 8 following columns represent the bike counters sites around town. The values below are the total number of cyclists that passed by the counters each day.
      </p>
      <p>
       The sites' names are not written in full in the column header. So, with the help of the project's
       <a href="http://donnees.ville.montreal.qc.ca/dataset/velos-comptage">
        web page
       </a>
       , make a list of sites' full names:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[4]">
      <a class="prompt input_prompt" href="#in-[4]">
       In [4]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Sites' full names</span>
<span class="n">sites</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">'Berri/&lt;br&gt;de Maisonneuve'</span><span class="p">,</span> <span class="s">'Côte-Ste-Catherine&lt;br&gt;(parc Beaubien)'</span><span class="p">,</span>
    <span class="s">'de Maisonneuve/&lt;br&gt;Berri'</span><span class="p">,</span> <span class="s">'de Maisonneuve/&lt;br&gt;Peel'</span><span class="p">,</span> <span class="s">'du Parc/&lt;br&gt;Duluth'</span><span class="p">,</span>
    <span class="s">'Pierre-Dupuy&lt;br&gt;(Habitat 67)'</span><span class="p">,</span> <span class="s">'Rachel/&lt;br&gt;Marquette'</span><span class="p">,</span> <span class="s">'Laurier&lt;br&gt;(métro)'</span>
<span class="p">]</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Where we used the
       <code>
        &lt;br&gt;
       </code>
       HTML tags to break line inside some of the sites' names for better-looking tick labels.
      </p>
      <p>
       Moreover, the data set does not include every day of the year 2013:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[5]">
      <a class="prompt input_prompt" href="#in-[5]">
       In [5]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">df_all</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>  <span class="c"># show dataframe tail</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[5]">
        <a class="prompt output_prompt" href="#out[5]">
         Out[5]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
         <table border="1" class="dataframe">
          <thead>
           <tr style="text-align: right;">
            <th>
            </th>
            <th>
             Date
            </th>
            <th>
             Unnamed: 1
            </th>
            <th>
             Berri1
            </th>
            <th>
             CSC
            </th>
            <th>
             Mais1
            </th>
            <th>
             Mais2
            </th>
            <th>
             Parc
            </th>
            <th>
             PierDup
            </th>
            <th>
             Rachel1
            </th>
            <th>
             Totem_Laurier
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <th>
             256
            </th>
            <td>
             14/09/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             2488
            </td>
            <td>
             1494
            </td>
            <td>
             1706
            </td>
            <td>
             2911
            </td>
            <td>
             979
            </td>
            <td>
             1075
            </td>
            <td>
             3277
            </td>
            <td>
             2456
            </td>
           </tr>
           <tr>
            <th>
             257
            </th>
            <td>
             15/09/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             2243
            </td>
            <td>
             1749
            </td>
            <td>
             1417
            </td>
            <td>
             2933
            </td>
            <td>
             1804
            </td>
            <td>
             1459
            </td>
            <td>
             3623
            </td>
            <td>
             2527
            </td>
           </tr>
           <tr>
            <th>
             258
            </th>
            <td>
             16/09/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             4206
            </td>
            <td>
             2466
            </td>
            <td>
             2799
            </td>
            <td>
             5485
            </td>
            <td>
             3272
            </td>
            <td>
             855
            </td>
            <td>
             4307
            </td>
            <td>
             3012
            </td>
           </tr>
           <tr>
            <th>
             259
            </th>
            <td>
             17/09/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             5506
            </td>
            <td>
             3153
            </td>
            <td>
             3563
            </td>
            <td>
             6626
            </td>
            <td>
             3882
            </td>
            <td>
             1485
            </td>
            <td>
             5332
            </td>
            <td>
             3745
            </td>
           </tr>
           <tr>
            <th>
             260
            </th>
            <td>
             18/09/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             1564
            </td>
            <td>
             3330
            </td>
            <td>
             1154
            </td>
            <td>
             1803
            </td>
            <td>
             4074
            </td>
            <td>
             1759
            </td>
            <td>
             1511
            </td>
            <td>
             3921
            </td>
           </tr>
          </tbody>
         </table>
         <p>
          5 rows × 10 columns
         </p>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[6]">
      <a class="prompt input_prompt" href="#in-[6]">
       In [6]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">df_all</span><span class="o">.</span><span class="n">shape</span>  <span class="c"># df_all does not contain 365 days</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[6]">
        <a class="prompt output_prompt" href="#out[6]">
         Out[6]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
(261, 10)
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       To have a more homogenous data set, trim the data frame to have 8 full months of data, from January 1st to August 31st:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[7]">
      <a class="prompt input_prompt" href="#in-[7]">
       In [7]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># List of booleans corresponding to days in Jan to Aug</span>
<span class="n">i_JanAug</span> <span class="o">=</span> <span class="p">[</span><span class="s">'/09/'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">date</span> <span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">df_all</span><span class="p">[</span><span class="s">'Date'</span><span class="p">]]</span>

<span class="c"># Trim the few September days in df_all</span>
<span class="n">df_JanAug</span> <span class="o">=</span> <span class="n">df_all</span><span class="p">[</span><span class="n">i_JanAug</span><span class="p">]</span>

<span class="n">df_JanAug</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span> <span class="c"># show trimmed dataframe tail</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[7]">
        <a class="prompt output_prompt" href="#out[7]">
         Out[7]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
         <table border="1" class="dataframe">
          <thead>
           <tr style="text-align: right;">
            <th>
            </th>
            <th>
             Date
            </th>
            <th>
             Unnamed: 1
            </th>
            <th>
             Berri1
            </th>
            <th>
             CSC
            </th>
            <th>
             Mais1
            </th>
            <th>
             Mais2
            </th>
            <th>
             Parc
            </th>
            <th>
             PierDup
            </th>
            <th>
             Rachel1
            </th>
            <th>
             Totem_Laurier
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <th>
             238
            </th>
            <td>
             27/08/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             5566
            </td>
            <td>
             2805
            </td>
            <td>
             3662
            </td>
            <td>
             6355
            </td>
            <td>
             3373
            </td>
            <td>
             2153
            </td>
            <td>
             5888
            </td>
            <td>
             3738
            </td>
           </tr>
           <tr>
            <th>
             239
            </th>
            <td>
             28/08/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             5560
            </td>
            <td>
             2759
            </td>
            <td>
             3717
            </td>
            <td>
             6323
            </td>
            <td>
             3355
            </td>
            <td>
             1881
            </td>
            <td>
             5673
            </td>
            <td>
             3886
            </td>
           </tr>
           <tr>
            <th>
             240
            </th>
            <td>
             29/08/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             5806
            </td>
            <td>
             2766
            </td>
            <td>
             3902
            </td>
            <td>
             6713
            </td>
            <td>
             3466
            </td>
            <td>
             1941
            </td>
            <td>
             6044
            </td>
            <td>
             3995
            </td>
           </tr>
           <tr>
            <th>
             241
            </th>
            <td>
             30/08/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             4381
            </td>
            <td>
             2209
            </td>
            <td>
             3019
            </td>
            <td>
             5409
            </td>
            <td>
             2724
            </td>
            <td>
             1632
            </td>
            <td>
             5109
            </td>
            <td>
             3106
            </td>
           </tr>
           <tr>
            <th>
             242
            </th>
            <td>
             31/08/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             2682
            </td>
            <td>
             1018
            </td>
            <td>
             1701
            </td>
            <td>
             3178
            </td>
            <td>
             1385
            </td>
            <td>
             1494
            </td>
            <td>
             3593
            </td>
            <td>
             2303
            </td>
           </tr>
          </tbody>
         </table>
         <p>
          5 rows × 10 columns
         </p>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[8]">
      <a class="prompt input_prompt" href="#in-[8]">
       In [8]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">df_JanAug</span><span class="o">.</span><span class="n">shape</span>

<span class="c"># rows: 243 days</span>
<span class="c"># cols: 1 date column, 1 empty column and 8 sites</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[8]">
        <a class="prompt output_prompt" href="#out[8]">
         Out[8]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
(243, 10)
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <h4 id="5.1-Heatmaps-of-cyclist-traffic-for-each-day,-week,-month">
       5.1 Heatmaps of cyclist traffic for each day, week, month
       <a class="anchor-link" href="#5.1-Heatmaps-of-cyclist-traffic-for-each-day,-week,-month">
        ¶
       </a>
      </h4>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       First, check the total number of cyclists that passed by all the counter sites from January 1st to August 31th.
      </p>
      <p>
       To do so, we could plot the data as a time series where the x-axis represents all the dates in the sample and the y-axis the total number of cyclists that passed by all counter sites. But, here with a sample of 243 dates, this would make a pretty big or not-that-precise plot.
      </p>
      <p>
       Instead, let's plot the data using a Plotly heatmap where the color scheme represents the total number of cyclists, the x-axis the month (January to August) and the y-axis the day of the month (1 to 31).
      </p>
      <p>
       So, start by calling help on the heatmap graph object:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[9]">
      <a class="prompt input_prompt" href="#in-[9]">
       In [9]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">help</span><span class="p">(</span><span class="n">Heatmap</span><span class="p">)</span>  <span class="c"># call help()!</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt">
       </div>
       <div class="output_subarea output_stream output_stdout output_text">
        <pre>
Help on class Heatmap in module plotly.graph_objs.graph_objs:

class Heatmap(PlotlyTrace)
 |  A dictionary-like object for representing a heatmap trace in plotly.
 |
 |  Example:
 |
 |      &gt;&gt;&gt; z = [[0, 1, 0, 1, 0], [1, 0, 1, 0, 1], [0, 1, 0, 1, 0]]
 |      &gt;&gt;&gt; y = ['a', 'b', 'c']
 |      &gt;&gt;&gt; x = [1, 2, 3, 4, 5]py.plot([Contour(z=z, x=x, y=y)])
 |
 |  Online example:
 |
 |      https://plot.ly/python/heatmaps/
 |
 |  Quick method reference:
 |
 |      Heatmap.update(changes)
 |      Heatmap.strip_style()
 |      Heatmap.get_data()
 |      Heatmap.to_graph_objs()
 |      Heatmap.validate()
 |      Heatmap.to_string()
 |      Heatmap.force_clean()
 |
 |  Valid keys:
 |
 |      z [required=True] (value=list of lists or 2d numpy array of numbers)
 |      (streamable):
 |          Sets the data that describes the heatmap mapping. Say the dimensions
 |          of the list of lists or 2d numpy array linked to 'z' has n rows and
 |          m columns then the resulting heatmap will show n partitions along
 |          the y-axis and m partitions along the x-axis. Therefore, the i-th
 |          row/ j-th column cell in the list of lists or 2d numpy array linked
 |          to 'z' is mapped to the i-th partition of the y-axis (starting from
 |          the bottom of the plot) and the j-th partition of the x-axis
 |          (starting from the left of the plot).
 |
 |      x [required=False] (value=list or 1d numpy array of numbers, strings,
 |      datetimes) (streamable):
 |          Sets the horizontal coordinates referring to the columns of the list
 |          of lists or 2d numpy array linked to 'z'. If the 'z' is a list or 1d
 |          numpy array of strings, then the x-labels are spaced evenly. If the
 |          dimensions of the list of lists or 2d numpy array linked to 'z' are
 |          (n x m), the length of the 'x' array should equal m.
 |
 |      y [required=False] (value=list or 1d numpy array of numbers, strings,
 |      datetimes) (streamable):
 |          Sets the vertical coordinates referring to the rows of the list of
 |          lists or 2d numpy array linked to 'z'. If strings, the y-labels are
 |          spaced evenly. If the dimensions of the list of lists or 2d numpy
 |          array linked to 'z' are (n x m), the length of the 'y' array should
 |          equal n.
 |
 |      name [required=False] (value=a string):
 |          The label associated with this trace. This name will appear in the
 |          legend, on hover and in the column header in the online spreadsheet.
 |
 |      zauto [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the default values of 'zmax' and 'zmax' can be
 |          overwritten.
 |
 |      zmin [required=False] (value=number):
 |          Sets the minimum 'z' data value to be resolved by the color scale.
 |          Its default value is the minimum of the 'z' data values. This value
 |          will be used as the minimum in the color scale normalization. For
 |          more info see 'colorscale'.
 |
 |      zmax [required=False] (value=number):
 |          Sets the maximum 'z' data value to be resolved by the color scale.
 |          Its default value is the maximum of the 'z' data values. This value
 |          will be used as the maximum in the color scale normalization. For
 |          more info see 'colorscale'.
 |
 |      colorscale [required=False] (value=list or 1d numpy array of value-color
 |      pairs | 'Greys' | 'Greens' | 'Bluered' | 'Hot' | 'Picnic' | 'Portland' |
 |      'Jet' | 'RdBu' | 'Blackbody' | 'Earth' | 'Electric' | 'YIOrRd' |
 |      'YIGnBu'):
 |          Sets and/or defines the color scale for this trace. The string
 |          values are pre-defined color scales. For custom color scales, define
 |          a list or 1d numpy array of value-color pairs where, the first
 |          element of the pair corresponds to a normalized value of z from 0-1,
 |          i.e. (z-zmin)/ (zmax-zmin), and the second element of pair
 |          corresponds to a color. Use with 'zauto', 'zmin' and 'zmax to fine-
 |          tune the map from 'z' to rendered colors.
 |
 |          Examples:
 |              'Greys' | [[0, 'rgb(0,0,0)'], [0.5, 'rgb(65, 182, 196)'], [1,
 |              'rgb(255,255,255)']]
 |
 |      reversescale [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the color scale will be reversed.
 |
 |      showscale [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the color scale associated with this mapping
 |          will be shown alongside the figure.
 |
 |      colorbar [required=False] (value=ColorBar object | dictionary-like
 |      object):
 |          Links a dictionary-like object defining the parameters of the color
 |          bar associated with this trace (including its title, length and
 |          width).
 |
 |          For more, run `help(plotly.graph_objs.ColorBar)`
 |
 |      zsmooth [required=False] (value=False | 'best' | 'fast'):
 |          Choose between algorithms ('best' or 'fast') to smooth data linked
 |          to 'z'. The default value is False corresponding to no smoothing.
 |
 |      opacity [required=False] (value=number: x in [0, 1]):
 |          Sets the opacity, or transparency, of the entire object, also known
 |          as the alpha channel of colors. If the object's color is given in
 |          terms of 'rgba' color model, 'opacity' is redundant.
 |
 |      xaxis [required=False] (value='x1' | 'x2' | 'x3' | etc.):
 |          This key determines which x-axis the x-coordinates of this trace
 |          will reference in the figure.  Values 'x1' and 'x' reference to
 |          'xaxis' in 'layout', 'x2' references to 'xaxis2' in 'layout', and so
 |          on. Note that 'x1' will always refer to 'xaxis' or 'xaxis1' in
 |          'layout', they are the same.
 |
 |      yaxis [required=False] (value='y1' | 'y2' | 'y3' | etc.):
 |          This key determines which y-axis the y-coordinates of this trace
 |          will reference in the figure.  Values 'y1' and 'y' reference to
 |          'yaxis' in 'layout', 'y2' references to 'yaxis2' in 'layout', and so
 |          on. Note that 'y1' will always refer to 'yaxis' or 'yaxis1' in
 |          'layout', they are the same.
 |
 |      showlegend [required=False] (value=a boolean: True | False):
 |          Toggle whether or not this trace will be labeled in the legend.
 |
 |      stream [required=False] (value=Stream object | dictionary-like object):
 |          Links a dictionary-like object that initializes this trace as a
 |          writable-stream, for use with the streaming API.
 |
 |          For more, run `help(plotly.graph_objs.Stream)`
 |
 |      visible [required=False] (value=a boolean: True | False):
 |          Toggles whether or not this object will be visible on the rendered
 |          figure.
 |
 |      x0 [required=False] (value=number):
 |          The location of the first coordinate of the x-axis. Use with 'dx' an
 |          alternative to an 'x' list or 1d numpy array. Has no effect if 'x'
 |          is set.
 |
 |      dx [required=False] (value=number):
 |          Spacing between x-axis coordinates. Use with 'x0' an alternative to
 |          an 'x' list or 1d numpy array. Has no effect if 'x' is set.
 |
 |      y0 [required=False] (value=number):
 |          The location of the first coordinate of the y-axis. Use with 'dy' an
 |          alternative to an 'y' list or 1d numpy array. Has no effect if 'y'
 |          is set.
 |
 |      dy [required=False] (value=number):
 |          Spacing between y-axis coordinates. Use with 'y0' an alternative to
 |          an 'y' list or 1d numpy array. Has no effect if 'y' is set.
 |
 |      xtype [required=False] (value='array' | 'scaled'):
 |          If set to 'scaled' and 'x' is linked to a list or 1d numpy array,
 |          then the horizontal labels are scaled to a list or 1d numpy array of
 |          integers of unit step starting from 0.
 |
 |      ytype [required=False] (value='array' | 'scaled'):
 |          If set to 'scaled' and 'y' is linked to a list or 1d numpy array,
 |          then the vertical labels are scaled to a list or 1d numpy array of
 |          integers of unit step starting from 0.
 |
 |      type [required=False] (value='heatmap'):
 |          Plotly identifier for this data's trace type.
 |
 |  Method resolution order:
 |      Heatmap
 |      PlotlyTrace
 |      PlotlyDict
 |      __builtin__.dict
 |      __builtin__.object
 |
 |  Methods inherited from PlotlyTrace:
 |
 |  __init__(self, *args, **kwargs)
 |
 |  to_string(self, level=0, indent=4, eol='\n', pretty=True, max_chars=80)
 |      Returns a formatted string showing graph_obj constructors.
 |
 |      Example:
 |
 |          print(obj.to_string())
 |
 |      Keyword arguments:
 |      level (default = 0) -- set number of indentations to start with
 |      indent (default = 4) -- set indentation amount
 |      eol (default = '\n') -- set end of line character(s)
 |      pretty (default = True) -- curtail long list output with a '...'
 |      max_chars (default = 80) -- set max characters per line
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from PlotlyDict:
 |
 |  __setitem__(self, key, value)
 |
 |  force_clean(self, caller=True)
 |      Attempts to convert to graph_objs and call force_clean() on values.
 |
 |      Calling force_clean() on a PlotlyDict will ensure that the object is
 |      valid and may be sent to plotly. This process will also remove any
 |      entries that end up with a length == 0.
 |
 |      Careful! This will delete any invalid entries *silently*.
 |
 |  get_data(self)
 |      Returns the JSON for the plot with non-data elements stripped.
 |
 |  get_ordered(self, caller=True)
 |
 |  strip_style(self)
 |      Strip style from the current representation.
 |
 |      All PlotlyDicts and PlotlyLists are guaranteed to survive the
 |      stripping process, though they made be left empty. This is allowable.
 |
 |      Keys that will be stripped in this process are tagged with
 |      `'type': 'style'` in graph_objs_meta.json.
 |
 |      This process first attempts to convert nested collections from dicts
 |      or lists to subclasses of PlotlyList/PlotlyDict. This process forces
 |      a validation, which may throw exceptions.
 |
 |      Then, each of these objects call `strip_style` on themselves and so
 |      on, recursively until the entire structure has been validated and
 |      stripped.
 |
 |  to_graph_objs(self, caller=True)
 |      Walk obj, convert dicts and lists to plotly graph objs.
 |
 |      For each key in the object, if it corresponds to a special key that
 |      should be associated with a graph object, the ordinary dict or list
 |      will be reinitialized as a special PlotlyDict or PlotlyList of the
 |      appropriate `kind`.
 |
 |  update(self, dict1=None, **dict2)
 |      Update current dict with dict1 and then dict2.
 |
 |      This recursively updates the structure of the original dictionary-like
 |      object with the new entries in the second and third objects. This
 |      allows users to update with large, nested structures.
 |
 |      Note, because the dict2 packs up all the keyword arguments, you can
 |      specify the changes as a list of keyword agruments.
 |
 |      Examples:
 |      # update with dict
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      update_dict = dict(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj.update(update_dict)
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      # update with list of keyword arguments
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      obj.update(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      This 'fully' supports duck-typing in that the call signature is
 |      identical, however this differs slightly from the normal update
 |      method provided by Python's dictionaries.
 |
 |  validate(self, caller=True)
 |      Recursively check the validity of the keys in a PlotlyDict.
 |
 |      The valid keys constitute the entries in each object
 |      dictionary in graph_objs_meta.json
 |
 |      The validation process first requires that all nested collections be
 |      converted to the appropriate subclass of PlotlyDict/PlotlyList. Then,
 |      each of these objects call `validate` and so on, recursively,
 |      until the entire object has been validated.
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors inherited from PlotlyDict:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from __builtin__.dict:
 |
 |  __cmp__(...)
 |      x.__cmp__(y) &lt;==&gt; cmp(x,y)
 |
 |  __contains__(...)
 |      D.__contains__(k) -&gt; True if D has a key k, else False
 |
 |  __delitem__(...)
 |      x.__delitem__(y) &lt;==&gt; del x[y]
 |
 |  __eq__(...)
 |      x.__eq__(y) &lt;==&gt; x==y
 |
 |  __ge__(...)
 |      x.__ge__(y) &lt;==&gt; x&gt;=y
 |
 |  __getattribute__(...)
 |      x.__getattribute__('name') &lt;==&gt; x.name
 |
 |  __getitem__(...)
 |      x.__getitem__(y) &lt;==&gt; x[y]
 |
 |  __gt__(...)
 |      x.__gt__(y) &lt;==&gt; x&gt;y
 |
 |  __iter__(...)
 |      x.__iter__() &lt;==&gt; iter(x)
 |
 |  __le__(...)
 |      x.__le__(y) &lt;==&gt; x&lt;=y
 |
 |  __len__(...)
 |      x.__len__() &lt;==&gt; len(x)
 |
 |  __lt__(...)
 |      x.__lt__(y) &lt;==&gt; x&lt;y
 |
 |  __ne__(...)
 |      x.__ne__(y) &lt;==&gt; x!=y
 |
 |  __repr__(...)
 |      x.__repr__() &lt;==&gt; repr(x)
 |
 |  __sizeof__(...)
 |      D.__sizeof__() -&gt; size of D in memory, in bytes
 |
 |  clear(...)
 |      D.clear() -&gt; None.  Remove all items from D.
 |
 |  copy(...)
 |      D.copy() -&gt; a shallow copy of D
 |
 |  fromkeys(...)
 |      dict.fromkeys(S[,v]) -&gt; New dict with keys from S and values equal to v.
 |      v defaults to None.
 |
 |  get(...)
 |      D.get(k[,d]) -&gt; D[k] if k in D, else d.  d defaults to None.
 |
 |  has_key(...)
 |      D.has_key(k) -&gt; True if D has a key k, else False
 |
 |  items(...)
 |      D.items() -&gt; list of D's (key, value) pairs, as 2-tuples
 |
 |  iteritems(...)
 |      D.iteritems() -&gt; an iterator over the (key, value) items of D
 |
 |  iterkeys(...)
 |      D.iterkeys() -&gt; an iterator over the keys of D
 |
 |  itervalues(...)
 |      D.itervalues() -&gt; an iterator over the values of D
 |
 |  keys(...)
 |      D.keys() -&gt; list of D's keys
 |
 |  pop(...)
 |      D.pop(k[,d]) -&gt; v, remove specified key and return the corresponding value.
 |      If key is not found, d is returned if given, otherwise KeyError is raised
 |
 |  popitem(...)
 |      D.popitem() -&gt; (k, v), remove and return some (key, value) pair as a
 |      2-tuple; but raise KeyError if D is empty.
 |
 |  setdefault(...)
 |      D.setdefault(k[,d]) -&gt; D.get(k,d), also set D[k]=d if k not in D
 |
 |  values(...)
 |      D.values() -&gt; list of D's values
 |
 |  viewitems(...)
 |      D.viewitems() -&gt; a set-like object providing a view on D's items
 |
 |  viewkeys(...)
 |      D.viewkeys() -&gt; a set-like object providing a view on D's keys
 |
 |  viewvalues(...)
 |      D.viewvalues() -&gt; an object providing a view on D's values
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes inherited from __builtin__.dict:
 |
 |  __hash__ = None
 |
 |  __new__ = &lt;built-in method __new__ of type object&gt;
 |      T.__new__(S, ...) -&gt; a new object with type S, a subtype of T


</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <h5 id="Important-(2d-array-dimensions):">
       Important (2d array dimensions):
       <a class="anchor-link" href="#Important-(2d-array-dimensions):">
        ¶
       </a>
      </h5>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       2-dimension array sent to Plotly via the
       <code>
        'z'
       </code>
       key are plotted on a grid with as many partitions on the y-axis as there are rows in the 2D array and with as many partitions on the x-axis as there are columns in the 2D array. This is the same convention as in matplotlib.
      </p>
      <p>
       So, if
       <code>
        Z
       </code>
       is a 2D array, then element
       <code>
        Z[i][j]
       </code>
       (or
       <code>
        Z[i,j]
       </code>
       in a numpy array or matrix) is mapped to the ith partition of the y-axis starting from the bottom and the jth partition of the x-axis starting from the left.
      </p>
      <p>
       Morevover, note that:
      </p>
      <blockquote>
       <p>
        List of lists, numpy arrays and numpy matrices are valid values for the
        <code>
         'z'
        </code>
        key in
        <code>
         Heatmap
        </code>
        ,
        <code>
         Contour
        </code>
        ,
        <code>
         Histogram2d
        </code>
        and
        <code>
         Histogram2dContour
        </code>
        . However, at the moment, values for
        <code>
         'x'
        </code>
        and
        <code>
         'y'
        </code>
        must both be flat lists, 1d numpy arrays or 1d numpy matrices (map makers, we apologize).
       </p>
      </blockquote>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       For better readability, as a convention in this section:
      </p>
      <ul>
       <li>
        <p>
         Variables starting with
         <code>
          z
         </code>
         (lower case) link to 1D numpy arrays or flat lists, whereas
        </p>
       </li>
       <li>
        <p>
         Variables starting with
         <code>
          Z
         </code>
         (upper case) link to 2D numpy arrays or lists of lists.
        </p>
       </li>
      </ul>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       So, let's start with summing the daily bike traffic count across all 8 sites in the January-to-August dataframe:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[10]">
      <a class="prompt input_prompt" href="#in-[10]">
       In [10]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Row sum of dataframe, get a numpy array</span>
<span class="n">z_JanAug</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">df_JanAug</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

<span class="c"># The dataframe .sum() method ignores non-number (e.g. the date strings)</span>
<span class="c"># while computing the row (with axis=1) sum.</span>

<span class="c"># The resulting array is 1d, 1 entry per date from Jan to Aug</span>
<span class="n">z_JanAug</span><span class="o">.</span><span class="n">shape</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[10]">
        <a class="prompt output_prompt" href="#out[10]">
         Out[10]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
(243,)
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Next, we need to convert the 1D array to a 2D array where the columns correspond to the months (January to August) and the rows to the days of the month (1 to 31).
      </p>
      <p>
       The following code cell is a bit technical; hence, readers only interesting in heatmap plot styling ideas are invited to skip it.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[11]">
      <a class="prompt input_prompt" href="#in-[11]">
       In [11]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="kn">import</span> <span class="nn">datetime</span>  <span class="c"># (*) to manipulate date strings</span>

<span class="c"># Define a convertion function </span>
<span class="k">def</span> <span class="nf">dates_to_dayXmonth</span><span class="p">(</span><span class="n">df_in</span><span class="p">,</span> <span class="n">z_in</span><span class="p">):</span>

    <span class="n">dates</span> <span class="o">=</span> <span class="n">df_in</span><span class="p">[</span><span class="s">'Date'</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>  <span class="c"># make list of dates in dataframe</span>

    <span class="c"># (1.1) List of months for all item in dates </span>
    <span class="n">months</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="s">'</span><span class="si">%d</span><span class="s">/%m/%Y'</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%B'</span><span class="p">)</span>
                       <span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">dates</span><span class="p">])</span>

    <span class="c"># (1.2) Find indices of first day of the months</span>
    <span class="n">_</span><span class="p">,</span><span class="n">ind_tmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">months</span><span class="p">,</span><span class="n">return_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c"># -&gt; array([90,212,31,0, ...])</span>
    <span class="n">the_months_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">ind_tmp</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>      <span class="c"># -&gt; array([0,31,59,90, ...])</span>

    <span class="c"># (1*) Use these indices to make list months' name</span>
    <span class="n">the_months</span> <span class="o">=</span> <span class="n">months</span><span class="p">[</span><span class="n">the_months_ind</span><span class="p">]</span>
    <span class="n">N_the_months</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">the_months</span><span class="p">)</span>        <span class="c"># 8 months, in our case, from Jan to Aug</span>

    <span class="c"># (2*) Make list of days of the month </span>
    <span class="n">N_the_days</span> <span class="o">=</span> <span class="mi">31</span>
    <span class="n">the_days</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">N_the_days</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>  <span class="c"># [1, ..., 31]</span>

    <span class="c"># (3.1) Make tmp array filled with NaNs</span>
    <span class="n">Z_tmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">N_the_days</span><span class="p">,</span> <span class="n">N_the_months</span><span class="p">))</span>
    <span class="n">Z_tmp</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

    <span class="c"># (3.2) Make list of indices to fill in Z_tmp month by month</span>
    <span class="n">fill_i</span> <span class="o">=</span> <span class="n">the_months_ind</span> <span class="o">+</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">months</span><span class="p">)]</span>

    <span class="c"># (3.3) Loop through months</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N_the_months</span><span class="p">):</span>
        <span class="n">i0</span> <span class="o">=</span> <span class="n">fill_i</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>    <span class="c"># get start</span>
        <span class="n">i1</span> <span class="o">=</span> <span class="n">fill_i</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>  <span class="c">#  and end index</span>
        <span class="n">delta_i</span> <span class="o">=</span> <span class="n">i1</span><span class="o">-</span><span class="n">i0</span>   <span class="c"># compute their difference (either 30,31 or 28)</span>
        <span class="n">Z_tmp</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">delta_i</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">z_in</span><span class="p">[</span><span class="n">i0</span><span class="p">:</span><span class="n">i1</span><span class="p">]</span>  <span class="c"># fill in rows of </span>

    <span class="c"># (3*) Copy tmp array to output variable</span>
    <span class="n">Z</span> <span class="o">=</span> <span class="n">Z_tmp</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">the_months</span><span class="p">,</span> <span class="n">the_days</span><span class="p">,</span> <span class="n">Z</span><span class="p">)</span>  <span class="c"># output coordinates for our plot</span>

<span class="c"># Call function, get coordinates for our plot</span>
<span class="n">the_months_JanAug</span><span class="p">,</span> <span class="n">the_days</span><span class="p">,</span> <span class="n">Z_dayXmonth_JanAug</span> <span class="o">=</span> <span class="n">dates_to_dayXmonth</span><span class="p">(</span><span class="n">df_JanAug</span><span class="p">,</span><span class="n">z_JanAug</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Ok. So, now we have a 1D array of x-axis labels, a 1D array of y-axis labels and a 2D array corresponding to our heatmap.
      </p>
      <p>
       Before building the Plotly graph object, let's check the dimensions of our arrays:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[12]">
      <a class="prompt input_prompt" href="#in-[12]">
       In [12]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Dimensions of array to be used for our next plot</span>
<span class="n">Z_dayXmonth_JanAug</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">the_months_JanAug</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">the_days</span><span class="o">.</span><span class="n">shape</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[12]">
        <a class="prompt output_prompt" href="#out[12]">
         Out[12]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
((31, 8), (8,), (31,))
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       The arrays are compatible, as the 2D array has as many rows as the array of y-axis labels and has as many columns as the array of x-axis labels.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <h5 id="Plotly's-pre-defined-color-scales">
       Plotly's pre-defined color scales
       <a class="anchor-link" href="#Plotly's-pre-defined-color-scales">
        ¶
       </a>
      </h5>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Next, we select a colormap to be linked to the
       <code>
        'scl'
       </code>
       key  (
       <code>
        'scl'
       </code>
       for scale) in
       <code>
        Heatmap
       </code>
       .  In the
       <a href="#Seaborn-styling-in-Plotly">
        next subsection
       </a>
       we define a custom colormap, but for now let's choose one from Plotly's selection of pre-defined colormaps. These are
      </p>
      <p>
       <img src="{{site.staticurl}}/images/py-user-guide-img/image12.png"/>
      </p>
      <p>
       and their associated names from left to right:
      </p>
      <ol>
       <li>
        <code>
         'Greys'
        </code>
        , black to light-grey
       </li>
       <li>
        <code>
         'YIGnBu'
        </code>
        , white to green to blue to dark-blue
       </li>
       <li>
        <code>
         'Greens'
        </code>
        , dark-green to light-green
       </li>
       <li>
        <code>
         'YIOrRd'
        </code>
        , red to orange to gold to tan to white
       </li>
       <li>
        <code>
         'Bluered'
        </code>
        , bright-blue to purple to bright-red
       </li>
       <li>
        <code>
         'RdBu'
        </code>
        , blue to red (dim, the default color scale)
       </li>
       <li>
        <code>
         'Picnic'
        </code>
        ,  blue to light-blue to white to pink to red
       </li>
       <li>
        <em>
         currently only available from the GUI
        </em>
        , a slight alternative to
        <code>
         'Jet'
        </code>
       </li>
       <li>
        <code>
         'Portland'
        </code>
        , blue to green to yellow to orange to red (dim)
       </li>
       <li>
        <code>
         'Jet'
        </code>
        ,  blue to light-blue to green to yellow to orange to red (bright)
       </li>
       <li>
        <code>
         'Hot'
        </code>
        ,  tan to yellow to red to black
       </li>
       <li>
        <code>
         'Blackbody'
        </code>
        , black to red to yellow to white to light-blue
       </li>
       <li>
        <code>
         'Earth'
        </code>
        , blue to green to yellow to brown to tan to white
       </li>
       <li>
        <code>
         'Electric'
        </code>
        , black to purple to orange to yellow to tan to white
       </li>
      </ol>
      <p>
       where the colors listed are mapped from low to high values.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Select
       <code>
        'YIGnBu'
       </code>
       for our plot and make a heatmap object:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[13]">
      <a class="prompt input_prompt" href="#in-[13]">
       In [13]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Make heatmap object</span>
<span class="n">trace1</span> <span class="o">=</span> <span class="n">Heatmap</span><span class="p">(</span>
    <span class="n">z</span><span class="o">=</span><span class="n">Z_dayXmonth_JanAug</span><span class="p">,</span>  <span class="c"># link 2D array</span>
    <span class="n">x</span><span class="o">=</span><span class="n">the_months_JanAug</span><span class="p">,</span>   <span class="c"># link x-axis labels</span>
    <span class="n">y</span><span class="o">=</span><span class="n">the_days</span><span class="p">,</span>            <span class="c"># link y-axis labels</span>
    <span class="n">colorscale</span><span class="o">=</span><span class="s">'YIGnBu'</span><span class="p">,</span>   <span class="c"># (!) select pre-defined colormap</span>
    <span class="n">reversescale</span><span class="o">=</span><span class="bp">True</span>      <span class="c"># (!) reverve color ordering</span>
<span class="p">)</span>

<span class="c"># Link it up in a data object</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">([</span><span class="n">trace1</span><span class="p">])</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Experienced Plotly users should note:
      </p>
      <blockquote>
       <p>
        Keys
        <code>
         'colorscale'
        </code>
        and
        <code>
         'reversescale'
        </code>
        now replace (and are equivalent to) the old keys
        <code>
         'scl'
        </code>
        and
        <code>
         'reversescl'
        </code>
        respectively. We made the change in an effort to have more descriptive key names.
       </p>
      </blockquote>
      <p>
       That said, in version 1.2.3 and up,
       <code>
        'scl'
       </code>
       and
       <code>
        'reversescl'
       </code>
       are converted (and accompanied by a friendly warning) by the Plotly Python package before being sent to Plotly. So, statements like this one:
      </p>
      <pre><code>&gt;&gt;&gt; trace1 = Heatmap(
        z=[[1,2,3], [3,4,5]],
        scl='YIGnBu',
        reversescl=True
    )
</code></pre>
      <p>
       still passes validation.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Where we reversed the color ordering with
       <code>
        reversescale=True
       </code>
       so that, in this case, low values will be plotted in white and high values in dark-blue.
      </p>
      <p>
       Next, make a layout object:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[14]">
      <a class="prompt input_prompt" href="#in-[14]">
       In [14]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">width</span> <span class="o">=</span> <span class="mi">650</span>   <span class="c"># plot width </span>
<span class="n">height</span> <span class="o">=</span> <span class="mi">800</span>  <span class="c"># plot height</span>

<span class="n">title</span> <span class="o">=</span> <span class="s">"Fig 5.1a: Bike traffic daily totals </span><span class="se">\</span>
<span class="s">across 8 Montreal sites in 2013"</span>                <span class="c"># plot's title</span>

<span class="n">layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>  <span class="c"># set plot's title</span>
    <span class="n">font</span><span class="o">=</span><span class="n">Font</span><span class="p">(</span>
        <span class="n">family</span><span class="o">=</span><span class="s">"Droid Sans, sans-serif"</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">xaxis</span><span class="o">=</span><span class="n">XAxis</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s">'Months in sample'</span><span class="p">,</span>  <span class="c"># x-axis title</span>
        <span class="n">showgrid</span><span class="o">=</span><span class="bp">False</span>             <span class="c"># remove grid</span>
    <span class="p">),</span>
    <span class="n">yaxis</span><span class="o">=</span><span class="n">YAxis</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s">'Days of the month'</span><span class="p">,</span> <span class="c"># y-axis title</span>
        <span class="n">autorange</span><span class="o">=</span><span class="s">'reversed'</span><span class="p">,</span>  <span class="c"># (!) reverse tick ordering</span>
        <span class="n">showgrid</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>   <span class="c"># remove grid</span>
        <span class="n">autotick</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>   <span class="c"># custom ticks</span>
        <span class="n">dtick</span><span class="o">=</span><span class="mi">1</span>           <span class="c"># show 1 tick per day</span>
    <span class="p">),</span>
    <span class="n">autosize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="c"># custom size</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>   <span class="c"># plot's height in pixels </span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span>      <span class="c"># plot's width in pixels</span>
<span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       In the above, we reverse the order of the y-axis with
       <code>
        autorange='reversed'
       </code>
       in
       <code>
        YAxis
       </code>
       so that day 1 appears on the top of the y-axis instead of at the bottom. Alternatively, we could have reversed the order of the y-label array and flipped the 2D array accordingly.
      </p>
      <p>
       Next, let's add an annotation citing our data source:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[15]">
      <a class="prompt input_prompt" href="#in-[15]">
       In [15]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># String citing the data source</span>
<span class="n">url</span><span class="o">=</span><span class="s">'http://donnees.ville.montreal.qc.ca/dataset/velos-comptage'</span>
<span class="n">text_source</span> <span class="o">=</span> <span class="s">"Source and info: &lt;a href=</span><span class="se">\"</span><span class="s">{}</span><span class="se">\"</span><span class="s">&gt;</span><span class="se">\</span>
<span class="s">Données ouvertes de la Ville de Montréal&lt;/a&gt;"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c"># Annotation generating function, </span>
<span class="c">#  to be used in all plots in this section</span>
<span class="k">def</span> <span class="nf">make_anno</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">text_source</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Annotation</span><span class="p">(</span>
        <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>          <span class="c"># annotation text</span>
        <span class="n">showarrow</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>    <span class="c"># remove arrow </span>
        <span class="n">xref</span><span class="o">=</span><span class="s">'paper'</span><span class="p">,</span>     <span class="c"># use paper coords</span>
        <span class="n">yref</span><span class="o">=</span><span class="s">'paper'</span><span class="p">,</span>     <span class="c">#  for both coordinates</span>
        <span class="n">xanchor</span><span class="o">=</span><span class="s">'right'</span><span class="p">,</span>  <span class="c"># x-coord line up with right end of text </span>
        <span class="n">yanchor</span><span class="o">=</span><span class="s">'bottom'</span><span class="p">,</span> <span class="c"># y-coord line up with bottom end of text </span>
        <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>              <span class="c"># position's x-coord</span>
        <span class="n">y</span><span class="o">=</span><span class="n">y</span>               <span class="c">#   and y-coord</span>
    <span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[16]">
      <a class="prompt input_prompt" href="#in-[16]">
       In [16]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Add an annotation citing the data source</span>
<span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">annotations</span><span class="o">=</span><span class="p">[</span><span class="n">make_anno</span><span class="p">()])</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       And now package the layout and data object into the figure object and send it to Plotly:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[17]">
      <a class="prompt input_prompt" href="#in-[17]">
       In [17]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Make a figure object</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="c"># (@) Send figure object to Plotly, show result in notebook</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">'s5_cyclists-per-day'</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>

<span class="c"># adjust output cell with 'width' and 'height'</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[17]">
        <a class="prompt output_prompt" href="#out[17]">
         Out[17]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <iframe height="800" id="igraph" scrolling="no" seamless="seamless" src="https://plot.ly/~etpinard/251.embed?width=625&amp;height=775" style="border:none;" width="650">
        </iframe>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Not bad.
      </p>
      <p>
       These numbers may seem a little high, but note that a particular cyclist can pass by one or multiple counter sites several times during the same day.
      </p>
      <p>
       Months will less than 31 days have blank cells showing as
       <code>
        z=null
       </code>
       on hover. They correspond to NaNs (Not-a-Number) values in the 2D array.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       A few additional comments on Plotly heatmaps:
      </p>
      <ul>
       <li>
        <p>
         By default, the color scale and the colorbar extend from the 2D array's minimum value to its maximum value. This behavior can be modified, as we will see in
         <a href="#Custom-color-scales-in-Plotly">
          subsection 5.2
         </a>
         .
        </p>
       </li>
       <li>
        <p>
         The heatmap data can be smoothed for using the '
         <code>
          zsmooth'
         </code>
         which has three possible values
         <code>
          'fast'
         </code>
         ,
         <code>
          'best'
         </code>
         and
         <code>
          False
         </code>
         (the default value). Smoothing decreases the color gradient between partitions. See an examples in
         <a href="#5.4-Joint-daily-traffic-probability-distribution-for-2-sites">
          subsection 5.4
         </a>
         .
        </p>
       </li>
       <li>
        <p>
         The opacity of the color scale can be modified with the
         <code>
          'opacity'
         </code>
         key in
         <code>
          Heatmap
         </code>
         . A value of 0 correspond to a fully transparent color scale and 1 (the default) a fully opaque.
        </p>
       </li>
      </ul>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Now, comparing bike traffic for some day of month (1,2,..,31) across all month may not be the most informative analysis. Why would June 9 and July 9 show the same patterns in bike traffic? That said, comparing day of week totals could be. We expect week day (Monday to Friday) to be higher than weekend totals. Now, let's see by how much.
      </p>
      <p>
       For subsequent analysis, we will drop the lesser-trafficked months of January, February and March. The corresponding dataframe and ararys are named without suffixes from this point on. So, first we trim the January to August dataframe:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[18]">
      <a class="prompt input_prompt" href="#in-[18]">
       In [18]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># List of booleans corresponding to days in Apr to Aug</span>
<span class="n">i_AprAug</span> <span class="o">=</span> <span class="p">[</span><span class="s">'/01/'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">date</span>
                <span class="ow">and</span> <span class="s">'/02/'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">date</span>
                <span class="ow">and</span> <span class="s">'/03/'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">date</span>
                    <span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">df_JanAug</span><span class="p">[</span><span class="s">'Date'</span><span class="p">]]</span>

<span class="c"># Trim the Jan, Feb and Mar days in df_JanAug</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df_JanAug</span><span class="p">[</span><span class="n">i_AprAug</span><span class="p">]</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>  <span class="c"># dataframe now starts on April 1st</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[18]">
        <a class="prompt output_prompt" href="#out[18]">
         Out[18]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
         <table border="1" class="dataframe">
          <thead>
           <tr style="text-align: right;">
            <th>
            </th>
            <th>
             Date
            </th>
            <th>
             Unnamed: 1
            </th>
            <th>
             Berri1
            </th>
            <th>
             CSC
            </th>
            <th>
             Mais1
            </th>
            <th>
             Mais2
            </th>
            <th>
             Parc
            </th>
            <th>
             PierDup
            </th>
            <th>
             Rachel1
            </th>
            <th>
             Totem_Laurier
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <th>
             90
            </th>
            <td>
             01/04/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             371
            </td>
            <td>
             245
            </td>
            <td>
             276
            </td>
            <td>
             608
            </td>
            <td>
             343
            </td>
            <td>
             66
            </td>
            <td>
             2315
            </td>
            <td>
             524
            </td>
           </tr>
           <tr>
            <th>
             91
            </th>
            <td>
             02/04/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             1055
            </td>
            <td>
             547
            </td>
            <td>
             669
            </td>
            <td>
             1316
            </td>
            <td>
             840
            </td>
            <td>
             105
            </td>
            <td>
             2835
            </td>
            <td>
             818
            </td>
           </tr>
           <tr>
            <th>
             92
            </th>
            <td>
             03/04/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             1030
            </td>
            <td>
             614
            </td>
            <td>
             719
            </td>
            <td>
             1470
            </td>
            <td>
             869
            </td>
            <td>
             119
            </td>
            <td>
             3085
            </td>
            <td>
             947
            </td>
           </tr>
           <tr>
            <th>
             93
            </th>
            <td>
             04/04/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             1466
            </td>
            <td>
             855
            </td>
            <td>
             1027
            </td>
            <td>
             2022
            </td>
            <td>
             1243
            </td>
            <td>
             261
            </td>
            <td>
             2492
            </td>
            <td>
             1147
            </td>
           </tr>
           <tr>
            <th>
             94
            </th>
            <td>
             05/04/2013
            </td>
            <td>
             00:00
            </td>
            <td>
             1098
            </td>
            <td>
             543
            </td>
            <td>
             723
            </td>
            <td>
             1384
            </td>
            <td>
             761
            </td>
            <td>
             145
            </td>
            <td>
             2553
            </td>
            <td>
             995
            </td>
           </tr>
          </tbody>
         </table>
         <p>
          5 rows × 10 columns
         </p>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Perform the same operation as before to get the daily totals for all sites combined:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[19]">
      <a class="prompt input_prompt" href="#in-[19]">
       In [19]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Row sum of dataframe, get a numpy array</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

<span class="c"># The dataframe .sum() method ignores non-number (e.g. the date strings)</span>
<span class="c"># while computing the row (with axis=1) sum.</span>

<span class="c"># The resulting array is 1d, 1 entry per date from Apr to Aug</span>
<span class="n">z</span><span class="o">.</span><span class="n">shape</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[19]">
        <a class="prompt output_prompt" href="#out[19]">
         Out[19]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
(153,)
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Now, we convert the daily total 1D array into a 2D array of mean traffic for each day of week for each month. Readers only interesting in heatmap plot styling ideas are invited to skip it.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[20]">
      <a class="prompt input_prompt" href="#in-[20]">
       In [20]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># (*) Here again, we use the datetime module in this code cell</span>

<span class="c"># Define another convertion function</span>
<span class="k">def</span> <span class="nf">dates_to_wdayXmonth</span><span class="p">(</span><span class="n">df_in</span><span class="p">,</span> <span class="n">z_in</span><span class="p">):</span>

    <span class="n">dates</span> <span class="o">=</span> <span class="n">df_in</span><span class="p">[</span><span class="s">'Date'</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>  <span class="c"># make list of dates in dataframe</span>

    <span class="c"># (1.1) List of months for all item in dates</span>
    <span class="n">months</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s">'</span><span class="si">%d</span><span class="s">/%m/%Y'</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%B'</span><span class="p">)</span>
                       <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dates</span><span class="p">])</span>

    <span class="c"># (1.2) Find indices of first day of the months</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">ind_tmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">months</span><span class="p">,</span><span class="n">return_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c"># -&gt; array([0,122,91,61,30])</span>
    <span class="n">the_months_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">ind_tmp</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>       <span class="c"># -&gt; array([0,30,61,91,122])</span>

    <span class="c"># (1*) Use these indices to make list months' names</span>
    <span class="n">the_months</span> <span class="o">=</span> <span class="n">months</span><span class="p">[</span><span class="n">the_months_ind</span><span class="p">]</span>
    <span class="n">N_the_months</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">the_months</span><span class="p">)</span>      <span class="c"># 5 months, in our case, from Apr to Aug</span>

    <span class="c"># (2.1) List of week day names for all items in dates</span>
    <span class="n">wdays</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s">'</span><span class="si">%d</span><span class="s">/%m/%Y'</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%A'</span><span class="p">)</span>
                       <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dates</span><span class="p">])</span>

    <span class="c"># (2*) Make list of week day names</span>
    <span class="n">the_wdays</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s">'Monday'</span><span class="p">,</span> <span class="s">'Tuesday'</span><span class="p">,</span> <span class="s">'Wednesday'</span><span class="p">,</span>
                          <span class="s">'Thursday'</span><span class="p">,</span> <span class="s">'Friday'</span><span class="p">,</span>
                          <span class="s">'Saturday'</span><span class="p">,</span> <span class="s">'Sunday'</span><span class="p">])</span>
    <span class="n">N_the_wdays</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">the_wdays</span><span class="p">)</span>  <span class="c"># 7 days in a week</span>

    <span class="c"># (3.1) Init. tmp array 7 days-of-week by 5 months </span>
    <span class="n">Z_tmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">N_the_wdays</span><span class="p">,</span> <span class="n">N_the_months</span><span class="p">))</span>

    <span class="n">i_month</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c"># init. month counter</span>

    <span class="k">for</span> <span class="n">the_month</span> <span class="ow">in</span> <span class="n">the_months</span><span class="p">:</span>  <span class="c"># loop through the months</span>

        <span class="c"># (3.2) Find indices corresp. to the_month, trim wdays and z_in</span>
        <span class="n">ind_month</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">months</span><span class="o">==</span><span class="n">the_month</span><span class="p">)</span>
        <span class="n">wdays_month</span> <span class="o">=</span> <span class="n">wdays</span><span class="p">[</span><span class="n">ind_month</span><span class="p">]</span>
        <span class="n">z_month</span> <span class="o">=</span> <span class="n">z_in</span><span class="p">[</span><span class="n">ind_month</span><span class="p">]</span>

        <span class="n">i_wday</span> <span class="o">=</span> <span class="mi">0</span> <span class="c"># init/re-init week day counter</span>

        <span class="k">for</span> <span class="n">the_wday</span> <span class="ow">in</span> <span class="n">the_wdays</span><span class="p">:</span>   <span class="c"># loop through the week days</span>

            <span class="c"># (3.3) Find indices corresp. to the week day, trim z_month, </span>
            <span class="c">#       fill in Z_tmp with mean value</span>
            <span class="n">ind_month_wday</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">wdays_month</span><span class="o">==</span><span class="n">the_wday</span><span class="p">)</span>
            <span class="n">Z_tmp</span><span class="p">[</span><span class="n">i_wday</span><span class="p">,</span> <span class="n">i_month</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">z_month</span><span class="p">[</span><span class="n">ind_month_wday</span><span class="p">])</span>

            <span class="n">i_wday</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c"># inc. week day counter</span>

        <span class="n">i_month</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c"># inc. month counter</span>

    <span class="c"># (3*) Copy tmp array to output variable</span>
    <span class="n">Z</span> <span class="o">=</span> <span class="n">Z_tmp</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">the_months</span><span class="p">,</span> <span class="n">the_wdays</span><span class="p">,</span> <span class="n">Z</span><span class="p">)</span>  <span class="c"># output coordinates for our next plot</span>

<span class="c"># Call conversion function, get coordinates for our next plot</span>
<span class="n">the_months</span><span class="p">,</span> <span class="n">the_wdays</span><span class="p">,</span> <span class="n">Z_dayXwday</span> <span class="o">=</span> <span class="n">dates_to_wdayXmonth</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">z</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       A quick check on the dimensions:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[21]">
      <a class="prompt input_prompt" href="#in-[21]">
       In [21]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Dimensions of array to be used for our next plot</span>
<span class="n">Z_dayXwday</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">the_months</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">the_wdays</span><span class="o">.</span><span class="n">shape</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[21]">
        <a class="prompt output_prompt" href="#out[21]">
         Out[21]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
((7, 5), (5,), (7,))
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Next, make the y-axis labels plural (e.g. Mondays instead of Monday) and normalized the 2D array by its maximum value:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[22]">
      <a class="prompt input_prompt" href="#in-[22]">
       In [22]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Make y-axis labels plural </span>
<span class="n">the_wdays_pl</span> <span class="o">=</span> <span class="p">[</span><span class="n">the_wday</span> <span class="o">+</span> <span class="s">'s'</span> <span class="k">for</span> <span class="n">the_wday</span> <span class="ow">in</span> <span class="n">the_wdays</span><span class="p">]</span>

<span class="c"># Normalize 2D array by max value</span>
<span class="n">Z_dayXwday_norm</span> <span class="o">=</span> <span class="n">Z_dayXwday</span> <span class="o">/</span> <span class="n">Z_dayXwday</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Tweak the colorbar using the colorbar graph object:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[23]">
      <a class="prompt input_prompt" href="#in-[23]">
       In [23]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">help</span><span class="p">(</span><span class="n">ColorBar</span><span class="p">)</span>  <span class="c"># call help!</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt">
       </div>
       <div class="output_subarea output_stream output_stdout output_text">
        <pre>
Help on class ColorBar in module plotly.graph_objs.graph_objs:

class ColorBar(PlotlyDict)
 |  A dictionary-like object object for representing a color bar in plotly.
 |
 |  Parent key:
 |
 |      colorbar
 |
 |  Quick method reference:
 |
 |      ColorBar.update(changes)
 |      ColorBar.strip_style()
 |      ColorBar.get_data()
 |      ColorBar.to_graph_objs()
 |      ColorBar.validate()
 |      ColorBar.to_string()
 |      ColorBar.force_clean()
 |
 |  Valid keys:
 |
 |      title [required=False] (value=a string):
 |          The title of the colorbar.
 |
 |      titleside [required=False] (value='right' | 'top' | 'bottom'):
 |          Location of colorbar title with respect to the colorbar.
 |
 |      titlefont [required=False] (value=Font object | dictionary-like object):
 |          Links a dictionary-like object describing the font settings of the
 |          colorbar title.
 |
 |          For more, run `help(plotly.graph_objs.Font)`
 |
 |      thickness [required=False] (value=number: x &gt;= 0):
 |          Sets the thickness of the line surrounding the colorbar.
 |
 |      thicknessmode [required=False] (value=string: 'pixels' | 'fraction' ):
 |          Sets thickness unit mode.
 |
 |      len [required=False] (value=number: x &gt;= 0):
 |          Sets the length of the colorbar.
 |
 |      lenmode [required=False] (value=string: 'pixels' | 'fraction' ):
 |          Sets length unit mode.
 |
 |      autotick [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the colorbar ticks parameters are picked
 |          automatically by Plotly. Once 'autotick' is set to False, the
 |          colorbar ticks parameters can be declared with 'ticks', 'tick0',
 |          'dtick0' and other tick-related key in this colorbar object.
 |
 |      nticks [required=False] (value=number: x &gt; 0):
 |          Sets the number of colorbar ticks. No need to set 'autoticks' to
 |          False for 'nticks' to apply.
 |
 |      ticks [required=False] (value='' | 'inside' | 'outside'):
 |          Sets the format of the ticks on this colorbar. For hidden ticks,
 |          link 'ticks' to an empty string.
 |
 |      showticklabels [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the colorbar ticks will feature tick labels.
 |
 |      tick0 [required=False] (value=number):
 |          Sets the starting point of the ticks of this colorbar.
 |
 |      dtick [required=False] (value=number):
 |          Sets the distance between ticks on this colorbar.
 |
 |      ticklen [required=False] (value=number):
 |          Sets the length of the tick lines on this colorbar.
 |
 |      tickwidth [required=False] (value=number: x &gt; 0):
 |          Sets the width of the tick lines on this colorbar.
 |
 |      tickcolor [required=False] (value=a string describing color):
 |          Sets the color of the tick lines on this colorbar.
 |
 |          Examples:
 |              'green' | 'rgb(0, 255, 0)' | 'rgba(0, 255, 0, 0.3)' |
 |              'hsl(120,100%,50%)' | 'hsla(120,100%,50%,0.3)' | '#434F1D'
 |
 |      tickangle [required=False] (value=number: x in [-90, 90]):
 |          Sets the angle in degrees of the ticks on this colorbar.
 |
 |      tickfont [required=False] (value=Font object | dictionary-like object):
 |          Links a dictionary-like object defining the parameters of the ticks'
 |          font.
 |
 |          For more, run `help(plotly.graph_objs.Font)`
 |
 |      exponentformat [required=False] (value='none' | 'e' | 'E' | 'power' |
 |      'SI' | 'B'):
 |          Sets how exponents show up. Here's how the number 1000000000 (1
 |          billion) shows up in each. If set to 'none': 1,000,000,000. If set
 |          to 'e': 1e+9. If set to 'E': 1E+9. If set to 'power': 1x10^9 (where
 |          the 9 will appear super-scripted). If set to 'SI': 1G. If set to
 |          'B': 1B (useful when referring to currency).
 |
 |      showexponent [required=False] (value='all' | 'first' | 'last' | 'none'):
 |          If set to 'all', ALL exponents will be shown appended to their
 |          significands. If set to 'first', the first tick's exponent will be
 |          appended to its significand, however no other exponents will appear
 |          --only the significands. If set to 'last', the last tick's exponent
 |          will be appended to its significand, however no other exponents will
 |          appear--only the significands. If set to 'none', no exponents will
 |          appear, only the significands.
 |
 |      x [required=False] (value=number):
 |          Sets the 'x' position of this colorbar.
 |
 |      y [required=False] (value=number):
 |          Sets the 'y' position of this colorbar.
 |
 |      xanchor [required=False] (value='auto' | 'left' | 'center' | 'right'):
 |          Sets the horizontal position anchor of this colorbar. That is, bind
 |          the position set with the 'x' key to the 'left' or 'center' or
 |          'right' of this colorbar.
 |
 |      yanchor [required=False] (value='auto' | 'bottom' | 'middle' | 'top'):
 |          Sets the vertical position anchor of this colorbar. That is, bind
 |          the position set with the 'y' key to the 'bottom' or 'middle' or
 |          'top' of this colorbar.
 |
 |      bgcolor [required=False] (value=a string describing color):
 |          Sets the background (bg) color of this colorbar.
 |
 |          Examples:
 |              'green' | 'rgb(0, 255, 0)' | 'rgba(0, 255, 0, 0.3)' |
 |              'hsl(120,100%,50%)' | 'hsla(120,100%,50%,0.3)' | '#434F1D'
 |
 |      outlinecolor [required=False] (value=a string describing color):
 |          The color of the outline surrounding this colorbar.
 |
 |          Examples:
 |              'green' | 'rgb(0, 255, 0)' | 'rgba(0, 255, 0, 0.3)' |
 |              'hsl(120,100%,50%)' | 'hsla(120,100%,50%,0.3)' | '#434F1D'
 |
 |      outlinewidth [required=False] (value=number):
 |          Sets the width of the outline surrounding this colorbar.
 |
 |      bordercolor [required=False] (value=a string describing color):
 |          Sets the color of the enclosing boarder of this colorbar.
 |
 |          Examples:
 |              'green' | 'rgb(0, 255, 0)' | 'rgba(0, 255, 0, 0.3)' |
 |              'hsl(120,100%,50%)' | 'hsla(120,100%,50%,0.3)' | '#434F1D'
 |
 |      borderwidth [required=False] (value=number: x &gt;= 0):
 |          Sets the width of the boarder enclosing this colorbar
 |
 |      xpad [required=False] (value=number: x in [0, 50]):
 |          Sets the amount of space (padding) between the colorbar and the
 |          enclosing boarder in the x-direction.
 |
 |      ypad [required=False] (value=number: x in [0, 50]):
 |          Sets the amount of space (padding) between the colorbar and the
 |          enclosing boarder in the y-direction.
 |
 |  Method resolution order:
 |      ColorBar
 |      PlotlyDict
 |      __builtin__.dict
 |      __builtin__.object
 |
 |  Methods inherited from PlotlyDict:
 |
 |  __init__(self, *args, **kwargs)
 |
 |  __setitem__(self, key, value)
 |
 |  force_clean(self, caller=True)
 |      Attempts to convert to graph_objs and call force_clean() on values.
 |
 |      Calling force_clean() on a PlotlyDict will ensure that the object is
 |      valid and may be sent to plotly. This process will also remove any
 |      entries that end up with a length == 0.
 |
 |      Careful! This will delete any invalid entries *silently*.
 |
 |  get_data(self)
 |      Returns the JSON for the plot with non-data elements stripped.
 |
 |  get_ordered(self, caller=True)
 |
 |  strip_style(self)
 |      Strip style from the current representation.
 |
 |      All PlotlyDicts and PlotlyLists are guaranteed to survive the
 |      stripping process, though they made be left empty. This is allowable.
 |
 |      Keys that will be stripped in this process are tagged with
 |      `'type': 'style'` in graph_objs_meta.json.
 |
 |      This process first attempts to convert nested collections from dicts
 |      or lists to subclasses of PlotlyList/PlotlyDict. This process forces
 |      a validation, which may throw exceptions.
 |
 |      Then, each of these objects call `strip_style` on themselves and so
 |      on, recursively until the entire structure has been validated and
 |      stripped.
 |
 |  to_graph_objs(self, caller=True)
 |      Walk obj, convert dicts and lists to plotly graph objs.
 |
 |      For each key in the object, if it corresponds to a special key that
 |      should be associated with a graph object, the ordinary dict or list
 |      will be reinitialized as a special PlotlyDict or PlotlyList of the
 |      appropriate `kind`.
 |
 |  to_string(self, level=0, indent=4, eol='\n', pretty=True, max_chars=80)
 |      Returns a formatted string showing graph_obj constructors.
 |
 |      Example:
 |
 |          print(obj.to_string())
 |
 |      Keyword arguments:
 |      level (default = 0) -- set number of indentations to start with
 |      indent (default = 4) -- set indentation amount
 |      eol (default = '\n') -- set end of line character(s)
 |      pretty (default = True) -- curtail long list output with a '...'
 |      max_chars (default = 80) -- set max characters per line
 |
 |  update(self, dict1=None, **dict2)
 |      Update current dict with dict1 and then dict2.
 |
 |      This recursively updates the structure of the original dictionary-like
 |      object with the new entries in the second and third objects. This
 |      allows users to update with large, nested structures.
 |
 |      Note, because the dict2 packs up all the keyword arguments, you can
 |      specify the changes as a list of keyword agruments.
 |
 |      Examples:
 |      # update with dict
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      update_dict = dict(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj.update(update_dict)
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      # update with list of keyword arguments
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      obj.update(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      This 'fully' supports duck-typing in that the call signature is
 |      identical, however this differs slightly from the normal update
 |      method provided by Python's dictionaries.
 |
 |  validate(self, caller=True)
 |      Recursively check the validity of the keys in a PlotlyDict.
 |
 |      The valid keys constitute the entries in each object
 |      dictionary in graph_objs_meta.json
 |
 |      The validation process first requires that all nested collections be
 |      converted to the appropriate subclass of PlotlyDict/PlotlyList. Then,
 |      each of these objects call `validate` and so on, recursively,
 |      until the entire object has been validated.
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors inherited from PlotlyDict:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from __builtin__.dict:
 |
 |  __cmp__(...)
 |      x.__cmp__(y) &lt;==&gt; cmp(x,y)
 |
 |  __contains__(...)
 |      D.__contains__(k) -&gt; True if D has a key k, else False
 |
 |  __delitem__(...)
 |      x.__delitem__(y) &lt;==&gt; del x[y]
 |
 |  __eq__(...)
 |      x.__eq__(y) &lt;==&gt; x==y
 |
 |  __ge__(...)
 |      x.__ge__(y) &lt;==&gt; x&gt;=y
 |
 |  __getattribute__(...)
 |      x.__getattribute__('name') &lt;==&gt; x.name
 |
 |  __getitem__(...)
 |      x.__getitem__(y) &lt;==&gt; x[y]
 |
 |  __gt__(...)
 |      x.__gt__(y) &lt;==&gt; x&gt;y
 |
 |  __iter__(...)
 |      x.__iter__() &lt;==&gt; iter(x)
 |
 |  __le__(...)
 |      x.__le__(y) &lt;==&gt; x&lt;=y
 |
 |  __len__(...)
 |      x.__len__() &lt;==&gt; len(x)
 |
 |  __lt__(...)
 |      x.__lt__(y) &lt;==&gt; x&lt;y
 |
 |  __ne__(...)
 |      x.__ne__(y) &lt;==&gt; x!=y
 |
 |  __repr__(...)
 |      x.__repr__() &lt;==&gt; repr(x)
 |
 |  __sizeof__(...)
 |      D.__sizeof__() -&gt; size of D in memory, in bytes
 |
 |  clear(...)
 |      D.clear() -&gt; None.  Remove all items from D.
 |
 |  copy(...)
 |      D.copy() -&gt; a shallow copy of D
 |
 |  fromkeys(...)
 |      dict.fromkeys(S[,v]) -&gt; New dict with keys from S and values equal to v.
 |      v defaults to None.
 |
 |  get(...)
 |      D.get(k[,d]) -&gt; D[k] if k in D, else d.  d defaults to None.
 |
 |  has_key(...)
 |      D.has_key(k) -&gt; True if D has a key k, else False
 |
 |  items(...)
 |      D.items() -&gt; list of D's (key, value) pairs, as 2-tuples
 |
 |  iteritems(...)
 |      D.iteritems() -&gt; an iterator over the (key, value) items of D
 |
 |  iterkeys(...)
 |      D.iterkeys() -&gt; an iterator over the keys of D
 |
 |  itervalues(...)
 |      D.itervalues() -&gt; an iterator over the values of D
 |
 |  keys(...)
 |      D.keys() -&gt; list of D's keys
 |
 |  pop(...)
 |      D.pop(k[,d]) -&gt; v, remove specified key and return the corresponding value.
 |      If key is not found, d is returned if given, otherwise KeyError is raised
 |
 |  popitem(...)
 |      D.popitem() -&gt; (k, v), remove and return some (key, value) pair as a
 |      2-tuple; but raise KeyError if D is empty.
 |
 |  setdefault(...)
 |      D.setdefault(k[,d]) -&gt; D.get(k,d), also set D[k]=d if k not in D
 |
 |  values(...)
 |      D.values() -&gt; list of D's values
 |
 |  viewitems(...)
 |      D.viewitems() -&gt; a set-like object providing a view on D's items
 |
 |  viewkeys(...)
 |      D.viewkeys() -&gt; a set-like object providing a view on D's keys
 |
 |  viewvalues(...)
 |      D.viewvalues() -&gt; an object providing a view on D's values
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes inherited from __builtin__.dict:
 |
 |  __hash__ = None
 |
 |  __new__ = &lt;built-in method __new__ of type object&gt;
 |      T.__new__(S, ...) -&gt; a new object with type S, a subtype of T


</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[24]">
      <a class="prompt input_prompt" href="#in-[24]">
       In [24]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">cbar_title</span> <span class="o">=</span> <span class="s">"Mean bike traffic&lt;br&gt;per week day&lt;br&gt;</span><span class="se">\</span>
<span class="s">norm. by max value&lt;br&gt;(so 1=max value)"</span>    <span class="c"># colorbar title</span>

<span class="c"># Make colorbar object</span>
<span class="n">colorbar</span> <span class="o">=</span> <span class="n">ColorBar</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="n">cbar_title</span><span class="p">,</span>    <span class="c"># set color bar title</span>
    <span class="n">titleside</span><span class="o">=</span><span class="s">'bottom'</span><span class="p">,</span>  <span class="c"># (!) title placed below the color bar</span>
    <span class="n">thickness</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>        <span class="c"># color bar thickness in px</span>
    <span class="n">autotick</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>      <span class="c"># custom colorbar ticks</span>
    <span class="n">ticks</span><span class="o">=</span><span class="s">'outside'</span><span class="p">,</span>     <span class="c"># tick outside colorbar</span>
    <span class="n">dtick</span><span class="o">=</span><span class="mf">0.1</span>            <span class="c"># distance between ticks</span>
<span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Note that the colorbar object is meant to be linked to the
       <code>
        'colorbar'
       </code>
       key in
       <code>
        Heatmap
       </code>
       or, more generally, in the trace object in question. Plotly colorbars are considered specifications of each plotted trace. In other words, Plotly allows users to add multiple colorbars to the same figure. So,
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[25]">
      <a class="prompt input_prompt" href="#in-[25]">
       In [25]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">trace1</span> <span class="o">=</span> <span class="n">Heatmap</span><span class="p">(</span>
    <span class="n">z</span><span class="o">=</span><span class="n">Z_dayXwday_norm</span><span class="p">,</span>  <span class="c"># 2D array for heatmap</span>
    <span class="n">x</span><span class="o">=</span><span class="n">the_months</span><span class="p">,</span>       <span class="c"># x-axis labels</span>
    <span class="n">y</span><span class="o">=</span><span class="n">the_wdays_pl</span><span class="p">,</span>     <span class="c"># y-axis labels </span>
    <span class="n">colorscale</span><span class="o">=</span><span class="s">'Greys'</span><span class="p">,</span>   <span class="c"># (!) try another predefined colormap</span>
    <span class="n">reversescale</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>    <span class="c"># (!) reverse its color ordering</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>        <span class="c"># a slightly transparent color scale</span>
    <span class="n">colorbar</span><span class="o">=</span><span class="n">colorbar</span><span class="p">,</span>  <span class="c"># (!) link colormap object</span>
<span class="p">)</span>

<span class="c"># Make data object filled with the above heatmap object</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">([</span><span class="n">trace1</span><span class="p">])</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Next, update the layout object (from the previous figure):
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[26]">
      <a class="prompt input_prompt" href="#in-[26]">
       In [26]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Update the figure's height (in px)</span>
<span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="c"># Update y-axis title and set tick angle</span>
<span class="n">layout</span><span class="p">[</span><span class="s">'yaxis'</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s">'Days of the weeks'</span><span class="p">,</span>
    <span class="n">tickangle</span><span class="o">=-</span><span class="mi">20</span>
<span class="p">)</span>

<span class="c"># Update frame/axis margin to leave room for y-axis ticks </span>
<span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="n">Margin</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="mi">100</span><span class="p">))</span>

<span class="c"># Update title</span>
<span class="n">title</span> <span class="o">=</span> <span class="s">"Fig 5.1b: Bike traffic across 8 Montreal sites in 2013"</span>
<span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Finally, make a new figure object and send it to Plotly:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[27]">
      <a class="prompt input_prompt" href="#in-[27]">
       In [27]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Make figure object</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="c"># Send figure object to Plotly's server, show result in notebook</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">'s5_cyclists-per-wday'</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[27]">
        <a class="prompt output_prompt" href="#out[27]">
         Out[27]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <iframe height="525" id="igraph" scrolling="no" seamless="seamless" src="https://plot.ly/~etpinard/272.embed" style="border:none;" width="100%">
        </iframe>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Thursdays in July were on average the busiest days in 2013. Weekends are less busy than weekday by roughly 30 to 40 percent, a pretty interesting result.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <h4 id="5.2-Correlation-heatmap-between-sites">
       5.2 Correlation heatmap between sites
       <a class="anchor-link" href="#5.2-Correlation-heatmap-between-sites">
        ¶
       </a>
      </h4>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Our next plot will be a correlation heatmap between the 8 sites. The correlations coefficient of two datasets $X$ and $Y$ is computed as follows:
      </p>
      <p>
       $$ \text{Corr}_{X,Y} = \frac{\sum_i^N (X_i - \bar{X})(Y_i-\bar{Y})}
{\sqrt{\sum_i^N (X_i - \bar{X})}\sqrt{\sum_i^N (Y_i - \bar{Y})}} $$
      </p>
      <p>
       Where $N$ is the sample size. $X_i$ and $Y_i$ are the sample values in each datasets.
      </p>
      <p>
       Here, for us, we have not two by eight datasets and we would like to compute the correlation coefficient of each combination of dataset, making up a
       <em>
        correlation matrix
       </em>
       . The sample corresponds to the daily traffic totals at each sites.
      </p>
      <p>
       So, first extract these values from the dataframe into a numpy 2D array:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[28]">
      <a class="prompt input_prompt" href="#in-[28]">
       In [28]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Get values of every row of columns 2 and up</span>
<span class="n">Z_dayXsite</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">values</span>

<span class="c"># 153 sample days (rows) at 8 sites (columns)</span>
<span class="n">Z_dayXsite</span><span class="o">.</span><span class="n">shape</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[28]">
        <a class="prompt output_prompt" href="#out[28]">
         Out[28]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
(153, 8)
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Next, compute the correlation matrix
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[29]">
      <a class="prompt input_prompt" href="#in-[29]">
       In [29]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Compute correlation, rows (i.e. days of the year) are our sample space</span>
<span class="n">Corr_site</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">corrcoef</span><span class="p">(</span><span class="n">Z_dayXsite</span><span class="p">,</span><span class="n">rowvar</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c"># 8 sites correlated with themselves</span>
<span class="n">Corr_site</span><span class="o">.</span><span class="n">shape</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[29]">
        <a class="prompt output_prompt" href="#out[29]">
         Out[29]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
(8, 8)
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       The correlation matrix contains 64 entries, one for each permutation (i.e. ordered combinations) of bike counter sites.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       In addition, let's first check the range of values of the correlation matrix:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[30]">
      <a class="prompt input_prompt" href="#in-[30]">
       In [30]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">Corr_site</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">Corr_site</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[30]">
        <a class="prompt output_prompt" href="#out[30]">
         Out[30]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
(0.47982343592869092, 1.0)
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Next in a heatmap trace object, we overwrite the default minimum and maximum color scale values (with
       <code>
        'zmin'
       </code>
       and '
       <code>
        zmax'
       </code>
       respectively) to round up the color bar's range. So, consider,
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[31]">
      <a class="prompt input_prompt" href="#in-[31]">
       In [31]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">trace1</span> <span class="o">=</span> <span class="n">Heatmap</span><span class="p">(</span>
    <span class="n">z</span><span class="o">=</span><span class="n">Corr_site</span><span class="p">,</span>  <span class="c"># correlation as color contours </span>
    <span class="n">x</span><span class="o">=</span><span class="n">sites</span><span class="p">,</span>      <span class="c"># sites on both</span>
    <span class="n">y</span><span class="o">=</span><span class="n">sites</span><span class="p">,</span>      <span class="c">#  axes</span>
    <span class="n">zauto</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="c"># (!) overwrite Plotly's default color levels</span>
    <span class="n">zmin</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>     <span class="c"># (!) set value of min color level</span>
    <span class="n">zmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>       <span class="c"># (!) set value of max color level</span>
    <span class="n">colorscale</span><span class="o">=</span><span class="s">'YIOrRd'</span><span class="p">,</span> <span class="c"># light yellow-orange-red colormap</span>
    <span class="n">reversescale</span><span class="o">=</span><span class="bp">True</span>    <span class="c"># inverse colormap order</span>
<span class="p">)</span>

<span class="c"># Make data object</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">([</span><span class="n">trace1</span><span class="p">])</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Before plotting the correlation matrix, we will need to adjust the margin around the heatmap so that the long site names fit on the tick labels.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[32]">
      <a class="prompt input_prompt" href="#in-[32]">
       In [32]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">title</span> <span class="o">=</span> <span class="s">"Fig 5.2a: Bike traffic correlations </span><span class="se">\</span>
<span class="s">between different sites in 2013"</span>  <span class="c"># plot's title</span>

<span class="c"># Make layout object</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>  <span class="c"># set plot title</span>
    <span class="n">autosize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>       <span class="c"># turn off autosize </span>
    <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>           <span class="c"># plot's height in pixels </span>
    <span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>            <span class="c"># plot's width in pixels</span>
    <span class="n">margin</span><span class="o">=</span><span class="n">Margin</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="mi">130</span><span class="p">),</span> <span class="c"># adjust left margin</span>
    <span class="n">annotations</span><span class="o">=</span><span class="n">Annotations</span><span class="p">([</span>  <span class="c"># add annotaion citing the source</span>
        <span class="n">make_anno</span><span class="p">()</span>            <span class="c">#   using make_anno() defined in 5.1</span>
    <span class="p">])</span>
<span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[33]">
      <a class="prompt input_prompt" href="#in-[33]">
       In [33]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Make Figure object</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="c"># (@) Send to Plotly and show in notebook </span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">'s5_correlations'</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[33]">
        <a class="prompt output_prompt" href="#out[33]">
         Out[33]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <iframe height="525" id="igraph" scrolling="no" seamless="seamless" src="https://plot.ly/~etpinard/145.embed" style="border:none;" width="100%">
        </iframe>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Notice that Plotly automatically tilts the x-axis label to make them fit in the frame. Nice.
      </p>
      <p>
       As the correlation coefficient of $X$ and $Y$ is the same as the correlation coefficient of $Y$ and $X$, we have a lot of useless information on the above plot. Let's remedy this situation with some inspiration from the
       <a href="http://stanford.edu/~mwaskom/software/seaborn/index.html" target="_blank">
        Seaborn
       </a>
       project and, more specificaly
       <a href="http://stanford.edu/~mwaskom/software/seaborn/examples/many_pairwise_correlations.html" target="_blank">
        this plot
       </a>
       . Thanks!
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <h5 id="Seaborn-styling-in-Plotly">
       Seaborn styling in Plotly
       <a class="anchor-link" href="#Seaborn-styling-in-Plotly">
        ¶
       </a>
      </h5>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       To convert our previous plot to the Seaborn styling, we must:
      </p>
      <ul>
       <li>
        Make a new array with values from correlation matrix but without duplicates,
       </li>
       <li>
        Reverse the order of the y-axis,
       </li>
       <li>
        Tilt the x-axis labels to the vertical,
       </li>
       <li>
        Define a custom color scale.
       </li>
      </ul>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[34]">
      <a class="prompt input_prompt" href="#in-[34]">
       In [34]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Convert data and labels array to match Seaborn</span>
<span class="k">def</span> <span class="nf">make_seaborn</span><span class="p">(</span><span class="n">x_old</span><span class="p">,</span> <span class="n">y_old</span><span class="p">,</span>  <span class="n">z_old</span><span class="p">):</span>
    <span class="n">x_sns</span> <span class="o">=</span> <span class="n">x_old</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>      <span class="c"># remove last entry in x-corrd array</span>
    <span class="n">y_sns</span> <span class="o">=</span> <span class="n">y_old</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>   <span class="c"># remove first entry, reverse order in y-coord array</span>
    <span class="n">m</span><span class="p">,</span><span class="n">n</span> <span class="o">=</span> <span class="n">z_old</span><span class="o">.</span><span class="n">shape</span>        <span class="c"># get dimension of original array</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">m</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>    <span class="c"># init. tmp array</span>
    <span class="n">tmp</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>         <span class="c">#   with NaNs</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>             <span class="c"># loop through rows</span>
        <span class="n">tmp</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">z_old</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span>  <span class="c"># add items below the diagonal</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flipud</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span>     <span class="c">#  reverse order of all columns in tmp array</span>
    <span class="n">z_sns</span> <span class="o">=</span> <span class="n">tmp</span>  <span class="c"># copy tmp array to outpur variable</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x_sns</span><span class="p">,</span><span class="n">y_sns</span><span class="p">,</span><span class="n">z_sns</span><span class="p">)</span>  <span class="c"># return new coodinates in tuple</span>

<span class="c"># Call conversion function, get coordinates for our next plot</span>
<span class="n">sites_x_sns</span><span class="p">,</span><span class="n">sites_y_sns</span><span class="p">,</span><span class="n">Corr_site_sns</span><span class="o">=</span><span class="n">make_seaborn</span><span class="p">(</span><span class="n">sites</span><span class="p">,</span><span class="n">sites</span><span class="p">,</span><span class="n">Corr_site</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[35]">
      <a class="prompt input_prompt" href="#in-[35]">
       In [35]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Check position of NaNs in new 2D array</span>
<span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">Corr_site_sns</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[35]">
        <a class="prompt output_prompt" href="#out[35]">
         Out[35]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
array([[False, False, False, False, False, False, False,  True],
       [False, False, False, False, False, False,  True,  True],
       [False, False, False, False, False,  True,  True,  True],
       [False, False, False, False,  True,  True,  True,  True],
       [False, False, False,  True,  True,  True,  True,  True],
       [False, False,  True,  True,  True,  True,  True,  True],
       [False,  True,  True,  True,  True,  True,  True,  True],
       [ True,  True,  True,  True,  True,  True,  True,  True]], dtype=bool)
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Recall that Plotly maps the array's rows to y-axis and the array's columns to x-axis. So when plotted
       <code>
        Corr_site_sns
       </code>
       will have non-NaNs values on the lower diagonal as on the Seaborn plot.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <h5 id="Custom-color-scales-in-Plotly">
       Custom color scales in Plotly
       <a class="anchor-link" href="#Custom-color-scales-in-Plotly">
        ¶
       </a>
      </h5>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Next, we build a custom color scale (or color map or color scheme).
      </p>
      <p>
       A custom color scale in Plotly is a list of lists linked to the
       <code>
        'scl'
       </code>
       key in
       <code>
        Heatmap
       </code>
       ,
       <code>
        Contour
       </code>
       ,
       <code>
        Histogram2d
       </code>
       or
       <code>
        Histogram2dcontour
       </code>
       where the nested lists have the normalized level (more info below) values as first item and the level colors as second item using whatever color model you prefer.
      </p>
      <p>
       From this point on, Plotly takes over. The color scale is interpolated in-between the color levels, resulting in a continuous map from values in the 2D array to colors. So,
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[36]">
      <a class="prompt input_prompt" href="#in-[36]">
       In [36]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">scl_sns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s">"#00008B"</span><span class="p">],</span>   <span class="c"># color of minimun level (from 'zmin')</span>
    <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span><span class="s">"#6A5ACD"</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="s">"#FFE6F8"</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="s">"#C71585"</span><span class="p">],</span>  <span class="c"># in-between</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">"#8B0000"</span><span class="p">]</span>   <span class="c"># color of maximum level (from 'zmax')</span>
<span class="p">]</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       The
       <code>
        0
       </code>
       color level is the level of the value linked to the
       <code>
        'zmin'
       </code>
       key in
       <code>
        Heatmap
       </code>
       . Correspondingly, the
       <code>
        1
       </code>
       color level is the level of the value linked to the
       <code>
        'zmax'
       </code>
       key set in
       <code>
        Heatmap
       </code>
       .
      </p>
      <p>
       By default, the value of
       <code>
        'zmin'
       </code>
       is the 2D array's minimum value of the value of
       <code>
        'zmax'
       </code>
       is its maxmium value. That said, they can be easily overwritten. Consider the following
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[37]">
      <a class="prompt input_prompt" href="#in-[37]">
       In [37]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">trace1</span> <span class="o">=</span> <span class="n">Heatmap</span><span class="p">(</span>
    <span class="n">z</span><span class="o">=</span><span class="n">Corr_site_sns</span><span class="p">,</span>  <span class="c"># 2D array</span>
    <span class="n">x</span><span class="o">=</span><span class="n">sites_x_sns</span><span class="p">,</span>    <span class="c"># x-labels </span>
    <span class="n">y</span><span class="o">=</span><span class="n">sites_y_sns</span><span class="p">,</span>    <span class="c"># y-labels  </span>
    <span class="n">zauto</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="c"># (!) custom color levels</span>
    <span class="n">zmin</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>     <span class="c"># (!) value of min color level</span>
    <span class="n">zmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>       <span class="c"># (!) value of max color level</span>
    <span class="n">colorscale</span><span class="o">=</span><span class="n">scl_sns</span><span class="p">,</span>  <span class="c"># (!) custom color scales list of lists</span>
<span class="p">)</span>

<span class="c"># Make data object</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">([</span><span class="n">trace1</span><span class="p">])</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Ok, now tilt the axes' labels and add two annotations:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[38]">
      <a class="prompt input_prompt" href="#in-[38]">
       In [38]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Define a dictionary of axis style options</span>
<span class="n">axis_style</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">autotick</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>   <span class="c"># custom ticks </span>
    <span class="n">showgrid</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>   <span class="c"># remove grid</span>
    <span class="n">showline</span><span class="o">=</span><span class="bp">False</span>    <span class="c"># remove axes line</span>
<span class="p">)</span>

<span class="c"># Add style options on both axes, tilt the labels of x-axis</span>
<span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">xaxis</span><span class="o">=</span><span class="n">XAxis</span><span class="p">(</span>
    <span class="n">axis_style</span><span class="p">,</span>
    <span class="n">tickangle</span><span class="o">=</span><span class="mi">90</span>
<span class="p">))</span>
<span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">yaxis</span><span class="o">=</span><span class="n">YAxis</span><span class="p">(</span><span class="n">axis_style</span><span class="p">))</span>

<span class="c"># Update bottom frame/axis margin </span>
<span class="n">layout</span><span class="p">[</span><span class="s">'margin'</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>

<span class="c"># Add an annotation describing the sample</span>
<span class="c"># (using make_anno() defined in subsection 5.1)</span>

<span class="n">text_sample</span><span class="o">=</span><span class="s">"Data used:&lt;br&gt;April 01, 2013&lt;br&gt;to&lt;br&gt;August 31, 2013"</span>

<span class="n">layout</span><span class="p">[</span><span class="s">'annotations'</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_anno</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text_sample</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">0.6</span><span class="p">))</span>


<span class="c"># Update title</span>
<span class="n">title</span> <span class="o">=</span> <span class="s">"Fig 5.2b: Bike traffic correlations between different sites"</span>
<span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Finally, make a figure object and send it to Plotly:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[39]">
      <a class="prompt input_prompt" href="#in-[39]">
       In [39]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Make new figure object</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="c"># (@) Send figure object to Plotly</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">'s5_correlations-seaborn'</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[39]">
        <a class="prompt output_prompt" href="#out[39]">
         Out[39]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <iframe height="525" id="igraph" scrolling="no" seamless="seamless" src="https://plot.ly/~etpinard/249.embed" style="border:none;" width="100%">
        </iframe>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Much better. We now have room to spare for some annotations.
      </p>
      <p>
       From the above plot, all the sites are well-correlated and five of them are almost perfectly correlation (correlation coefficients &gt; 0.9). This means that we do not need to check the 8 sites to evaluate day-to-day traffic fluctuations. In other words, if traffic increases at one site, it is very likely that traffic increases at the 7 other sites.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <h3 id="5.3-Contours-of-traffic-progression-from-most-to-least-trafficked-sites">
       5.3 Contours of traffic progression from most to least trafficked sites
       <a class="anchor-link" href="#5.3-Contours-of-traffic-progression-from-most-to-least-trafficked-sites">
        ¶
       </a>
      </h3>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Positive trends in bike traffic are expected to
       <em>
        propage
       </em>
       from the most trafficked counter site to the least trafficked counter site over time and vice versa. In our next plot, we attempt to assess this claim with a contour plot of daily bike traffic totals as a function of the date and counter site.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[40]">
      <a class="prompt input_prompt" href="#in-[40]">
       In [40]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">help</span><span class="p">(</span><span class="n">Contour</span><span class="p">)</span>  <span class="c"># call help!</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt">
       </div>
       <div class="output_subarea output_stream output_stdout output_text">
        <pre>
Help on class Contour in module plotly.graph_objs.graph_objs:

class Contour(PlotlyTrace)
 |  A dictionary-like object for representing a contour trace in plotly.
 |
 |  Example:
 |
 |      &gt;&gt;&gt; z = [[0, 1, 0, 1, 0], [1, 0, 1, 0, 1], [0, 1, 0, 1, 0]]
 |      &gt;&gt;&gt; y = ['a', 'b', 'c']
 |      &gt;&gt;&gt; x = [1, 2, 3, 4, 5]py.plot([Contour(z=z, x=x, y=y)])
 |
 |  Online example:
 |
 |      https://plot.ly/python/contour-plots/
 |
 |  Quick method reference:
 |
 |      Contour.update(changes)
 |      Contour.strip_style()
 |      Contour.get_data()
 |      Contour.to_graph_objs()
 |      Contour.validate()
 |      Contour.to_string()
 |      Contour.force_clean()
 |
 |  Valid keys:
 |
 |      z [required=True] (value=list of lists or 2d numpy array of numbers)
 |      (streamable):
 |          Sets the data that describes the contour map mapping. Say the
 |          dimensions of the list of lists or 2d numpy array linked to 'z' has
 |          n rows and m columns then the resulting contour map will show n
 |          partitions along the y-axis and m partitions along the x-axis.
 |          Therefore, the i-th row/ j-th column cell in the list of lists or 2d
 |          numpy array linked to 'z' is mapped to the i-th partition of the
 |          y-axis (starting from the bottom of the plot) and the j-th partition
 |          of the x-axis (starting from the left of the plot).
 |
 |      x [required=False] (value=list or 1d numpy array of numbers, strings,
 |      datetimes) (streamable):
 |          Sets the horizontal coordinates referring to the columns of the list
 |          of lists or 2d numpy array linked to 'z'. If the 'z' is a list or 1d
 |          numpy array of strings, then the x-labels are spaced evenly. If the
 |          dimensions of the list of lists or 2d numpy array linked to 'z' are
 |          (n x m), the length of the 'x' array should equal m.
 |
 |      y [required=False] (value=list or 1d numpy array of numbers, strings,
 |      datetimes) (streamable):
 |          Sets the vertical coordinates referring to the rows of the list of
 |          lists or 2d numpy array linked to 'z'. If strings, the y-labels are
 |          spaced evenly. If the dimensions of the list of lists or 2d numpy
 |          array linked to 'z' are (n x m), the length of the 'y' array should
 |          equal n.
 |
 |      name [required=False] (value=a string):
 |          The label associated with this trace. This name will appear in the
 |          legend, on hover and in the column header in the online spreadsheet.
 |
 |      zauto [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the default values of 'zmax' and 'zmax' can be
 |          overwritten.
 |
 |      zmin [required=False] (value=number):
 |          Sets the minimum 'z' data value to be resolved by the color scale.
 |          Its default value is the minimum of the 'z' data values. This value
 |          will be used as the minimum in the color scale normalization. For
 |          more info see 'colorscale'.
 |
 |      zmax [required=False] (value=number):
 |          Sets the maximum 'z' data value to be resolved by the color scale.
 |          Its default value is the maximum of the 'z' data values. This value
 |          will be used as the maximum in the color scale normalization. For
 |          more info see 'colorscale'.
 |
 |      autocontour [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the contour parameters are picked
 |          automatically by Plotly. If False, declare the contours parameters
 |          in 'contours'.
 |
 |      ncontours [required=False] (value=number: x &gt; 1):
 |          Specifies the number of contours lines in the contour plot. No need
 |          to set 'autocontour' to False for 'ncontours' to apply.
 |
 |      contours [required=False] (value=Contours object | dictionary-like
 |      object):
 |          Links a dictionary-like object defining the parameters of the
 |          contours of this trace.
 |
 |          For more, run `help(plotly.graph_objs.Contours)`
 |
 |      line [required=False] (value=Line object | dictionary-like object)
 |      (streamable):
 |          Links a dictionary-like object containing line parameters for
 |          contour lines of this contour trace (including line width, dash,
 |          color and smoothing level). Has no an effect if 'showlines' is set
 |          to False in 'contours'.
 |
 |          For more, run `help(plotly.graph_objs.Line)`
 |
 |      colorscale [required=False] (value=list or 1d numpy array of value-color
 |      pairs | 'Greys' | 'Greens' | 'Bluered' | 'Hot' | 'Picnic' | 'Portland' |
 |      'Jet' | 'RdBu' | 'Blackbody' | 'Earth' | 'Electric' | 'YIOrRd' |
 |      'YIGnBu'):
 |          Sets and/or defines the color scale for this trace. The string
 |          values are pre-defined color scales. For custom color scales, define
 |          a list or 1d numpy array of value-color pairs where, the first
 |          element of the pair corresponds to a normalized value of z from 0-1,
 |          i.e. (z-zmin)/ (zmax-zmin), and the second element of pair
 |          corresponds to a color. Use with 'zauto', 'zmin' and 'zmax to fine-
 |          tune the map from 'z' to rendered colors.
 |
 |          Examples:
 |              'Greys' | [[0, 'rgb(0,0,0)'], [0.5, 'rgb(65, 182, 196)'], [1,
 |              'rgb(255,255,255)']]
 |
 |      reversescale [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the color scale will be reversed.
 |
 |      showscale [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the color scale associated with this mapping
 |          will be shown alongside the figure.
 |
 |      colorbar [required=False] (value=ColorBar object | dictionary-like
 |      object):
 |          Links a dictionary-like object defining the parameters of the color
 |          bar associated with this trace (including its title, length and
 |          width).
 |
 |          For more, run `help(plotly.graph_objs.ColorBar)`
 |
 |      opacity [required=False] (value=number: x in [0, 1]):
 |          Sets the opacity, or transparency, of the entire object, also known
 |          as the alpha channel of colors. If the object's color is given in
 |          terms of 'rgba' color model, 'opacity' is redundant.
 |
 |      xaxis [required=False] (value='x1' | 'x2' | 'x3' | etc.):
 |          This key determines which x-axis the x-coordinates of this trace
 |          will reference in the figure.  Values 'x1' and 'x' reference to
 |          'xaxis' in 'layout', 'x2' references to 'xaxis2' in 'layout', and so
 |          on. Note that 'x1' will always refer to 'xaxis' or 'xaxis1' in
 |          'layout', they are the same.
 |
 |      yaxis [required=False] (value='y1' | 'y2' | 'y3' | etc.):
 |          This key determines which y-axis the y-coordinates of this trace
 |          will reference in the figure.  Values 'y1' and 'y' reference to
 |          'yaxis' in 'layout', 'y2' references to 'yaxis2' in 'layout', and so
 |          on. Note that 'y1' will always refer to 'yaxis' or 'yaxis1' in
 |          'layout', they are the same.
 |
 |      showlegend [required=False] (value=a boolean: True | False):
 |          Toggle whether or not this trace will be labeled in the legend.
 |
 |      stream [required=False] (value=Stream object | dictionary-like object):
 |          Links a dictionary-like object that initializes this trace as a
 |          writable-stream, for use with the streaming API.
 |
 |          For more, run `help(plotly.graph_objs.Stream)`
 |
 |      visible [required=False] (value=a boolean: True | False):
 |          Toggles whether or not this object will be visible on the rendered
 |          figure.
 |
 |      x0 [required=False] (value=number):
 |          The location of the first coordinate of the x-axis. Use with 'dx' an
 |          alternative to an 'x' list or 1d numpy array. Has no effect if 'x'
 |          is set.
 |
 |      dx [required=False] (value=number):
 |          Spacing between x-axis coordinates. Use with 'x0' an alternative to
 |          an 'x' list or 1d numpy array. Has no effect if 'x' is set.
 |
 |      y0 [required=False] (value=number):
 |          The location of the first coordinate of the y-axis. Use with 'dy' an
 |          alternative to an 'y' list or 1d numpy array. Has no effect if 'y'
 |          is set.
 |
 |      dy [required=False] (value=number):
 |          Spacing between y-axis coordinates. Use with 'y0' an alternative to
 |          an 'y' list or 1d numpy array. Has no effect if 'y' is set.
 |
 |      xtype [required=False] (value='array' | 'scaled'):
 |          If set to 'scaled' and 'x' is linked to a list or 1d numpy array,
 |          then the horizontal labels are scaled to a list or 1d numpy array of
 |          integers of unit step starting from 0.
 |
 |      ytype [required=False] (value='array' | 'scaled'):
 |          If set to 'scaled' and 'y' is linked to a list or 1d numpy array,
 |          then the vertical labels are scaled to a list or 1d numpy array of
 |          integers of unit step starting from 0.
 |
 |      type [required=False] (value='contour'):
 |          Plotly identifier for this data's trace type.
 |
 |  Method resolution order:
 |      Contour
 |      PlotlyTrace
 |      PlotlyDict
 |      __builtin__.dict
 |      __builtin__.object
 |
 |  Methods inherited from PlotlyTrace:
 |
 |  __init__(self, *args, **kwargs)
 |
 |  to_string(self, level=0, indent=4, eol='\n', pretty=True, max_chars=80)
 |      Returns a formatted string showing graph_obj constructors.
 |
 |      Example:
 |
 |          print(obj.to_string())
 |
 |      Keyword arguments:
 |      level (default = 0) -- set number of indentations to start with
 |      indent (default = 4) -- set indentation amount
 |      eol (default = '\n') -- set end of line character(s)
 |      pretty (default = True) -- curtail long list output with a '...'
 |      max_chars (default = 80) -- set max characters per line
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from PlotlyDict:
 |
 |  __setitem__(self, key, value)
 |
 |  force_clean(self, caller=True)
 |      Attempts to convert to graph_objs and call force_clean() on values.
 |
 |      Calling force_clean() on a PlotlyDict will ensure that the object is
 |      valid and may be sent to plotly. This process will also remove any
 |      entries that end up with a length == 0.
 |
 |      Careful! This will delete any invalid entries *silently*.
 |
 |  get_data(self)
 |      Returns the JSON for the plot with non-data elements stripped.
 |
 |  get_ordered(self, caller=True)
 |
 |  strip_style(self)
 |      Strip style from the current representation.
 |
 |      All PlotlyDicts and PlotlyLists are guaranteed to survive the
 |      stripping process, though they made be left empty. This is allowable.
 |
 |      Keys that will be stripped in this process are tagged with
 |      `'type': 'style'` in graph_objs_meta.json.
 |
 |      This process first attempts to convert nested collections from dicts
 |      or lists to subclasses of PlotlyList/PlotlyDict. This process forces
 |      a validation, which may throw exceptions.
 |
 |      Then, each of these objects call `strip_style` on themselves and so
 |      on, recursively until the entire structure has been validated and
 |      stripped.
 |
 |  to_graph_objs(self, caller=True)
 |      Walk obj, convert dicts and lists to plotly graph objs.
 |
 |      For each key in the object, if it corresponds to a special key that
 |      should be associated with a graph object, the ordinary dict or list
 |      will be reinitialized as a special PlotlyDict or PlotlyList of the
 |      appropriate `kind`.
 |
 |  update(self, dict1=None, **dict2)
 |      Update current dict with dict1 and then dict2.
 |
 |      This recursively updates the structure of the original dictionary-like
 |      object with the new entries in the second and third objects. This
 |      allows users to update with large, nested structures.
 |
 |      Note, because the dict2 packs up all the keyword arguments, you can
 |      specify the changes as a list of keyword agruments.
 |
 |      Examples:
 |      # update with dict
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      update_dict = dict(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj.update(update_dict)
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      # update with list of keyword arguments
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      obj.update(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      This 'fully' supports duck-typing in that the call signature is
 |      identical, however this differs slightly from the normal update
 |      method provided by Python's dictionaries.
 |
 |  validate(self, caller=True)
 |      Recursively check the validity of the keys in a PlotlyDict.
 |
 |      The valid keys constitute the entries in each object
 |      dictionary in graph_objs_meta.json
 |
 |      The validation process first requires that all nested collections be
 |      converted to the appropriate subclass of PlotlyDict/PlotlyList. Then,
 |      each of these objects call `validate` and so on, recursively,
 |      until the entire object has been validated.
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors inherited from PlotlyDict:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from __builtin__.dict:
 |
 |  __cmp__(...)
 |      x.__cmp__(y) &lt;==&gt; cmp(x,y)
 |
 |  __contains__(...)
 |      D.__contains__(k) -&gt; True if D has a key k, else False
 |
 |  __delitem__(...)
 |      x.__delitem__(y) &lt;==&gt; del x[y]
 |
 |  __eq__(...)
 |      x.__eq__(y) &lt;==&gt; x==y
 |
 |  __ge__(...)
 |      x.__ge__(y) &lt;==&gt; x&gt;=y
 |
 |  __getattribute__(...)
 |      x.__getattribute__('name') &lt;==&gt; x.name
 |
 |  __getitem__(...)
 |      x.__getitem__(y) &lt;==&gt; x[y]
 |
 |  __gt__(...)
 |      x.__gt__(y) &lt;==&gt; x&gt;y
 |
 |  __iter__(...)
 |      x.__iter__() &lt;==&gt; iter(x)
 |
 |  __le__(...)
 |      x.__le__(y) &lt;==&gt; x&lt;=y
 |
 |  __len__(...)
 |      x.__len__() &lt;==&gt; len(x)
 |
 |  __lt__(...)
 |      x.__lt__(y) &lt;==&gt; x&lt;y
 |
 |  __ne__(...)
 |      x.__ne__(y) &lt;==&gt; x!=y
 |
 |  __repr__(...)
 |      x.__repr__() &lt;==&gt; repr(x)
 |
 |  __sizeof__(...)
 |      D.__sizeof__() -&gt; size of D in memory, in bytes
 |
 |  clear(...)
 |      D.clear() -&gt; None.  Remove all items from D.
 |
 |  copy(...)
 |      D.copy() -&gt; a shallow copy of D
 |
 |  fromkeys(...)
 |      dict.fromkeys(S[,v]) -&gt; New dict with keys from S and values equal to v.
 |      v defaults to None.
 |
 |  get(...)
 |      D.get(k[,d]) -&gt; D[k] if k in D, else d.  d defaults to None.
 |
 |  has_key(...)
 |      D.has_key(k) -&gt; True if D has a key k, else False
 |
 |  items(...)
 |      D.items() -&gt; list of D's (key, value) pairs, as 2-tuples
 |
 |  iteritems(...)
 |      D.iteritems() -&gt; an iterator over the (key, value) items of D
 |
 |  iterkeys(...)
 |      D.iterkeys() -&gt; an iterator over the keys of D
 |
 |  itervalues(...)
 |      D.itervalues() -&gt; an iterator over the values of D
 |
 |  keys(...)
 |      D.keys() -&gt; list of D's keys
 |
 |  pop(...)
 |      D.pop(k[,d]) -&gt; v, remove specified key and return the corresponding value.
 |      If key is not found, d is returned if given, otherwise KeyError is raised
 |
 |  popitem(...)
 |      D.popitem() -&gt; (k, v), remove and return some (key, value) pair as a
 |      2-tuple; but raise KeyError if D is empty.
 |
 |  setdefault(...)
 |      D.setdefault(k[,d]) -&gt; D.get(k,d), also set D[k]=d if k not in D
 |
 |  values(...)
 |      D.values() -&gt; list of D's values
 |
 |  viewitems(...)
 |      D.viewitems() -&gt; a set-like object providing a view on D's items
 |
 |  viewkeys(...)
 |      D.viewkeys() -&gt; a set-like object providing a view on D's keys
 |
 |  viewvalues(...)
 |      D.viewvalues() -&gt; an object providing a view on D's values
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes inherited from __builtin__.dict:
 |
 |  __hash__ = None
 |
 |  __new__ = &lt;built-in method __new__ of type object&gt;
 |      T.__new__(S, ...) -&gt; a new object with type S, a subtype of T


</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       To better visualize the
       <em>
        traffic propagation
       </em>
       , the counter sites will be placed on the x-axis in order, from the most trafficked to the least in the yearly total.
      </p>
      <p>
       So, first, sum the traffic total of all dates from April 1 to August 31:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[41]">
      <a class="prompt input_prompt" href="#in-[41]">
       In [41]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Column sum of dataframe, keep columns correps. to sites, get a numpy array</span>
<span class="n">z_site</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">2</span><span class="p">:])</span>

<span class="c"># The dataframe .sum() method ignores non-number (e.g. the date strings)</span>
<span class="c"># while computing the column (with axis=0) sum.</span>

<span class="c"># Show list of sites and total cyclist count</span>
<span class="k">for</span> <span class="n">tple</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sites</span><span class="p">,</span><span class="n">z_site</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">tple</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt">
       </div>
       <div class="output_subarea output_stream output_stdout output_text">
        <pre>
('Berri/&lt;br&gt;de Maisonneuve', '617472')
('C\xc3\xb4te-Ste-Catherine&lt;br&gt;(parc Beaubien)', '272218')
('de Maisonneuve/&lt;br&gt;Berri', '393995')
('de Maisonneuve/&lt;br&gt;Peel', '716427')
('du Parc/&lt;br&gt;Duluth', '367109')
('Pierre-Dupuy&lt;br&gt;(Habitat 67)', '273008')
('Rachel/&lt;br&gt;Marquette', '693354')
('Laurier&lt;br&gt;(m\xc3\xa9tro)', '414548')

</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Next, order the sites from most trafficked to least (the x-axis labels), swap the dataframe's columns accordingly and make a list of dates (the y-axis labels):
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[42]">
      <a class="prompt input_prompt" href="#in-[42]">
       In [42]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># (*) with the datetime module</span>

<span class="k">def</span> <span class="nf">convert_in_order</span><span class="p">(</span><span class="n">df_in</span><span class="p">,</span><span class="n">sites</span><span class="p">,</span><span class="n">z_site</span><span class="p">):</span>

    <span class="n">dates</span> <span class="o">=</span> <span class="n">df_in</span><span class="p">[</span><span class="s">'Date'</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>  <span class="c"># make list of dates in dataframe</span>

    <span class="c"># Get values of every row of columns 2 and up (as in subsection 5.2)</span>
    <span class="n">Z_dayXsite</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">values</span>

    <span class="c"># (1-) Get list of dates in words (e.g. Mon, Jan 1)</span>
    <span class="n">dates_in_words</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s">'</span><span class="si">%d</span><span class="s">/%m/%Y'</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%a, %b </span><span class="si">%d</span><span class="s">'</span><span class="p">)</span>
                      <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dates</span><span class="p">]</span>

    <span class="c"># (2.1-3.1) Get indices of sorted array in decreasing order</span>
    <span class="n">ind_in_order</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">z_site</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="c"># (2-) Shuffle sites list in order</span>
    <span class="n">sites_in_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">sites</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ind_in_order</span><span class="p">]</span>

    <span class="c"># (3-) Shuffle columns (corresp. to the sites) of 2D array in order</span>
    <span class="n">Z_dayXsite_in_order</span> <span class="o">=</span> <span class="n">Z_dayXsite</span><span class="p">[:,</span><span class="n">ind_in_order</span><span class="p">]</span>

    <span class="c"># Output coordinates for our plot</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">dates_in_words</span><span class="p">,</span> <span class="n">sites_in_order</span><span class="p">,</span> <span class="n">Z_dayXsite_in_order</span><span class="p">)</span>

<span class="c"># Get plot coordinates</span>
<span class="n">dates_in_words</span><span class="p">,</span><span class="n">sites_in_order</span><span class="p">,</span><span class="n">Z_dayXsite_in_order</span><span class="o">=</span><span class="n">convert_in_order</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">sites</span><span class="p">,</span><span class="n">z_site</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Data for contours plot is input in the
       <code>
        Contour
       </code>
       object. The
       <code>
        Contours
       </code>
       object (N.B. plural) contains the style options for the contours, similar to what
       <code>
        XBins
       </code>
       and
       <code>
        YBins
       </code>
       are for
       <code>
        Histogram
       </code>
       .
      </p>
      <p>
       Ultimately, the
       <code>
        Contours
       </code>
       is meant to be linked to the
       <code>
        'contours'
       </code>
       key in
       <code>
        Contour
       </code>
       .
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[43]">
      <a class="prompt input_prompt" href="#in-[43]">
       In [43]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">help</span><span class="p">(</span><span class="n">Contours</span><span class="p">)</span>  <span class="c"># call help!</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt">
       </div>
       <div class="output_subarea output_stream output_stdout output_text">
        <pre>
Help on class Contours in module plotly.graph_objs.graph_objs:

class Contours(PlotlyDict)
 |  A dictionary-like object containing specifications of the contours.
 |
 |  Online example:
 |
 |      https://plot.ly/python/contour-plots/
 |
 |  Parent key:
 |
 |      contours
 |
 |  Quick method reference:
 |
 |      Contours.update(changes)
 |      Contours.strip_style()
 |      Contours.get_data()
 |      Contours.to_graph_objs()
 |      Contours.validate()
 |      Contours.to_string()
 |      Contours.force_clean()
 |
 |  Valid keys:
 |
 |      showlines [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the contour lines appear on the plot.
 |
 |      start [required=False] (value=number: x &gt; 0):
 |          Sets the value of the first contour level.
 |
 |      end [required=False] (value=number: x &gt; 0):
 |          Sets the value of the last contour level.
 |
 |      size [required=False] (value=number: x &gt; 0) (streamable):
 |          Sets the size of each contour level.
 |
 |      coloring [required=False] (value= 'fill' | 'heatmap' | 'lines' | 'none'
 |      ):
 |          Choose the coloring method for this contour trace. The default value
 |          is 'fill' where coloring is done evenly between each contour line.
 |          'heatmap' colors on a grid point-by-grid point basis. 'lines' colors
 |          only the contour lines, each with respect to the color scale. 'none'
 |          prints all contour lines with the same color; choose their color in
 |          a Line object at the trace level if desired.
 |
 |  Method resolution order:
 |      Contours
 |      PlotlyDict
 |      __builtin__.dict
 |      __builtin__.object
 |
 |  Methods inherited from PlotlyDict:
 |
 |  __init__(self, *args, **kwargs)
 |
 |  __setitem__(self, key, value)
 |
 |  force_clean(self, caller=True)
 |      Attempts to convert to graph_objs and call force_clean() on values.
 |
 |      Calling force_clean() on a PlotlyDict will ensure that the object is
 |      valid and may be sent to plotly. This process will also remove any
 |      entries that end up with a length == 0.
 |
 |      Careful! This will delete any invalid entries *silently*.
 |
 |  get_data(self)
 |      Returns the JSON for the plot with non-data elements stripped.
 |
 |  get_ordered(self, caller=True)
 |
 |  strip_style(self)
 |      Strip style from the current representation.
 |
 |      All PlotlyDicts and PlotlyLists are guaranteed to survive the
 |      stripping process, though they made be left empty. This is allowable.
 |
 |      Keys that will be stripped in this process are tagged with
 |      `'type': 'style'` in graph_objs_meta.json.
 |
 |      This process first attempts to convert nested collections from dicts
 |      or lists to subclasses of PlotlyList/PlotlyDict. This process forces
 |      a validation, which may throw exceptions.
 |
 |      Then, each of these objects call `strip_style` on themselves and so
 |      on, recursively until the entire structure has been validated and
 |      stripped.
 |
 |  to_graph_objs(self, caller=True)
 |      Walk obj, convert dicts and lists to plotly graph objs.
 |
 |      For each key in the object, if it corresponds to a special key that
 |      should be associated with a graph object, the ordinary dict or list
 |      will be reinitialized as a special PlotlyDict or PlotlyList of the
 |      appropriate `kind`.
 |
 |  to_string(self, level=0, indent=4, eol='\n', pretty=True, max_chars=80)
 |      Returns a formatted string showing graph_obj constructors.
 |
 |      Example:
 |
 |          print(obj.to_string())
 |
 |      Keyword arguments:
 |      level (default = 0) -- set number of indentations to start with
 |      indent (default = 4) -- set indentation amount
 |      eol (default = '\n') -- set end of line character(s)
 |      pretty (default = True) -- curtail long list output with a '...'
 |      max_chars (default = 80) -- set max characters per line
 |
 |  update(self, dict1=None, **dict2)
 |      Update current dict with dict1 and then dict2.
 |
 |      This recursively updates the structure of the original dictionary-like
 |      object with the new entries in the second and third objects. This
 |      allows users to update with large, nested structures.
 |
 |      Note, because the dict2 packs up all the keyword arguments, you can
 |      specify the changes as a list of keyword agruments.
 |
 |      Examples:
 |      # update with dict
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      update_dict = dict(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj.update(update_dict)
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      # update with list of keyword arguments
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      obj.update(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      This 'fully' supports duck-typing in that the call signature is
 |      identical, however this differs slightly from the normal update
 |      method provided by Python's dictionaries.
 |
 |  validate(self, caller=True)
 |      Recursively check the validity of the keys in a PlotlyDict.
 |
 |      The valid keys constitute the entries in each object
 |      dictionary in graph_objs_meta.json
 |
 |      The validation process first requires that all nested collections be
 |      converted to the appropriate subclass of PlotlyDict/PlotlyList. Then,
 |      each of these objects call `validate` and so on, recursively,
 |      until the entire object has been validated.
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors inherited from PlotlyDict:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from __builtin__.dict:
 |
 |  __cmp__(...)
 |      x.__cmp__(y) &lt;==&gt; cmp(x,y)
 |
 |  __contains__(...)
 |      D.__contains__(k) -&gt; True if D has a key k, else False
 |
 |  __delitem__(...)
 |      x.__delitem__(y) &lt;==&gt; del x[y]
 |
 |  __eq__(...)
 |      x.__eq__(y) &lt;==&gt; x==y
 |
 |  __ge__(...)
 |      x.__ge__(y) &lt;==&gt; x&gt;=y
 |
 |  __getattribute__(...)
 |      x.__getattribute__('name') &lt;==&gt; x.name
 |
 |  __getitem__(...)
 |      x.__getitem__(y) &lt;==&gt; x[y]
 |
 |  __gt__(...)
 |      x.__gt__(y) &lt;==&gt; x&gt;y
 |
 |  __iter__(...)
 |      x.__iter__() &lt;==&gt; iter(x)
 |
 |  __le__(...)
 |      x.__le__(y) &lt;==&gt; x&lt;=y
 |
 |  __len__(...)
 |      x.__len__() &lt;==&gt; len(x)
 |
 |  __lt__(...)
 |      x.__lt__(y) &lt;==&gt; x&lt;y
 |
 |  __ne__(...)
 |      x.__ne__(y) &lt;==&gt; x!=y
 |
 |  __repr__(...)
 |      x.__repr__() &lt;==&gt; repr(x)
 |
 |  __sizeof__(...)
 |      D.__sizeof__() -&gt; size of D in memory, in bytes
 |
 |  clear(...)
 |      D.clear() -&gt; None.  Remove all items from D.
 |
 |  copy(...)
 |      D.copy() -&gt; a shallow copy of D
 |
 |  fromkeys(...)
 |      dict.fromkeys(S[,v]) -&gt; New dict with keys from S and values equal to v.
 |      v defaults to None.
 |
 |  get(...)
 |      D.get(k[,d]) -&gt; D[k] if k in D, else d.  d defaults to None.
 |
 |  has_key(...)
 |      D.has_key(k) -&gt; True if D has a key k, else False
 |
 |  items(...)
 |      D.items() -&gt; list of D's (key, value) pairs, as 2-tuples
 |
 |  iteritems(...)
 |      D.iteritems() -&gt; an iterator over the (key, value) items of D
 |
 |  iterkeys(...)
 |      D.iterkeys() -&gt; an iterator over the keys of D
 |
 |  itervalues(...)
 |      D.itervalues() -&gt; an iterator over the values of D
 |
 |  keys(...)
 |      D.keys() -&gt; list of D's keys
 |
 |  pop(...)
 |      D.pop(k[,d]) -&gt; v, remove specified key and return the corresponding value.
 |      If key is not found, d is returned if given, otherwise KeyError is raised
 |
 |  popitem(...)
 |      D.popitem() -&gt; (k, v), remove and return some (key, value) pair as a
 |      2-tuple; but raise KeyError if D is empty.
 |
 |  setdefault(...)
 |      D.setdefault(k[,d]) -&gt; D.get(k,d), also set D[k]=d if k not in D
 |
 |  values(...)
 |      D.values() -&gt; list of D's values
 |
 |  viewitems(...)
 |      D.viewitems() -&gt; a set-like object providing a view on D's items
 |
 |  viewkeys(...)
 |      D.viewkeys() -&gt; a set-like object providing a view on D's keys
 |
 |  viewvalues(...)
 |      D.viewvalues() -&gt; an object providing a view on D's values
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes inherited from __builtin__.dict:
 |
 |  __hash__ = None
 |
 |  __new__ = &lt;built-in method __new__ of type object&gt;
 |      T.__new__(S, ...) -&gt; a new object with type S, a subtype of T


</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       To enable custom contours (i.e. by setting
       <code>
        'start'
       </code>
       ,
       <code>
        'end'
       </code>
       and
       <code>
        'size'
       </code>
       in
       <code>
        Contours
       </code>
       ) set
       <code>
        autocontour
       </code>
       to
       <code>
        False
       </code>
       in
       <code>
        Contour
       </code>
       .
      </p>
      <p>
       By default, Plotly contours are colored uniformly between contour lines, corresponding to
       <code>
        'coloring':'fill'
       </code>
       in
       <code>
        Contours
       </code>
       . With the
       <code>
        'heatmap'
       </code>
       value coloring is done on a grid point-by-grid point basis and with
       <code>
        lines
       </code>
       only the contour lines are colored with respect to the color scale. Finally, with
       <code>
        'coloring:'none'
       </code>
       contour lines and the areas between them are not colored, use this value to make a contour plot with all contour lines of the same color.
      </p>
      <p>
       To modify the appearance of the contour lines (e.g. their color), use the
       <code>
        Line
       </code>
       object:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[44]">
      <a class="prompt input_prompt" href="#in-[44]">
       In [44]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">help</span><span class="p">(</span><span class="n">Line</span><span class="p">)</span>  <span class="c"># call help!</span>

<span class="c"># notice 'smoothing'</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt">
       </div>
       <div class="output_subarea output_stream output_stdout output_text">
        <pre>
Help on class Line in module plotly.graph_objs.graph_objs:

class Line(PlotlyDict)
 |  A dictionary-like object containing specifications of the line segments.
 |
 |  Online examples:
 |
 |      https://plot.ly/python/line-and-scatter/
 |      https://plot.ly/python/filled-area-plots/
 |      https://plot.ly/python/contour-plots/
 |
 |  Parent key:
 |
 |      line
 |
 |  Quick method reference:
 |
 |      Line.update(changes)
 |      Line.strip_style()
 |      Line.get_data()
 |      Line.to_graph_objs()
 |      Line.validate()
 |      Line.to_string()
 |      Line.force_clean()
 |
 |  Valid keys:
 |
 |      color [required=False] (value=a string describing color) (streamable):
 |          Sets the color of the line object. If linked within 'marker', sets
 |          the color of the marker's bordering line. If linked within,
 |          'contours', sets the color of the contour lines.
 |
 |          Examples:
 |              'green' | 'rgb(0, 255, 0)' | 'rgba(0, 255, 0, 0.3)' |
 |              'hsl(120,100%,50%)' | 'hsla(120,100%,50%,0.3)' | '#434F1D'
 |
 |      width [required=False] (value=number: x &gt;= 0):
 |          Sets the width (in pixels) of the line segments in question.
 |
 |      dash [required=False] (value='dash' | 'dashdot' | 'dot' | 'solid'):
 |          Sets the drawing style of the lines segments in this trace.
 |
 |      opacity [required=False] (value=number: x in [0, 1]):
 |          Sets the opacity, or transparency, of the entire object, also known
 |          as the alpha channel of colors. If the object's color is given in
 |          terms of 'rgba' color model, 'opacity' is redundant.
 |
 |      shape [required=False] (value='linear' | 'spline' | 'hv' | 'vh' | 'hvh'
 |      | 'vhv'):
 |          Choose the line shape between each coordinate pair in this trace.
 |          Applies only to scatter traces. The default value is 'linear'. If
 |          set to 'spline', then the lines are drawn using spline interpolation
 |          between the coordinate pairs. The remaining available values
 |          correspond to step-wise line shapes.
 |
 |      smoothing [required=False] (value=number: x &gt;= 0):
 |          Sets the amount of smoothing applied to the lines segments in this
 |          trace. Applies only to contour traces and scatter traces if 'shape'
 |          is set to 'spline'. The default value is 1. If 'smoothing' is set to
 |          0, then no smoothing is applied. Set 'smoothing' to a value less
 |          (greater) than 1 for a less (more) pronounced line smoothing.
 |
 |      outliercolor [required=False] (value=a string describing color):
 |          For box plots only. Has an effect only if 'boxpoints' is set to
 |          'suspectedoutliers'. Sets the color of the bordering line of the
 |          outlier points.
 |
 |          Examples:
 |              'green' | 'rgb(0, 255, 0)' | 'rgba(0, 255, 0, 0.3)' |
 |              'hsl(120,100%,50%)' | 'hsla(120,100%,50%,0.3)' | '#434F1D'
 |
 |      outlierwidth [required=False] (value=a string describing color):
 |          For box plots only. Has an effect only if 'boxpoints' is set to
 |          'suspectedoutliers'. Sets the width in pixels of bordering line of
 |          the outlier points.
 |
 |          Examples:
 |              'green' | 'rgb(0, 255, 0)' | 'rgba(0, 255, 0, 0.3)' |
 |              'hsl(120,100%,50%)' | 'hsla(120,100%,50%,0.3)' | '#434F1D'
 |
 |  Method resolution order:
 |      Line
 |      PlotlyDict
 |      __builtin__.dict
 |      __builtin__.object
 |
 |  Methods inherited from PlotlyDict:
 |
 |  __init__(self, *args, **kwargs)
 |
 |  __setitem__(self, key, value)
 |
 |  force_clean(self, caller=True)
 |      Attempts to convert to graph_objs and call force_clean() on values.
 |
 |      Calling force_clean() on a PlotlyDict will ensure that the object is
 |      valid and may be sent to plotly. This process will also remove any
 |      entries that end up with a length == 0.
 |
 |      Careful! This will delete any invalid entries *silently*.
 |
 |  get_data(self)
 |      Returns the JSON for the plot with non-data elements stripped.
 |
 |  get_ordered(self, caller=True)
 |
 |  strip_style(self)
 |      Strip style from the current representation.
 |
 |      All PlotlyDicts and PlotlyLists are guaranteed to survive the
 |      stripping process, though they made be left empty. This is allowable.
 |
 |      Keys that will be stripped in this process are tagged with
 |      `'type': 'style'` in graph_objs_meta.json.
 |
 |      This process first attempts to convert nested collections from dicts
 |      or lists to subclasses of PlotlyList/PlotlyDict. This process forces
 |      a validation, which may throw exceptions.
 |
 |      Then, each of these objects call `strip_style` on themselves and so
 |      on, recursively until the entire structure has been validated and
 |      stripped.
 |
 |  to_graph_objs(self, caller=True)
 |      Walk obj, convert dicts and lists to plotly graph objs.
 |
 |      For each key in the object, if it corresponds to a special key that
 |      should be associated with a graph object, the ordinary dict or list
 |      will be reinitialized as a special PlotlyDict or PlotlyList of the
 |      appropriate `kind`.
 |
 |  to_string(self, level=0, indent=4, eol='\n', pretty=True, max_chars=80)
 |      Returns a formatted string showing graph_obj constructors.
 |
 |      Example:
 |
 |          print(obj.to_string())
 |
 |      Keyword arguments:
 |      level (default = 0) -- set number of indentations to start with
 |      indent (default = 4) -- set indentation amount
 |      eol (default = '\n') -- set end of line character(s)
 |      pretty (default = True) -- curtail long list output with a '...'
 |      max_chars (default = 80) -- set max characters per line
 |
 |  update(self, dict1=None, **dict2)
 |      Update current dict with dict1 and then dict2.
 |
 |      This recursively updates the structure of the original dictionary-like
 |      object with the new entries in the second and third objects. This
 |      allows users to update with large, nested structures.
 |
 |      Note, because the dict2 packs up all the keyword arguments, you can
 |      specify the changes as a list of keyword agruments.
 |
 |      Examples:
 |      # update with dict
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      update_dict = dict(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj.update(update_dict)
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      # update with list of keyword arguments
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      obj.update(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      This 'fully' supports duck-typing in that the call signature is
 |      identical, however this differs slightly from the normal update
 |      method provided by Python's dictionaries.
 |
 |  validate(self, caller=True)
 |      Recursively check the validity of the keys in a PlotlyDict.
 |
 |      The valid keys constitute the entries in each object
 |      dictionary in graph_objs_meta.json
 |
 |      The validation process first requires that all nested collections be
 |      converted to the appropriate subclass of PlotlyDict/PlotlyList. Then,
 |      each of these objects call `validate` and so on, recursively,
 |      until the entire object has been validated.
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors inherited from PlotlyDict:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from __builtin__.dict:
 |
 |  __cmp__(...)
 |      x.__cmp__(y) &lt;==&gt; cmp(x,y)
 |
 |  __contains__(...)
 |      D.__contains__(k) -&gt; True if D has a key k, else False
 |
 |  __delitem__(...)
 |      x.__delitem__(y) &lt;==&gt; del x[y]
 |
 |  __eq__(...)
 |      x.__eq__(y) &lt;==&gt; x==y
 |
 |  __ge__(...)
 |      x.__ge__(y) &lt;==&gt; x&gt;=y
 |
 |  __getattribute__(...)
 |      x.__getattribute__('name') &lt;==&gt; x.name
 |
 |  __getitem__(...)
 |      x.__getitem__(y) &lt;==&gt; x[y]
 |
 |  __gt__(...)
 |      x.__gt__(y) &lt;==&gt; x&gt;y
 |
 |  __iter__(...)
 |      x.__iter__() &lt;==&gt; iter(x)
 |
 |  __le__(...)
 |      x.__le__(y) &lt;==&gt; x&lt;=y
 |
 |  __len__(...)
 |      x.__len__() &lt;==&gt; len(x)
 |
 |  __lt__(...)
 |      x.__lt__(y) &lt;==&gt; x&lt;y
 |
 |  __ne__(...)
 |      x.__ne__(y) &lt;==&gt; x!=y
 |
 |  __repr__(...)
 |      x.__repr__() &lt;==&gt; repr(x)
 |
 |  __sizeof__(...)
 |      D.__sizeof__() -&gt; size of D in memory, in bytes
 |
 |  clear(...)
 |      D.clear() -&gt; None.  Remove all items from D.
 |
 |  copy(...)
 |      D.copy() -&gt; a shallow copy of D
 |
 |  fromkeys(...)
 |      dict.fromkeys(S[,v]) -&gt; New dict with keys from S and values equal to v.
 |      v defaults to None.
 |
 |  get(...)
 |      D.get(k[,d]) -&gt; D[k] if k in D, else d.  d defaults to None.
 |
 |  has_key(...)
 |      D.has_key(k) -&gt; True if D has a key k, else False
 |
 |  items(...)
 |      D.items() -&gt; list of D's (key, value) pairs, as 2-tuples
 |
 |  iteritems(...)
 |      D.iteritems() -&gt; an iterator over the (key, value) items of D
 |
 |  iterkeys(...)
 |      D.iterkeys() -&gt; an iterator over the keys of D
 |
 |  itervalues(...)
 |      D.itervalues() -&gt; an iterator over the values of D
 |
 |  keys(...)
 |      D.keys() -&gt; list of D's keys
 |
 |  pop(...)
 |      D.pop(k[,d]) -&gt; v, remove specified key and return the corresponding value.
 |      If key is not found, d is returned if given, otherwise KeyError is raised
 |
 |  popitem(...)
 |      D.popitem() -&gt; (k, v), remove and return some (key, value) pair as a
 |      2-tuple; but raise KeyError if D is empty.
 |
 |  setdefault(...)
 |      D.setdefault(k[,d]) -&gt; D.get(k,d), also set D[k]=d if k not in D
 |
 |  values(...)
 |      D.values() -&gt; list of D's values
 |
 |  viewitems(...)
 |      D.viewitems() -&gt; a set-like object providing a view on D's items
 |
 |  viewkeys(...)
 |      D.viewkeys() -&gt; a set-like object providing a view on D's keys
 |
 |  viewvalues(...)
 |      D.viewvalues() -&gt; an object providing a view on D's values
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes inherited from __builtin__.dict:
 |
 |  __hash__ = None
 |
 |  __new__ = &lt;built-in method __new__ of type object&gt;
 |      T.__new__(S, ...) -&gt; a new object with type S, a subtype of T


</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Contour lines are smoothed by default, corresponding to
       <code>
        'smoothing': 1
       </code>
       in
       <code>
        Line
       </code>
       . Set
       <code>
        'smoothing'
       </code>
       to a value larger than 1 to smooth the contours more and to a value between 0 and 1 to for less smoothing.
      </p>
      <p>
       Now, fill in a contour object with our data:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[45]">
      <a class="prompt input_prompt" href="#in-[45]">
       In [45]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">cbar_title</span> <span class="o">=</span> <span class="s">"Daily cyclist count per site"</span>

<span class="c"># Make a colorbar object</span>
<span class="n">colorbar</span> <span class="o">=</span> <span class="n">ColorBar</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="n">cbar_title</span><span class="p">,</span>    <span class="c"># set colorbar title</span>
    <span class="n">titleside</span><span class="o">=</span><span class="s">'right'</span><span class="p">,</span>   <span class="c"># put colorbar title at right of colorbar</span>
    <span class="n">thickness</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>        <span class="c"># colorbar thickness in px</span>
    <span class="nb">len</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>             <span class="c"># colorbar length in plot fraction</span>
    <span class="n">ticks</span><span class="o">=</span><span class="s">'outside'</span>      <span class="c"># tick outside colorbar</span>
<span class="p">)</span>

<span class="n">trace1</span> <span class="o">=</span> <span class="n">Contour</span><span class="p">(</span>
    <span class="n">z</span><span class="o">=</span><span class="n">Z_dayXsite_in_order</span><span class="p">,</span>  <span class="c"># 2D array a f(sites,dates)</span>
    <span class="n">x</span><span class="o">=</span><span class="n">sites_in_order</span><span class="p">,</span>       <span class="c"># sites on the x-axis</span>
    <span class="n">y</span><span class="o">=</span><span class="n">dates_in_words</span><span class="p">,</span>       <span class="c"># dates on the y-axis</span>
    <span class="n">colorscale</span><span class="o">=</span><span class="s">'Greens'</span><span class="p">,</span>    <span class="c"># choose a color scale from the pre-defined</span>
    <span class="n">reversescale</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>       <span class="c">#   and reverse its order</span>
    <span class="n">line</span><span class="o">=</span><span class="n">Line</span><span class="p">(</span>
        <span class="n">smoothing</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>    <span class="c"># (!) contour smmothing, default is 1</span>
        <span class="n">color</span><span class="o">=</span><span class="s">'#999999'</span><span class="p">,</span>  <span class="c"># light grey contour lines, default is black</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">1</span>           <span class="c"># default is 0.5 </span>
    <span class="p">),</span>
    <span class="n">colorbar</span><span class="o">=</span><span class="n">colorbar</span>    <span class="c"># link colorbar object</span>
<span class="p">)</span>

<span class="c"># Make a data object</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">([</span><span class="n">trace1</span><span class="p">])</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       On to the layout,
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[46]">
      <a class="prompt input_prompt" href="#in-[46]">
       In [46]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">width</span> <span class="o">=</span> <span class="mi">650</span>    <span class="c"># plot width in px</span>
<span class="n">height</span> <span class="o">=</span> <span class="mi">1000</span>  <span class="c"># plot height in px</span>

<span class="n">title</span> <span class="o">=</span> <span class="s">"Fig 5.3: Montral bike traffic daily progression&lt;br&gt;</span><span class="se">\</span>
<span class="s">from the most trafficked site to the least in 2013&lt;br&gt;"</span>  <span class="c"># plot's title</span>

<span class="n">x_title</span> <span class="o">=</span> <span class="s">'Sites [from the most trafficked to the least in 2013]'</span>

<span class="n">layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>  <span class="c"># plot's title</span>
    <span class="n">font</span><span class="o">=</span><span class="n">Font</span><span class="p">(</span>
        <span class="n">family</span><span class="o">=</span><span class="s">'Raleway, sans-serif'</span><span class="p">,</span>  <span class="c"># global font </span>
        <span class="n">color</span><span class="o">=</span><span class="s">'#635F5D'</span>
    <span class="p">),</span>
    <span class="n">xaxis</span><span class="o">=</span><span class="n">XAxis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">x_title</span><span class="p">),</span>  <span class="c"># x-axis title</span>
    <span class="n">yaxis</span><span class="o">=</span><span class="n">YAxis</span><span class="p">(</span>
        <span class="n">autorange</span><span class="o">=</span><span class="s">'reversed'</span><span class="p">,</span> <span class="c"># (!) start y-axis at top</span>
        <span class="n">autotick</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>       <span class="c"># custom tick</span>
        <span class="n">dtick</span><span class="o">=</span><span class="mi">7</span>               <span class="c"># 1 tick per week</span>
    <span class="p">),</span>
    <span class="n">margin</span><span class="o">=</span><span class="n">Margin</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">120</span><span class="p">),</span>      <span class="c"># increase bottom margin</span>
    <span class="n">annotations</span><span class="o">=</span><span class="n">Annotations</span><span class="p">([</span>  <span class="c"># add annotation citing the data source</span>
        <span class="n">make_anno</span><span class="p">()</span>
    <span class="p">]),</span>
    <span class="n">autosize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="c"># custom size</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>   <span class="c"># set plot's height      </span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span>      <span class="c"># set plot's width</span>
<span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Get a Plotly plot:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[47]">
      <a class="prompt input_prompt" href="#in-[47]">
       In [47]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Make figure object</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="c"># (@) Send figure object and show result in notebook</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">'s5_cyclist-time-progression'</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>

<span class="c"># adjust output frame size with 'width' and 'height'</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[47]">
        <a class="prompt output_prompt" href="#out[47]">
         Out[47]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <iframe height="1000" id="igraph" scrolling="no" seamless="seamless" src="https://plot.ly/~etpinard/254.embed?width=625&amp;height=975" style="border:none;" width="650">
        </iframe>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Traffic progressions are noticeable in April, but overall all counter sites got busier at the same time.
      </p>
      <p>
       The above contour plot contains information about all counter totals between April and September for all 8 sites. Hovering over the contours reveals each daily cyclist count, which on a static figure would be impossible. This is just another example of how Plotly makes graphing come alive.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <h3 id="5.4-Joint-daily-traffic-probability-distribution-for-2-sites">
       5.4 Joint daily traffic probability distribution for 2 sites
       <a class="anchor-link" href="#5.4-Joint-daily-traffic-probability-distribution-for-2-sites">
        ¶
       </a>
      </h3>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Our upcoming plot will evaluate the probability distribution of daily cyclist counts at two different sites simultaneously using 2-dimensional histograms. To make things insteresting we choose the two least correlated counter sites.
      </p>
      <p>
       Roughly speaking, 2-dimensional histograms present the likelihood of two event happening of the same time. In our case, the two events are
       <em>
        site 1
       </em>
       getting
       <em>
        x
       </em>
       cyclists in a day and
       <em>
        site 2
       </em>
       getting
       <em>
        y
       </em>
       cyclists during the same day.
      </p>
      <p>
       As for 1-dimensional histograms (more in
       <a href="/python/histograms-and-box-plots-tutorial" target="_blank">
        section 4
       </a>
       ), Plotly does the computations for you. All you need to input are the two samples corresponding to the variables of interest (e.g. the daily cyclist count at each site).
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[48]">
      <a class="prompt input_prompt" href="#in-[48]">
       In [48]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">help</span><span class="p">(</span><span class="n">Histogram2d</span><span class="p">)</span>  <span class="c"># call help!</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt">
       </div>
       <div class="output_subarea output_stream output_stdout output_text">
        <pre>
Help on class Histogram2d in module plotly.graph_objs.graph_objs:

class Histogram2d(PlotlyTrace)
 |  A dictionary-like object for representing a 2D histogram trace in plotly.
 |
 |  Example:
 |
 |      &gt;&gt;&gt; import numpy as np
 |      &gt;&gt;&gt; x = np.random.randn(500)
 |      &gt;&gt;&gt; y = np.random.randn(500)+1
 |      &gt;&gt;&gt; py.iplot([Histogram2d(x=x, y=y)])
 |
 |  Online example:
 |
 |      https://plot.ly/python/2D-Histograms/
 |
 |  Quick method reference:
 |
 |      Histogram2d.update(changes)
 |      Histogram2d.strip_style()
 |      Histogram2d.get_data()
 |      Histogram2d.to_graph_objs()
 |      Histogram2d.validate()
 |      Histogram2d.to_string()
 |      Histogram2d.force_clean()
 |
 |  Valid keys:
 |
 |      x [required=True] (value=list or 1d numpy array of numbers, strings,
 |      datetimes) (streamable):
 |          Sets the data sample to be binned on the x-axis and whose
 |          distribution (computed by Plotly) will correspond to the
 |          x-coordinates of this 2D histogram trace.
 |
 |      y [required=True] (value=list or 1d numpy array of numbers, strings,
 |      datetimes) (streamable):
 |          Sets the data sample to be binned on the y-axis and whose
 |          distribution (computed by Plotly) will correspond to the
 |          y-coordinates of this 2D histogram trace.
 |
 |      histnorm [required=False] (value='' | 'percent' | 'probability' |
 |      'density' | 'probability density'):
 |          Sets the type of normalization for this histogram trace. By default
 |          ('histnorm' set to '') the height of each bar displays the frequency
 |          of occurrence, i.e., the number of times this value was found in the
 |          corresponding bin. If set to 'percent', the height of each bar
 |          displays the percentage of total occurrences found within the
 |          corresponding bin. If set to 'probability', the height of each bar
 |          displays the probability that an event will fall into the
 |          corresponding bin. If set to 'density', the height of each bar is
 |          equal to the number of occurrences in a bin divided by the size of
 |          the bin interval such that summing the area of all bins will yield
 |          the total number of occurrences. If set to 'probability density',
 |          the height of each bar is equal to the number of probability that an
 |          event will fall into the corresponding bin divided by the size of
 |          the bin interval such that summing the area of all bins will yield
 |          1.
 |
 |      histfunc [required=False] (value='count' | 'sum' | 'avg' | 'min' |
 |      'max'):
 |          Sets the binning function used for this histogram trace. The default
 |          value is 'count' where the histogram values are computed by counting
 |          the number of values lying inside each bin. With 'histfunc' set to
 |          'sum', 'avg', 'min' or 'max', the histogram values are computed
 |          using the sum, the average, the minimum or the 'maximum' of the
 |          values lying inside each bin respectively.
 |
 |      name [required=False] (value=a string):
 |          The label associated with this trace. This name will appear in the
 |          legend, on hover and in the column header in the online spreadsheet.
 |
 |      autobinx [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the x-axis bin parameters are picked
 |          automatically by Plotly. Once 'autobinx' is set to False, the x-axis
 |          bins parameters can be declared in 'xbins' object.
 |
 |      nbinsx [required=False] (value=number: x &gt; 0):
 |          Specifies the number of x-axis bins. No need to set 'autobinx' to
 |          False for 'nbinsx' to apply.
 |
 |      xbins [required=False] (value=XBins object | dictionary-like object):
 |          Links a dictionary-like object defining the parameters of x-axis
 |          bins of this trace, for example, the bin width and the bins'
 |          starting and  ending value. Has an effect only if 'autobinx' is set
 |          to False.
 |
 |          For more, run `help(plotly.graph_objs.XBins)`
 |
 |      autobiny [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the y-axis bin parameters are picked
 |          automatically by Plotly. Once 'autobiny' is set to False, the y-axis
 |          bins parameters can be declared in 'ybins' object.
 |
 |      nbinsy [required=False] (value=number: x &gt; 0):
 |          Specifies the number of y-axis bins. No need to set 'autobiny' to
 |          False for 'nbinsy' to apply.
 |
 |      ybins [required=False] (value=YBins object | dictionary-like object):
 |          Links a dictionary-like object defining the parameters of y-axis
 |          bins of this trace, for example, the bin width and the bins'
 |          starting and  ending value. Has an effect only if 'autobiny' is set
 |          to False.
 |
 |          For more, run `help(plotly.graph_objs.YBins)`
 |
 |      colorscale [required=False] (value=list or 1d numpy array of value-color
 |      pairs | 'Greys' | 'Greens' | 'Bluered' | 'Hot' | 'Picnic' | 'Portland' |
 |      'Jet' | 'RdBu' | 'Blackbody' | 'Earth' | 'Electric' | 'YIOrRd' |
 |      'YIGnBu'):
 |          Sets and/or defines the color scale for this trace. The string
 |          values are pre-defined color scales. For custom color scales, define
 |          a list or 1d numpy array of value-color pairs where, the first
 |          element of the pair corresponds to a normalized value of z from 0-1,
 |          i.e. (z-zmin)/ (zmax-zmin), and the second element of pair
 |          corresponds to a color. Use with 'zauto', 'zmin' and 'zmax to fine-
 |          tune the map from 'z' to rendered colors.
 |
 |          Examples:
 |              'Greys' | [[0, 'rgb(0,0,0)'], [0.5, 'rgb(65, 182, 196)'], [1,
 |              'rgb(255,255,255)']]
 |
 |      reversescale [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the color scale will be reversed.
 |
 |      showscale [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the color scale associated with this mapping
 |          will be shown alongside the figure.
 |
 |      colorbar [required=False] (value=ColorBar object | dictionary-like
 |      object):
 |          Links a dictionary-like object defining the parameters of the color
 |          bar associated with this trace (including its title, length and
 |          width).
 |
 |          For more, run `help(plotly.graph_objs.ColorBar)`
 |
 |      zauto [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the default values of 'zmax' and 'zmax' can be
 |          overwritten.
 |
 |      zmin [required=False] (value=number):
 |          Sets the minimum 'z' data value to be resolved by the color scale.
 |          Its default value is the minimum of the 'z' data values. This value
 |          will be used as the minimum in the color scale normalization. For
 |          more info see 'colorscale'.
 |
 |      zmax [required=False] (value=number):
 |          Sets the maximum 'z' data value to be resolved by the color scale.
 |          Its default value is the maximum of the 'z' data values. This value
 |          will be used as the maximum in the color scale normalization. For
 |          more info see 'colorscale'.
 |
 |      zsmooth [required=False] (value=False | 'best' | 'fast'):
 |          Choose between algorithms ('best' or 'fast') to smooth data linked
 |          to 'z'. The default value is False corresponding to no smoothing.
 |
 |      opacity [required=False] (value=number: x in [0, 1]):
 |          Sets the opacity, or transparency, of the entire object, also known
 |          as the alpha channel of colors. If the object's color is given in
 |          terms of 'rgba' color model, 'opacity' is redundant.
 |
 |      xaxis [required=False] (value='x1' | 'x2' | 'x3' | etc.):
 |          This key determines which x-axis the x-coordinates of this trace
 |          will reference in the figure.  Values 'x1' and 'x' reference to
 |          'xaxis' in 'layout', 'x2' references to 'xaxis2' in 'layout', and so
 |          on. Note that 'x1' will always refer to 'xaxis' or 'xaxis1' in
 |          'layout', they are the same.
 |
 |      yaxis [required=False] (value='y1' | 'y2' | 'y3' | etc.):
 |          This key determines which y-axis the y-coordinates of this trace
 |          will reference in the figure.  Values 'y1' and 'y' reference to
 |          'yaxis' in 'layout', 'y2' references to 'yaxis2' in 'layout', and so
 |          on. Note that 'y1' will always refer to 'yaxis' or 'yaxis1' in
 |          'layout', they are the same.
 |
 |      showlegend [required=False] (value=a boolean: True | False):
 |          Toggle whether or not this trace will be labeled in the legend.
 |
 |      stream [required=False] (value=Stream object | dictionary-like object):
 |          Links a dictionary-like object that initializes this trace as a
 |          writable-stream, for use with the streaming API.
 |
 |          For more, run `help(plotly.graph_objs.Stream)`
 |
 |      visible [required=False] (value=a boolean: True | False):
 |          Toggles whether or not this object will be visible on the rendered
 |          figure.
 |
 |      xsrc [required=True] (value=a string equal to the unique identifier of a
 |      plotly grid column) (streamable):
 |          Sets the data sample to be binned on the x-axis and whose
 |          distribution (computed by Plotly) will correspond to the
 |          x-coordinates of this 2D histogram trace.
 |
 |      ysrc [required=True] (value=a string equal to the unique identifier of a
 |      plotly grid column) (streamable):
 |          Sets the data sample to be binned on the y-axis and whose
 |          distribution (computed by Plotly) will correspond to the
 |          y-coordinates of this 2D histogram trace.
 |
 |      type [required=False] (value='histogram2d'):
 |          Plotly identifier for this data's trace type.
 |
 |  Method resolution order:
 |      Histogram2d
 |      PlotlyTrace
 |      PlotlyDict
 |      __builtin__.dict
 |      __builtin__.object
 |
 |  Methods inherited from PlotlyTrace:
 |
 |  __init__(self, *args, **kwargs)
 |
 |  to_string(self, level=0, indent=4, eol='\n', pretty=True, max_chars=80)
 |      Returns a formatted string showing graph_obj constructors.
 |
 |      Example:
 |
 |          print(obj.to_string())
 |
 |      Keyword arguments:
 |      level (default = 0) -- set number of indentations to start with
 |      indent (default = 4) -- set indentation amount
 |      eol (default = '\n') -- set end of line character(s)
 |      pretty (default = True) -- curtail long list output with a '...'
 |      max_chars (default = 80) -- set max characters per line
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from PlotlyDict:
 |
 |  __setitem__(self, key, value)
 |
 |  force_clean(self, caller=True)
 |      Attempts to convert to graph_objs and call force_clean() on values.
 |
 |      Calling force_clean() on a PlotlyDict will ensure that the object is
 |      valid and may be sent to plotly. This process will also remove any
 |      entries that end up with a length == 0.
 |
 |      Careful! This will delete any invalid entries *silently*.
 |
 |  get_data(self)
 |      Returns the JSON for the plot with non-data elements stripped.
 |
 |  get_ordered(self, caller=True)
 |
 |  strip_style(self)
 |      Strip style from the current representation.
 |
 |      All PlotlyDicts and PlotlyLists are guaranteed to survive the
 |      stripping process, though they made be left empty. This is allowable.
 |
 |      Keys that will be stripped in this process are tagged with
 |      `'type': 'style'` in graph_objs_meta.json.
 |
 |      This process first attempts to convert nested collections from dicts
 |      or lists to subclasses of PlotlyList/PlotlyDict. This process forces
 |      a validation, which may throw exceptions.
 |
 |      Then, each of these objects call `strip_style` on themselves and so
 |      on, recursively until the entire structure has been validated and
 |      stripped.
 |
 |  to_graph_objs(self, caller=True)
 |      Walk obj, convert dicts and lists to plotly graph objs.
 |
 |      For each key in the object, if it corresponds to a special key that
 |      should be associated with a graph object, the ordinary dict or list
 |      will be reinitialized as a special PlotlyDict or PlotlyList of the
 |      appropriate `kind`.
 |
 |  update(self, dict1=None, **dict2)
 |      Update current dict with dict1 and then dict2.
 |
 |      This recursively updates the structure of the original dictionary-like
 |      object with the new entries in the second and third objects. This
 |      allows users to update with large, nested structures.
 |
 |      Note, because the dict2 packs up all the keyword arguments, you can
 |      specify the changes as a list of keyword agruments.
 |
 |      Examples:
 |      # update with dict
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      update_dict = dict(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj.update(update_dict)
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      # update with list of keyword arguments
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      obj.update(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      This 'fully' supports duck-typing in that the call signature is
 |      identical, however this differs slightly from the normal update
 |      method provided by Python's dictionaries.
 |
 |  validate(self, caller=True)
 |      Recursively check the validity of the keys in a PlotlyDict.
 |
 |      The valid keys constitute the entries in each object
 |      dictionary in graph_objs_meta.json
 |
 |      The validation process first requires that all nested collections be
 |      converted to the appropriate subclass of PlotlyDict/PlotlyList. Then,
 |      each of these objects call `validate` and so on, recursively,
 |      until the entire object has been validated.
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors inherited from PlotlyDict:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from __builtin__.dict:
 |
 |  __cmp__(...)
 |      x.__cmp__(y) &lt;==&gt; cmp(x,y)
 |
 |  __contains__(...)
 |      D.__contains__(k) -&gt; True if D has a key k, else False
 |
 |  __delitem__(...)
 |      x.__delitem__(y) &lt;==&gt; del x[y]
 |
 |  __eq__(...)
 |      x.__eq__(y) &lt;==&gt; x==y
 |
 |  __ge__(...)
 |      x.__ge__(y) &lt;==&gt; x&gt;=y
 |
 |  __getattribute__(...)
 |      x.__getattribute__('name') &lt;==&gt; x.name
 |
 |  __getitem__(...)
 |      x.__getitem__(y) &lt;==&gt; x[y]
 |
 |  __gt__(...)
 |      x.__gt__(y) &lt;==&gt; x&gt;y
 |
 |  __iter__(...)
 |      x.__iter__() &lt;==&gt; iter(x)
 |
 |  __le__(...)
 |      x.__le__(y) &lt;==&gt; x&lt;=y
 |
 |  __len__(...)
 |      x.__len__() &lt;==&gt; len(x)
 |
 |  __lt__(...)
 |      x.__lt__(y) &lt;==&gt; x&lt;y
 |
 |  __ne__(...)
 |      x.__ne__(y) &lt;==&gt; x!=y
 |
 |  __repr__(...)
 |      x.__repr__() &lt;==&gt; repr(x)
 |
 |  __sizeof__(...)
 |      D.__sizeof__() -&gt; size of D in memory, in bytes
 |
 |  clear(...)
 |      D.clear() -&gt; None.  Remove all items from D.
 |
 |  copy(...)
 |      D.copy() -&gt; a shallow copy of D
 |
 |  fromkeys(...)
 |      dict.fromkeys(S[,v]) -&gt; New dict with keys from S and values equal to v.
 |      v defaults to None.
 |
 |  get(...)
 |      D.get(k[,d]) -&gt; D[k] if k in D, else d.  d defaults to None.
 |
 |  has_key(...)
 |      D.has_key(k) -&gt; True if D has a key k, else False
 |
 |  items(...)
 |      D.items() -&gt; list of D's (key, value) pairs, as 2-tuples
 |
 |  iteritems(...)
 |      D.iteritems() -&gt; an iterator over the (key, value) items of D
 |
 |  iterkeys(...)
 |      D.iterkeys() -&gt; an iterator over the keys of D
 |
 |  itervalues(...)
 |      D.itervalues() -&gt; an iterator over the values of D
 |
 |  keys(...)
 |      D.keys() -&gt; list of D's keys
 |
 |  pop(...)
 |      D.pop(k[,d]) -&gt; v, remove specified key and return the corresponding value.
 |      If key is not found, d is returned if given, otherwise KeyError is raised
 |
 |  popitem(...)
 |      D.popitem() -&gt; (k, v), remove and return some (key, value) pair as a
 |      2-tuple; but raise KeyError if D is empty.
 |
 |  setdefault(...)
 |      D.setdefault(k[,d]) -&gt; D.get(k,d), also set D[k]=d if k not in D
 |
 |  values(...)
 |      D.values() -&gt; list of D's values
 |
 |  viewitems(...)
 |      D.viewitems() -&gt; a set-like object providing a view on D's items
 |
 |  viewkeys(...)
 |      D.viewkeys() -&gt; a set-like object providing a view on D's keys
 |
 |  viewvalues(...)
 |      D.viewvalues() -&gt; an object providing a view on D's values
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes inherited from __builtin__.dict:
 |
 |  __hash__ = None
 |
 |  __new__ = &lt;built-in method __new__ of type object&gt;
 |      T.__new__(S, ...) -&gt; a new object with type S, a subtype of T


</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       The style keys in
       <code>
        Histogram2d
       </code>
       are the same as in
       <code>
        Heatmap
       </code>
       .
      </p>
      <p>
       First, find the two least correlated sites using the correlation matrix
       <code>
        Corr_site
       </code>
       computed in
       <a href="#5.2-Correlation-heatmap-between-sites">
        subsection 5.2
       </a>
       :
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[49]">
      <a class="prompt input_prompt" href="#in-[49]">
       In [49]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Get 2D index (as a tuple) of the least correlated sites </span>
<span class="n">ind_least_corr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">(</span><span class="n">Corr_site</span><span class="o">.</span><span class="n">argmin</span><span class="p">(),</span> <span class="n">Corr_site</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c"># Get 1st site, remove &lt;br&gt; tag from string</span>
<span class="n">site1</span> <span class="o">=</span> <span class="n">sites</span><span class="p">[</span><span class="n">ind_least_corr</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'&lt;br&gt;'</span><span class="p">,</span> <span class="s">''</span><span class="p">)</span>
<span class="n">z_day1</span> <span class="o">=</span> <span class="n">Z_dayXsite</span><span class="p">[:,</span> <span class="n">ind_least_corr</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>

<span class="c"># And similarly for the 2nd site, remove &lt;br&gt; tag from string</span>
<span class="n">site2</span> <span class="o">=</span> <span class="n">sites</span><span class="p">[</span><span class="n">ind_least_corr</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'&lt;br&gt;'</span><span class="p">,</span> <span class="s">' '</span><span class="p">)</span>
<span class="n">z_day2</span> <span class="o">=</span> <span class="n">Z_dayXsite</span><span class="p">[:,</span> <span class="n">ind_least_corr</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[50]">
      <a class="prompt input_prompt" href="#in-[50]">
       In [50]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">site1</span><span class="p">,</span> <span class="n">site2</span>  <span class="c"># show 2 least-correlated sites</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[50]">
        <a class="prompt output_prompt" href="#out[50]">
         Out[50]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
('du Parc/Duluth', 'Pierre-Dupuy (Habitat 67)')
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Our plot will feature custom axes ranges and bin sizes.
      </p>
      <p>
       So, let's get an idea of the range of each sample:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[51]">
      <a class="prompt input_prompt" href="#in-[51]">
       In [51]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">z_day1</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">z_day2</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[51]">
        <a class="prompt output_prompt" href="#out[51]">
         Out[51]:
        </a>
       </div>
       <div class="output_text output_subarea output_pyout">
        <pre>
(4103, 4841)
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       For presentation purposes, the axes' and bins' upper limits will be rounded up to 5000.
      </p>
      <p>
       Moreover, we will smooth the counters using
       <code>
        'zsmooth
       </code>
       key in
       <code>
        Histogram2d
       </code>
       and overlay scatter points of both two sites' daily cyclist counts, plotted against each other. Each scatter point will be label by the date using
       <code>
        dates_in_words
       </code>
       list defined in
       <a href="#5.3-Contours-of-traffic-progression-from-most-to-least-trafficked-sites">
        subsection 5.3
       </a>
       .
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[52]">
      <a class="prompt input_prompt" href="#in-[52]">
       In [52]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Select axis and bin range and bin size</span>
<span class="n">xy_range</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5000</span><span class="p">]</span>
<span class="n">bin_size</span> <span class="o">=</span> <span class="mi">500</span>

<span class="c"># Define a dictionary of bins specification </span>
<span class="n">bins</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">start</span><span class="o">=</span><span class="n">xy_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="n">end</span><span class="o">=</span><span class="n">xy_range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">size</span><span class="o">=</span><span class="n">bin_size</span>
<span class="p">)</span>

<span class="n">cbar_title</span><span class="o">=</span><span class="s">'Number of occurences from Apr 1 to Aug 31'</span>  <span class="c"># colorbar title</span>

<span class="c"># Make histogram2d object, no histogram normalization (the default)</span>
<span class="n">trace1</span> <span class="o">=</span> <span class="n">Histogram2d</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">z_day1</span><span class="p">,</span>  <span class="c"># sample to be binned on the x-axis</span>
    <span class="n">y</span><span class="o">=</span><span class="n">z_day2</span><span class="p">,</span>  <span class="c"># sample to be binned on of the y-axis</span>
    <span class="n">xbins</span><span class="o">=</span><span class="n">XBins</span><span class="p">(</span><span class="n">bins</span><span class="p">),</span>  <span class="c"># link custom bine specs</span>
    <span class="n">ybins</span><span class="o">=</span><span class="n">YBins</span><span class="p">(</span><span class="n">bins</span><span class="p">),</span>  <span class="c"># link custom bin specs</span>
    <span class="n">zsmooth</span><span class="o">=</span><span class="s">'best'</span><span class="p">,</span>     <span class="c"># (!) apply smoothing to contours</span>
    <span class="n">colorscale</span><span class="o">=</span><span class="s">'Portland'</span><span class="p">,</span>  <span class="c"># choose a pre-defined color scale</span>
    <span class="n">colorbar</span><span class="o">=</span><span class="n">ColorBar</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">cbar_title</span><span class="p">,</span>   <span class="c"># set colorbar title</span>
        <span class="n">titleside</span><span class="o">=</span><span class="s">'right'</span><span class="p">,</span>  <span class="c"># put title right of colorbar</span>
        <span class="n">ticks</span><span class="o">=</span><span class="s">'outside'</span>     <span class="c"># put ticks outside colorbar</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="c"># Make a scatter object</span>
<span class="n">trace2</span> <span class="o">=</span> <span class="n">Scatter</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">z_day1</span><span class="p">,</span>  <span class="c"># x coordinates</span>
    <span class="n">y</span><span class="o">=</span><span class="n">z_day2</span><span class="p">,</span>  <span class="c"># y coordinates</span>
    <span class="n">mode</span><span class="o">=</span><span class="s">'markers'</span><span class="p">,</span>  <span class="c"># just marker pts</span>
    <span class="n">name</span><span class="o">=</span><span class="s">''</span><span class="p">,</span>         <span class="c"># no hover name</span>
    <span class="n">text</span><span class="o">=</span><span class="n">dates_in_words</span><span class="p">,</span>  <span class="c"># text label corresp. to date</span>
    <span class="n">marker</span><span class="o">=</span><span class="n">Marker</span><span class="p">(</span>
        <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>           <span class="c"># set marker size (px)</span>
        <span class="n">color</span><span class="o">=</span><span class="s">'#e0e0e0'</span>   <span class="c"># set marker color</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="c"># Package two traces in data object, </span>
<span class="c"># (!) plot scatter on top of 2d histogram</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">([</span><span class="n">trace1</span><span class="p">,</span> <span class="n">trace2</span><span class="p">])</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       On to the latyout:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[53]">
      <a class="prompt input_prompt" href="#in-[53]">
       In [53]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">title</span> <span class="o">=</span> <span class="s">'Fig 5.4a: Joint frequency distribution&lt;br&gt;</span><span class="se">\</span>
<span class="s">of daily cyclist counts at two Montreal sites in 2013'</span>  <span class="c"># plot's title</span>

<span class="n">x_title</span> <span class="o">=</span> <span class="s">'Daily cyclist count at {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">site1</span><span class="p">)</span>  <span class="c"># x and y axis titles</span>
<span class="n">y_title</span> <span class="o">=</span> <span class="s">'Daily cyclist count at {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">site2</span><span class="p">)</span>

<span class="c"># Make a layout object</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>  <span class="c"># set plot's title</span>
    <span class="n">font</span><span class="o">=</span><span class="n">Font</span><span class="p">(</span>
        <span class="n">family</span><span class="o">=</span><span class="s">'PT Sans Narrow, sans-serif'</span><span class="p">,</span>  <span class="c"># global font</span>
        <span class="n">size</span><span class="o">=</span><span class="mi">13</span>
    <span class="p">),</span>
    <span class="n">xaxis</span><span class="o">=</span><span class="n">XAxis</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">x_title</span><span class="p">,</span>   <span class="c"># set x-axis title</span>
        <span class="nb">range</span><span class="o">=</span><span class="n">xy_range</span><span class="p">,</span>  <span class="c"># x-axis range</span>
        <span class="n">zeroline</span><span class="o">=</span><span class="bp">False</span>   <span class="c"># remove x=0 line</span>
    <span class="p">),</span>
    <span class="n">yaxis</span><span class="o">=</span><span class="n">YAxis</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">y_title</span><span class="p">,</span>   <span class="c"># y-axis title</span>
        <span class="nb">range</span><span class="o">=</span><span class="n">xy_range</span><span class="p">,</span>  <span class="c"># y-axis range (same as x-axis)</span>
        <span class="n">zeroline</span><span class="o">=</span><span class="bp">False</span>   <span class="c"># remove y=0 line</span>
    <span class="p">),</span>
    <span class="n">annotations</span><span class="o">=</span><span class="n">Annotations</span><span class="p">([</span>  <span class="c"># add annotation citing the data source</span>
        <span class="n">make_anno</span><span class="p">()</span>
    <span class="p">]),</span>
    <span class="n">showlegend</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="c"># remove legend</span>
    <span class="n">autosize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>    <span class="c"># custom size</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>         <span class="c"># set figure width </span>
    <span class="n">height</span><span class="o">=</span><span class="mi">520</span>         <span class="c">#  and height</span>
<span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Finally, package data and layout object into a figure object and send it to Plotly:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[54]">
      <a class="prompt input_prompt" href="#in-[54]">
       In [54]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Make figure object</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="c"># Define filename in relation to the sites chosen</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s">'s5_hist2d-sites-{}-{}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">ind_least_corr</span><span class="p">)</span>

<span class="c"># (@) Send figure object to Plotly, show result in notebook</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[54]">
        <a class="prompt output_prompt" href="#out[54]">
         Out[54]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <iframe height="525" id="igraph" scrolling="no" seamless="seamless" src="https://plot.ly/~etpinard/256.embed" style="border:none;" width="100%">
        </iframe>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[55]">
      <a class="prompt input_prompt" href="#in-[55]">
       In [55]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Make figure object</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="c"># Define filename in relation to the sites chosen</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s">'s5_hist2d-sites-{}-{}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">ind_least_corr</span><span class="p">)</span>

<span class="c"># (@) Send figure object to Plotly, show result in notebook</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[55]">
        <a class="prompt output_prompt" href="#out[55]">
         Out[55]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <iframe height="525" id="igraph" scrolling="no" seamless="seamless" src="https://plot.ly/~etpinard/256.embed" style="border:none;" width="100%">
        </iframe>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Notice that there are a few hotspots of probability. By hovering over the scatter points, we notice that the Pierre-Dupuy site gets most of its traffic during weekends and holidays.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Next, we add two subplots to the above figure showing 1D histograms of daily cyclist counts for each of the two counter site (i.e. their marginal distibutions).
      </p>
      <p>
       From our current figure object, we first adjust the domains of the axes in place and add one x-axis and one y-axis:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[56]">
      <a class="prompt input_prompt" href="#in-[56]">
       In [56]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Adjust the existing axes</span>
<span class="n">layout</span><span class="p">[</span><span class="s">'xaxis'</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">])</span>  <span class="c"># decrease domain of x-axis1 (norm. coord.)</span>
<span class="n">layout</span><span class="p">[</span><span class="s">'yaxis'</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span>  <span class="c"># decrease domain of y-axis1</span>
    <span class="n">showgrid</span><span class="o">=</span><span class="bp">False</span>    <span class="c"># remove vertical grid lines</span>
<span class="p">)</span>

<span class="c"># Set up new axes</span>
<span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">xaxis2</span><span class="o">=</span><span class="n">XAxis</span><span class="p">(</span>
    <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="c"># domain of x-axis2</span>
    <span class="n">zeroline</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>   <span class="c"># remove x=0 line</span>
    <span class="n">showgrid</span><span class="o">=</span><span class="bp">True</span>     <span class="c"># show horizontal grid line</span>
<span class="p">))</span>
<span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">yaxis2</span><span class="o">=</span><span class="n">YAxis</span><span class="p">(</span>
    <span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="c"># domain of y-axis2</span>
    <span class="n">zeroline</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>   <span class="c"># remove y=0 line</span>
    <span class="n">showgrid</span><span class="o">=</span><span class="bp">True</span>     <span class="c"># show vertical line</span>
<span class="p">))</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Next, make two histogram objects (N.B. the 1D version) and append to the current data object:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[57]">
      <a class="prompt input_prompt" href="#in-[57]">
       In [57]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">hist_color</span><span class="o">=</span><span class="s">"rgb(242,211,56)"</span>  <span class="c"># pick a color for the bars</span>

<span class="c"># Make an Histogram object with vertical bins and no normalization</span>
<span class="n">trace3</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">z_day1</span><span class="p">,</span>    <span class="c"># x sample, bind bins to x-axis</span>
    <span class="n">name</span><span class="o">=</span><span class="s">''</span><span class="p">,</span>     <span class="c"># no name on hover</span>
    <span class="n">xbins</span><span class="o">=</span><span class="n">XBins</span><span class="p">(</span><span class="n">bins</span><span class="p">),</span>  <span class="c"># use same bins as in the 2D histogram </span>
    <span class="n">marker</span><span class="o">=</span><span class="n">Marker</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">hist_color</span><span class="p">),</span> <span class="c"># choose bin color</span>
    <span class="n">xaxis</span><span class="o">=</span><span class="s">'x1'</span><span class="p">,</span>  <span class="c"># bind x coords to xaxis1</span>
    <span class="n">yaxis</span><span class="o">=</span><span class="s">'y2'</span>   <span class="c"># bind y coords to yaxis2</span>
<span class="p">)</span>

<span class="c"># Make an Histogram object with horizontal bins and no normalization</span>
<span class="n">trace4</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span>
    <span class="n">y</span><span class="o">=</span><span class="n">z_day2</span><span class="p">,</span>    <span class="c"># y sample, bind bins to y-axis</span>
    <span class="n">name</span><span class="o">=</span><span class="s">''</span><span class="p">,</span>     <span class="c"># no name on hover</span>
    <span class="n">ybins</span><span class="o">=</span><span class="n">YBins</span><span class="p">(</span><span class="n">bins</span><span class="p">),</span>  <span class="c"># use same bins as in the 2D histogram</span>
    <span class="n">marker</span><span class="o">=</span><span class="n">Marker</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">hist_color</span><span class="p">),</span> <span class="c"># choose bin color</span>
    <span class="n">xaxis</span><span class="o">=</span><span class="s">'x2'</span><span class="p">,</span>  <span class="c"># bind x coords to xaxis2</span>
    <span class="n">yaxis</span><span class="o">=</span><span class="s">'y1'</span>   <span class="c"># bind y coords to yaxis2</span>
<span class="p">)</span>

<span class="c"># Extend data object with the two 1d histogram traces</span>
<span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">trace3</span><span class="p">,</span> <span class="n">trace4</span><span class="p">])</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Tweak the colorbar's appearance, update the figure's titls and call Plotly:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[58]">
      <a class="prompt input_prompt" href="#in-[58]">
       In [58]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Update colorbar position, length and thickness</span>
<span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">'colorbar'</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="mf">0.35</span><span class="p">,</span>
    <span class="nb">len</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
    <span class="n">thickness</span><span class="o">=</span><span class="mi">20</span>
<span class="p">)</span>

<span class="c"># Update title</span>
<span class="n">title</span> <span class="o">=</span> <span class="s">'Fig 5.4b: Joint frequency distribution&lt;br&gt;</span><span class="se">\</span>
<span class="s">of daily cyclist counts at two Montreal sites in 2013'</span>

<span class="n">layout</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[59]">
      <a class="prompt input_prompt" href="#in-[59]">
       In [59]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Make figure object</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="c"># Define filename in relation to the sites chosen</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s">'s5_hist2dsplt-sites-{}-{}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">ind_least_corr</span><span class="p">)</span>

<span class="c"># (@) Send figure object to Plotly, show result in notebook</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[59]">
        <a class="prompt output_prompt" href="#out[59]">
         Out[59]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <iframe height="525" id="igraph" scrolling="no" seamless="seamless" src="https://plot.ly/~etpinard/294.embed" style="border:none;" width="100%">
        </iframe>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       The axes are shared (try zooming on the 2D histogram). It is interesting to see that the distribution of the Pierre Dupuy site is much more skewed than Parc/Duluth.
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Plotly allows users to plot 2D histograms of similar in appearance to ones generated by the
       <code>
        Contour
       </code>
       graph object using
       <code>
        Histogram2dContour
       </code>
       ,
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[60]">
      <a class="prompt input_prompt" href="#in-[60]">
       In [60]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">help</span><span class="p">(</span><span class="n">Histogram2dContour</span><span class="p">)</span>  <span class="c"># call help!</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt">
       </div>
       <div class="output_subarea output_stream output_stdout output_text">
        <pre>
Help on class Histogram2dContour in module plotly.graph_objs.graph_objs:

class Histogram2dContour(PlotlyTrace)
 |  A dictionary-like object for representing a 2D histogram contour trace in
 |      plotly.
 |
 |  Example:
 |
 |      &gt;&gt;&gt; import numpy as np
 |      &gt;&gt;&gt; x = np.random.randn(500)
 |      &gt;&gt;&gt; y = np.random.randn(500)+1
 |      &gt;&gt;&gt; py.iplot([Histogram2dContour(x=x, y=y)])
 |
 |  Online example:
 |
 |      https://plot.ly/python/2D-Histograms/
 |
 |  Quick method reference:
 |
 |      Histogram2dContour.update(changes)
 |      Histogram2dContour.strip_style()
 |      Histogram2dContour.get_data()
 |      Histogram2dContour.to_graph_objs()
 |      Histogram2dContour.validate()
 |      Histogram2dContour.to_string()
 |      Histogram2dContour.force_clean()
 |
 |  Valid keys:
 |
 |      x [required=True] (value=list or 1d numpy array of numbers, strings,
 |      datetimes) (streamable):
 |          Sets the data sample to be binned on the x-axis and whose
 |          distribution (computed by Plotly) will correspond to the
 |          x-coordinates of this 2D histogram trace.
 |
 |      y [required=True] (value=list or 1d numpy array of numbers, strings,
 |      datetimes) (streamable):
 |          Sets the data sample to be binned on the y-axis and whose
 |          distribution (computed by Plotly) will correspond to the
 |          y-coordinates of this 2D histogram trace.
 |
 |      histnorm [required=False] (value='' | 'percent' | 'probability' |
 |      'density' | 'probability density'):
 |          Sets the type of normalization for this histogram trace. By default
 |          ('histnorm' set to '') the height of each bar displays the frequency
 |          of occurrence, i.e., the number of times this value was found in the
 |          corresponding bin. If set to 'percent', the height of each bar
 |          displays the percentage of total occurrences found within the
 |          corresponding bin. If set to 'probability', the height of each bar
 |          displays the probability that an event will fall into the
 |          corresponding bin. If set to 'density', the height of each bar is
 |          equal to the number of occurrences in a bin divided by the size of
 |          the bin interval such that summing the area of all bins will yield
 |          the total number of occurrences. If set to 'probability density',
 |          the height of each bar is equal to the number of probability that an
 |          event will fall into the corresponding bin divided by the size of
 |          the bin interval such that summing the area of all bins will yield
 |          1.
 |
 |      histfunc [required=False] (value='count' | 'sum' | 'avg' | 'min' |
 |      'max'):
 |          Sets the binning function used for this histogram trace. The default
 |          value is 'count' where the histogram values are computed by counting
 |          the number of values lying inside each bin. With 'histfunc' set to
 |          'sum', 'avg', 'min' or 'max', the histogram values are computed
 |          using the sum, the average, the minimum or the 'maximum' of the
 |          values lying inside each bin respectively.
 |
 |      name [required=False] (value=a string):
 |          The label associated with this trace. This name will appear in the
 |          legend, on hover and in the column header in the online spreadsheet.
 |
 |      autobinx [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the x-axis bin parameters are picked
 |          automatically by Plotly. Once 'autobinx' is set to False, the x-axis
 |          bins parameters can be declared in 'xbins' object.
 |
 |      nbinsx [required=False] (value=number: x &gt; 0):
 |          Specifies the number of x-axis bins. No need to set 'autobinx' to
 |          False for 'nbinsx' to apply.
 |
 |      xbins [required=False] (value=XBins object | dictionary-like object):
 |          Links a dictionary-like object defining the parameters of x-axis
 |          bins of this trace, for example, the bin width and the bins'
 |          starting and  ending value. Has an effect only if 'autobinx' is set
 |          to False.
 |
 |          For more, run `help(plotly.graph_objs.XBins)`
 |
 |      autobiny [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the y-axis bin parameters are picked
 |          automatically by Plotly. Once 'autobiny' is set to False, the y-axis
 |          bins parameters can be declared in 'ybins' object.
 |
 |      nbinsy [required=False] (value=number: x &gt; 0):
 |          Specifies the number of y-axis bins. No need to set 'autobiny' to
 |          False for 'nbinsy' to apply.
 |
 |      ybins [required=False] (value=YBins object | dictionary-like object):
 |          Links a dictionary-like object defining the parameters of y-axis
 |          bins of this trace, for example, the bin width and the bins'
 |          starting and  ending value. Has an effect only if 'autobiny' is set
 |          to False.
 |
 |          For more, run `help(plotly.graph_objs.YBins)`
 |
 |      autocontour [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the contour parameters are picked
 |          automatically by Plotly. If False, declare the contours parameters
 |          in 'contours'.
 |
 |      ncontours [required=False] (value=number: x &gt; 1):
 |          Specifies the number of contours lines in the contour plot. No need
 |          to set 'autocontour' to False for 'ncontours' to apply.
 |
 |      contours [required=False] (value=Contours object | dictionary-like
 |      object):
 |          Links a dictionary-like object defining the parameters of the
 |          contours of this trace.
 |
 |          For more, run `help(plotly.graph_objs.Contours)`
 |
 |      line [required=False] (value=Line object | dictionary-like object)
 |      (streamable):
 |          Links a dictionary-like object containing line parameters for
 |          contour lines of this contour trace (including line width, dash,
 |          color and smoothing level). Has no an effect if 'showlines' is set
 |          to False in 'contours'.
 |
 |          For more, run `help(plotly.graph_objs.Line)`
 |
 |      colorscale [required=False] (value=list or 1d numpy array of value-color
 |      pairs | 'Greys' | 'Greens' | 'Bluered' | 'Hot' | 'Picnic' | 'Portland' |
 |      'Jet' | 'RdBu' | 'Blackbody' | 'Earth' | 'Electric' | 'YIOrRd' |
 |      'YIGnBu'):
 |          Sets and/or defines the color scale for this trace. The string
 |          values are pre-defined color scales. For custom color scales, define
 |          a list or 1d numpy array of value-color pairs where, the first
 |          element of the pair corresponds to a normalized value of z from 0-1,
 |          i.e. (z-zmin)/ (zmax-zmin), and the second element of pair
 |          corresponds to a color. Use with 'zauto', 'zmin' and 'zmax to fine-
 |          tune the map from 'z' to rendered colors.
 |
 |          Examples:
 |              'Greys' | [[0, 'rgb(0,0,0)'], [0.5, 'rgb(65, 182, 196)'], [1,
 |              'rgb(255,255,255)']]
 |
 |      reversescale [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the color scale will be reversed.
 |
 |      showscale [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the color scale associated with this mapping
 |          will be shown alongside the figure.
 |
 |      colorbar [required=False] (value=ColorBar object | dictionary-like
 |      object):
 |          Links a dictionary-like object defining the parameters of the color
 |          bar associated with this trace (including its title, length and
 |          width).
 |
 |          For more, run `help(plotly.graph_objs.ColorBar)`
 |
 |      zauto [required=False] (value=a boolean: True | False):
 |          Toggle whether or not the default values of 'zmax' and 'zmax' can be
 |          overwritten.
 |
 |      zmin [required=False] (value=number):
 |          Sets the minimum 'z' data value to be resolved by the color scale.
 |          Its default value is the minimum of the 'z' data values. This value
 |          will be used as the minimum in the color scale normalization. For
 |          more info see 'colorscale'.
 |
 |      zmax [required=False] (value=number):
 |          Sets the maximum 'z' data value to be resolved by the color scale.
 |          Its default value is the maximum of the 'z' data values. This value
 |          will be used as the maximum in the color scale normalization. For
 |          more info see 'colorscale'.
 |
 |      opacity [required=False] (value=number: x in [0, 1]):
 |          Sets the opacity, or transparency, of the entire object, also known
 |          as the alpha channel of colors. If the object's color is given in
 |          terms of 'rgba' color model, 'opacity' is redundant.
 |
 |      xaxis [required=False] (value='x1' | 'x2' | 'x3' | etc.):
 |          This key determines which x-axis the x-coordinates of this trace
 |          will reference in the figure.  Values 'x1' and 'x' reference to
 |          'xaxis' in 'layout', 'x2' references to 'xaxis2' in 'layout', and so
 |          on. Note that 'x1' will always refer to 'xaxis' or 'xaxis1' in
 |          'layout', they are the same.
 |
 |      yaxis [required=False] (value='y1' | 'y2' | 'y3' | etc.):
 |          This key determines which y-axis the y-coordinates of this trace
 |          will reference in the figure.  Values 'y1' and 'y' reference to
 |          'yaxis' in 'layout', 'y2' references to 'yaxis2' in 'layout', and so
 |          on. Note that 'y1' will always refer to 'yaxis' or 'yaxis1' in
 |          'layout', they are the same.
 |
 |      showlegend [required=False] (value=a boolean: True | False):
 |          Toggle whether or not this trace will be labeled in the legend.
 |
 |      stream [required=False] (value=Stream object | dictionary-like object):
 |          Links a dictionary-like object that initializes this trace as a
 |          writable-stream, for use with the streaming API.
 |
 |          For more, run `help(plotly.graph_objs.Stream)`
 |
 |      visible [required=False] (value=a boolean: True | False):
 |          Toggles whether or not this object will be visible on the rendered
 |          figure.
 |
 |      xsrc [required=True] (value=a string equal to the unique identifier of a
 |      plotly grid column) (streamable):
 |          Sets the data sample to be binned on the x-axis and whose
 |          distribution (computed by Plotly) will correspond to the
 |          x-coordinates of this 2D histogram trace.
 |
 |      ysrc [required=True] (value=a string equal to the unique identifier of a
 |      plotly grid column) (streamable):
 |          Sets the data sample to be binned on the y-axis and whose
 |          distribution (computed by Plotly) will correspond to the
 |          y-coordinates of this 2D histogram trace.
 |
 |      type [required=False] (value='histogram2dcontour'):
 |          Plotly identifier for this data's trace type.
 |
 |  Method resolution order:
 |      Histogram2dContour
 |      PlotlyTrace
 |      PlotlyDict
 |      __builtin__.dict
 |      __builtin__.object
 |
 |  Methods inherited from PlotlyTrace:
 |
 |  __init__(self, *args, **kwargs)
 |
 |  to_string(self, level=0, indent=4, eol='\n', pretty=True, max_chars=80)
 |      Returns a formatted string showing graph_obj constructors.
 |
 |      Example:
 |
 |          print(obj.to_string())
 |
 |      Keyword arguments:
 |      level (default = 0) -- set number of indentations to start with
 |      indent (default = 4) -- set indentation amount
 |      eol (default = '\n') -- set end of line character(s)
 |      pretty (default = True) -- curtail long list output with a '...'
 |      max_chars (default = 80) -- set max characters per line
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from PlotlyDict:
 |
 |  __setitem__(self, key, value)
 |
 |  force_clean(self, caller=True)
 |      Attempts to convert to graph_objs and call force_clean() on values.
 |
 |      Calling force_clean() on a PlotlyDict will ensure that the object is
 |      valid and may be sent to plotly. This process will also remove any
 |      entries that end up with a length == 0.
 |
 |      Careful! This will delete any invalid entries *silently*.
 |
 |  get_data(self)
 |      Returns the JSON for the plot with non-data elements stripped.
 |
 |  get_ordered(self, caller=True)
 |
 |  strip_style(self)
 |      Strip style from the current representation.
 |
 |      All PlotlyDicts and PlotlyLists are guaranteed to survive the
 |      stripping process, though they made be left empty. This is allowable.
 |
 |      Keys that will be stripped in this process are tagged with
 |      `'type': 'style'` in graph_objs_meta.json.
 |
 |      This process first attempts to convert nested collections from dicts
 |      or lists to subclasses of PlotlyList/PlotlyDict. This process forces
 |      a validation, which may throw exceptions.
 |
 |      Then, each of these objects call `strip_style` on themselves and so
 |      on, recursively until the entire structure has been validated and
 |      stripped.
 |
 |  to_graph_objs(self, caller=True)
 |      Walk obj, convert dicts and lists to plotly graph objs.
 |
 |      For each key in the object, if it corresponds to a special key that
 |      should be associated with a graph object, the ordinary dict or list
 |      will be reinitialized as a special PlotlyDict or PlotlyList of the
 |      appropriate `kind`.
 |
 |  update(self, dict1=None, **dict2)
 |      Update current dict with dict1 and then dict2.
 |
 |      This recursively updates the structure of the original dictionary-like
 |      object with the new entries in the second and third objects. This
 |      allows users to update with large, nested structures.
 |
 |      Note, because the dict2 packs up all the keyword arguments, you can
 |      specify the changes as a list of keyword agruments.
 |
 |      Examples:
 |      # update with dict
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      update_dict = dict(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj.update(update_dict)
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      # update with list of keyword arguments
 |      obj = Layout(title='my title', xaxis=XAxis(range=[0,1], domain=[0,1]))
 |      obj.update(title='new title', xaxis=dict(domain=[0,.8]))
 |      obj
 |      {'title': 'new title', 'xaxis': {'range': [0,1], 'domain': [0,.8]}}
 |
 |      This 'fully' supports duck-typing in that the call signature is
 |      identical, however this differs slightly from the normal update
 |      method provided by Python's dictionaries.
 |
 |  validate(self, caller=True)
 |      Recursively check the validity of the keys in a PlotlyDict.
 |
 |      The valid keys constitute the entries in each object
 |      dictionary in graph_objs_meta.json
 |
 |      The validation process first requires that all nested collections be
 |      converted to the appropriate subclass of PlotlyDict/PlotlyList. Then,
 |      each of these objects call `validate` and so on, recursively,
 |      until the entire object has been validated.
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors inherited from PlotlyDict:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)
 |
 |  ----------------------------------------------------------------------
 |  Methods inherited from __builtin__.dict:
 |
 |  __cmp__(...)
 |      x.__cmp__(y) &lt;==&gt; cmp(x,y)
 |
 |  __contains__(...)
 |      D.__contains__(k) -&gt; True if D has a key k, else False
 |
 |  __delitem__(...)
 |      x.__delitem__(y) &lt;==&gt; del x[y]
 |
 |  __eq__(...)
 |      x.__eq__(y) &lt;==&gt; x==y
 |
 |  __ge__(...)
 |      x.__ge__(y) &lt;==&gt; x&gt;=y
 |
 |  __getattribute__(...)
 |      x.__getattribute__('name') &lt;==&gt; x.name
 |
 |  __getitem__(...)
 |      x.__getitem__(y) &lt;==&gt; x[y]
 |
 |  __gt__(...)
 |      x.__gt__(y) &lt;==&gt; x&gt;y
 |
 |  __iter__(...)
 |      x.__iter__() &lt;==&gt; iter(x)
 |
 |  __le__(...)
 |      x.__le__(y) &lt;==&gt; x&lt;=y
 |
 |  __len__(...)
 |      x.__len__() &lt;==&gt; len(x)
 |
 |  __lt__(...)
 |      x.__lt__(y) &lt;==&gt; x&lt;y
 |
 |  __ne__(...)
 |      x.__ne__(y) &lt;==&gt; x!=y
 |
 |  __repr__(...)
 |      x.__repr__() &lt;==&gt; repr(x)
 |
 |  __sizeof__(...)
 |      D.__sizeof__() -&gt; size of D in memory, in bytes
 |
 |  clear(...)
 |      D.clear() -&gt; None.  Remove all items from D.
 |
 |  copy(...)
 |      D.copy() -&gt; a shallow copy of D
 |
 |  fromkeys(...)
 |      dict.fromkeys(S[,v]) -&gt; New dict with keys from S and values equal to v.
 |      v defaults to None.
 |
 |  get(...)
 |      D.get(k[,d]) -&gt; D[k] if k in D, else d.  d defaults to None.
 |
 |  has_key(...)
 |      D.has_key(k) -&gt; True if D has a key k, else False
 |
 |  items(...)
 |      D.items() -&gt; list of D's (key, value) pairs, as 2-tuples
 |
 |  iteritems(...)
 |      D.iteritems() -&gt; an iterator over the (key, value) items of D
 |
 |  iterkeys(...)
 |      D.iterkeys() -&gt; an iterator over the keys of D
 |
 |  itervalues(...)
 |      D.itervalues() -&gt; an iterator over the values of D
 |
 |  keys(...)
 |      D.keys() -&gt; list of D's keys
 |
 |  pop(...)
 |      D.pop(k[,d]) -&gt; v, remove specified key and return the corresponding value.
 |      If key is not found, d is returned if given, otherwise KeyError is raised
 |
 |  popitem(...)
 |      D.popitem() -&gt; (k, v), remove and return some (key, value) pair as a
 |      2-tuple; but raise KeyError if D is empty.
 |
 |  setdefault(...)
 |      D.setdefault(k[,d]) -&gt; D.get(k,d), also set D[k]=d if k not in D
 |
 |  values(...)
 |      D.values() -&gt; list of D's values
 |
 |  viewitems(...)
 |      D.viewitems() -&gt; a set-like object providing a view on D's items
 |
 |  viewkeys(...)
 |      D.viewkeys() -&gt; a set-like object providing a view on D's keys
 |
 |  viewvalues(...)
 |      D.viewvalues() -&gt; an object providing a view on D's values
 |
 |  ----------------------------------------------------------------------
 |  Data and other attributes inherited from __builtin__.dict:
 |
 |  __hash__ = None
 |
 |  __new__ = &lt;built-in method __new__ of type object&gt;
 |      T.__new__(S, ...) -&gt; a new object with type S, a subtype of T


</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       which shares the same style keys as
       <code>
        Contour
       </code>
       (more in
       <a href="#5.3-Contours-of-traffic-progression-from-most-to-least-trafficked-sites">
        subsection 5.3
       </a>
       ).
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <h5 id="Colorbrewer-color-scales-with-Plotly">
       Colorbrewer color scales with Plotly
       <a class="anchor-link" href="#Colorbrewer-color-scales-with-Plotly">
        ¶
       </a>
      </h5>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Next, we take a color scheme from the popular
       <a href="http://colorbrewer2.org/" target="_blank">
        ColorBrewer
       </a>
       website and convert it to Plotly syntax. Thanks to the colorbrewer Python
       <a href="https://pypi.python.org/pypi/colorbrewer/0.1.1" target="_blank">
        package
       </a>
       , ColorBrewer color schemes can be easily importing in a Python/IPython session. You can download the package using pip:
      </p>
      <pre><code>$ pip install colorbrewer
</code></pre>
      <p>
       As we saw
       <a href="#Custom-color-scales-in-Plotly">
        previously
       </a>
       , a custom color scale in Plotly is simply a list of lists linked to the
       <code>
        'scl'
       </code>
       key where the nested lists have the normalized level values as first item and the level colors as second item. So, consider the following function
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[61]">
      <a class="prompt input_prompt" href="#in-[61]">
       In [61]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="kn">import</span> <span class="nn">colorbrewer</span> <span class="kn">as</span> <span class="nn">cb</span>  <span class="c"># (*) import colorbrewer</span>
                          <span class="c"># (*) uses numpy as well</span>

<span class="k">def</span> <span class="nf">convert_cb_to_scl</span><span class="p">(</span><span class="n">cb_color</span><span class="p">,</span><span class="n">N</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    cb_color (positional): colorbrewer color dictionary</span>
<span class="sd">    N (keyword): number of colors in color scale</span>
<span class="sd">    '''</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">cb_color</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>                   <span class="c"># get list of N color tuples from cb dict</span>
    <span class="n">levels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">N</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>   <span class="c"># get list of N levels </span>

    <span class="c"># Make color scale list of lists, conveting each tuple to 'rgb( , , )'</span>
    <span class="n">scl_cb</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">scl_cb</span> <span class="o">+=</span> <span class="p">[[</span><span class="n">i</span><span class="p">,</span> <span class="s">"rgb("</span><span class="o">+</span><span class="s">','</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">color</span><span class="p">))</span><span class="o">+</span><span class="s">")"</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">levels</span><span class="p">,</span><span class="n">colors</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">scl_cb</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Now, choose a color scheme on
       <a href="http://colorbrewer2.org/" target="_blank">
        colorbrewer2.org
       </a>
       . The names are listed near the
       <code>
        EXPORT
       </code>
       button in the middle of the page,
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[62]">
      <a class="prompt input_prompt" href="#in-[62]">
       In [62]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Convert the Purples colorbrewer scale to Plotly syntax</span>
<span class="n">scl_cb</span> <span class="o">=</span> <span class="n">convert_cb_to_scl</span><span class="p">(</span><span class="n">cb</span><span class="o">.</span><span class="n">Purples</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       and fill in an
       <code>
        Histogram2dContour
       </code>
       object. For this plot, color only the contour lines by setting
       <code>
        'coloring': 'lines'
       </code>
       in
       <code>
        Contours
       </code>
       .
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[70]">
      <a class="prompt input_prompt" href="#in-[70]">
       In [70]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">cbar_title</span> <span class="o">=</span> <span class="s">'Number of occurences from Apr 1 to Aug 31'</span>  <span class="c"># colorbar title</span>

<span class="c"># Make Histogram2dContour object, with no hist. normalization (default)</span>
<span class="n">trace1</span> <span class="o">=</span> <span class="n">Histogram2dContour</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">z_day1</span><span class="p">,</span>  <span class="c"># sample of the x-axis</span>
    <span class="n">y</span><span class="o">=</span><span class="n">z_day2</span><span class="p">,</span>  <span class="c"># sample of the y-axis</span>
    <span class="n">xbins</span><span class="o">=</span><span class="n">XBins</span><span class="p">(</span><span class="n">bins</span><span class="p">),</span>  <span class="c"># custom x-axis bins (as in fig 5.4a &amp; 5.4b)</span>
    <span class="n">ybins</span><span class="o">=</span><span class="n">YBins</span><span class="p">(</span><span class="n">bins</span><span class="p">),</span>  <span class="c"># custom y-axis bins  </span>
    <span class="n">colorscale</span><span class="o">=</span><span class="n">scl_cb</span><span class="p">,</span>     <span class="c"># (!) colorbrewer color scale</span>
    <span class="n">colorbar</span><span class="o">=</span><span class="n">ColorBar</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">cbar_title</span><span class="p">,</span>   <span class="c"># set colorbar title</span>
        <span class="n">titleside</span><span class="o">=</span><span class="s">'right'</span><span class="p">,</span>  <span class="c"># place title below colorbar</span>
        <span class="n">autotick</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>     <span class="c"># custom ticks &amp; tick labels</span>
        <span class="n">ticks</span><span class="o">=</span><span class="s">''</span>            <span class="c"># no colorbar ticks </span>
    <span class="p">),</span>
    <span class="n">contours</span><span class="o">=</span><span class="n">Contours</span><span class="p">(</span><span class="n">coloring</span><span class="o">=</span><span class="s">'lines'</span><span class="p">),</span>  <span class="c"># (!) color only the lines</span>
    <span class="n">line</span><span class="o">=</span><span class="n">Line</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>                    <span class="c"># (!) increse line width</span>
<span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">([</span><span class="n">trace1</span><span class="p">])</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       With a similar layout to fig 5.4a:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[71]">
      <a class="prompt input_prompt" href="#in-[71]">
       In [71]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="n">title</span> <span class="o">=</span> <span class="s">'Fig 5.4c: Joint frequency distribution&lt;br&gt;</span><span class="se">\</span>
<span class="s">of daily cyclist counts at two Montreal sites in 2013'</span>  <span class="c"># plot's title</span>
<span class="n">x_title</span> <span class="o">=</span> <span class="s">'Daily cyclist count at {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">site1</span><span class="p">)</span>     <span class="c"># x an y axis</span>
<span class="n">y_title</span> <span class="o">=</span> <span class="s">'Daily cyclist count at {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">site2</span><span class="p">)</span>     <span class="c">#  titles</span>

<span class="c"># Make layout object</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="c"># figure title</span>
    <span class="n">font</span><span class="o">=</span><span class="n">Font</span><span class="p">(</span>
        <span class="n">family</span><span class="o">=</span><span class="s">'PT Sans Narrow, sans-serif'</span><span class="p">,</span>  <span class="c"># global font</span>
        <span class="n">size</span><span class="o">=</span><span class="mi">13</span>
    <span class="p">),</span>
    <span class="n">xaxis</span><span class="o">=</span><span class="n">XAxis</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">x_title</span><span class="p">,</span>    <span class="c"># set x-axis title</span>
        <span class="nb">range</span><span class="o">=</span><span class="n">xy_range</span><span class="p">,</span>   <span class="c"># set x-axis range</span>
        <span class="n">zeroline</span><span class="o">=</span><span class="bp">False</span>    <span class="c"># remove x=0 line</span>
    <span class="p">),</span>
    <span class="n">yaxis</span><span class="o">=</span><span class="n">YAxis</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">y_title</span><span class="p">,</span>    <span class="c"># set y-axis title </span>
        <span class="nb">range</span><span class="o">=</span><span class="n">xy_range</span><span class="p">,</span>   <span class="c"># set y-axis range (same as x-axis)</span>
        <span class="n">zeroline</span><span class="o">=</span><span class="bp">False</span>    <span class="c"># remove y=0 line</span>
    <span class="p">),</span>
    <span class="n">annotations</span><span class="o">=</span><span class="n">Annotations</span><span class="p">([</span>  <span class="c"># make annotation citing the source</span>
        <span class="n">make_anno</span><span class="p">()</span>
    <span class="p">]),</span>
    <span class="n">showlegend</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="c"># remove legend</span>
    <span class="n">autosize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>    <span class="c"># custom size</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span>         <span class="c"># figure width </span>
    <span class="n">height</span><span class="o">=</span><span class="mi">520</span>         <span class="c">#  and height</span>
<span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       Finally, send the figure object to Plotly and get a plot:
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing code_cell rendered">
    <div class="input">
     <div class="prompt input_prompt" id="in-[72]">
      <a class="prompt input_prompt" href="#in-[72]">
       In [72]:
      </a>
     </div>
     <div class="inner_cell">
      <div class="input_area">
       <div class="highlight">
        <pre><span class="c"># Make figure object</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="c"># Define filename in relation to the sites chosen</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s">'s5_hist2contour-sites-{}-{}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">ind_least_corr</span><span class="p">)</span>

<span class="c"># (@) Send figure object to Plotly, show result in notebook</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>
</pre>
       </div>
      </div>
     </div>
    </div>
    <div class="output_wrapper">
     <div class="output">
      <div class="output_area">
       <div class="prompt output_prompt" id="out[72]">
        <a class="prompt output_prompt" href="#out[72]">
         Out[72]:
        </a>
       </div>
       <div class="output_html rendered_html output_subarea output_pyout">
        <iframe height="525" id="igraph" scrolling="no" seamless="seamless" src="https://plot.ly/~etpinard/295.embed" style="border:none;" width="100%">
        </iframe>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <p>
       <br/>
      </p>
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <hr/>
      <h4 style="font-size:14pt;">
       Go to
       <a href="/python/matplotlib-to-plotly-tutorial">
        Section 6  --- Convert your Matplotlib plots to Plotly
       </a>
      </h4>
      <h4 style="font-size:14pt;">
       Go to
       <a href="/python/histograms-and-box-plots-tutorial">
        Section 4  --- Histograms &amp; Box Plots
       </a>
      </h4>
      <h4 style="font-size:14pt;">
       Go back to
       <a href="/python/heatmaps-contours-and-2dhistograms-tutorial#">
        top of page
       </a>
      </h4>
      <h4 style="font-size:14pt;">
       Go back to User Guide's
       <a href="/python/user-guide">
        homepage
       </a>
      </h4>
      <hr/>
      <!-- **Go to** [previous section]) -->
     </div>
    </div>
   </div>
   <div class="cell border-box-sizing text_cell rendered">
    <div class="prompt input_prompt">
    </div>
    <div class="inner_cell">
     <div class="text_cell_render border-box-sizing rendered_html">
      <div style="float:right; \">
       <img align="right" src="{{site.staticurl}}/images/py-user-guide-img/image06.png" style="float:right; margin-left: 5px; margin-top: -10px"/>
      </div>
      <h4>
       Got Questions or Feedback?
      </h4>
      <p>
       About
       <a href="https://plot.ly" target="_blank">
        Plotly
       </a>
      </p>
      <ul>
       <li>
        email: feedback@plot.ly
       </li>
       <li>
        tweet:
        <a href="https://twitter.com/plotlygraphs" target="_blank">
         @plotlygraphs
        </a>
       </li>
      </ul>
      <p>
       About the
       <a href="https://github.com/plotly/python-user-guide" target="_blank">
        User Guide
       </a>
      </p>
      <ul>
       <li>
        email: etienne@plot.ly
       </li>
       <li>
        tweet:
        <a href="https://twitter.com/etpinard" target="_blank">
         @etpinard
        </a>
       </li>
      </ul>
      <h4 style="margin-top:30px;">
       Notebook styling ideas
      </h4>
      <p>
       Big thanks to
      </p>
      <ul>
       <li>
        <a href="http://nbviewer.ipython.org/github/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers/blob/master/Prologue/Prologue.ipynb" target="_blank">
         Cam Davidson-Pilon
        </a>
       </li>
       <li>
        <a href="http://lorenabarba.com/blog/announcing-aeropython/#.U1ULXdX1LJ4.google_plusone_share" target="_blank">
         Lorena A. Barba
        </a>
       </li>
      </ul>
      <p>
       <br/>
      </p>
     </div>
    </div>
   </div>
